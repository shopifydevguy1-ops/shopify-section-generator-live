{% comment %}
---------------------------------------------------------
Copyright © 2023 Section Store. All rights reserved.
Unauthorized copying, modification, distribution, or use
of this code or any portion of it, is strictly prohibited.
Violators will be prosecuted to the fullest extent of the law.
For inquiries or permissions, contact daniel@section.store
---------------------------------------------------------
{% endcomment %}

{%- liquid 
  assign padding_horizontal = section.settings.padding_horizontal
  assign padding_horizontal_mobile = section.settings.padding_horizontal_mobile
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign border_color = section.settings.border_color
  assign border_thickness = section.settings.border_thickness
  assign margin_top = section.settings.margin_top
  assign margin_bottom = section.settings.margin_bottom
  assign background_color = section.settings.background_color
  assign background_gradient = section.settings.background_gradient
  assign lazy = section.settings.lazy

  assign bundles_position = section.settings.bundles_position

  assign heading = section.settings.heading
  assign heading_size = section.settings.heading_size
  assign heading_size_mobile = section.settings.heading_size_mobile
  assign heading_color = section.settings.heading_color
  assign heading_custom = section.settings.heading_custom
  assign heading_font = section.settings.heading_font
  assign heading_height = section.settings.heading_height
  assign heading_align = section.settings.heading_align
  assign heading_align_mobile = section.settings.heading_align_mobile
  assign heading_padding_horizontal_mobile = section.settings.heading_padding_horizontal_mobile
  assign heading_padding_horizontal = section.settings.heading_padding_horizontal
  assign heading_padding_vertical_mobile = section.settings.heading_padding_vertical_mobile
  assign heading_padding_vertical = section.settings.heading_padding_vertical
  assign heading_radius = section.settings.heading_radius
  assign heading_border_thickness = section.settings.heading_border_thickness
  assign heading_border_style = section.settings.heading_border_style
  assign heading_border_color = section.settings.heading_border_color
  assign heading_bg_color = section.settings.heading_bg_color
  assign heading_pulse = section.settings.heading_pulse
  assign heading_pulse_color = section.settings.heading_pulse_color

   assign heading_justify_align = ""
  if heading_align == "center"
    assign heading_justify_align = "center"
  elsif heading_align == "right"
    assign heading_justify_align = "end"
  else
    assign heading_justify_align = "start"
  endif

  assign heading_justify_align_mobile = ""
  if heading_align_mobile == "center"
    assign heading_justify_align_mobile = "center"
  elsif heading_align_mobile == "right"
    assign heading_justify_align_mobile = "end"
  else
    assign heading_justify_align_mobile = "start"
  endif

  assign body_row_mobile = section.settings.body_row_mobile
  assign body_row = section.settings.body_row
  assign body_gap_mobile = section.settings.body_gap_mobile
  assign body_gap = section.settings.body_gap
  assign body_mt_mobile = section.settings.body_mt_mobile
  assign body_mt = section.settings.body_mt

  assign item_padding_horizontal_mobile = section.settings.item_padding_horizontal_mobile
  assign item_padding_horizontal = section.settings.item_padding_horizontal
  assign item_padding_vertical_mobile = section.settings.item_padding_vertical_mobile
  assign item_padding_vertical = section.settings.item_padding_vertical
  assign item_radius = section.settings.item_radius
  assign item_border_thickness = section.settings.item_border_thickness
  assign item_bg_color = section.settings.item_bg_color
  assign item_bg_hover_color = section.settings.item_bg_hover_color
  assign item_bg_active_color = section.settings.item_bg_active_color
  assign item_border_color = section.settings.item_border_color
  assign item_border_hover_color = section.settings.item_border_hover_color
  assign item_border_active_color = section.settings.item_border_active_color

  assign item_heading_size = section.settings.item_heading_size
  assign item_heading_size_mobile = section.settings.item_heading_size_mobile
  assign item_heading_color = section.settings.item_heading_color
  assign item_heading_custom = section.settings.item_heading_custom
  assign item_heading_font = section.settings.item_heading_font
  assign item_heading_height = section.settings.item_heading_height

  assign price_additional_text = section.settings.price_additional_text
  assign price_size = section.settings.price_size
  assign price_size_mobile = section.settings.price_size_mobile
  assign price_color = section.settings.price_color
  assign price_custom = section.settings.price_custom
  assign price_font = section.settings.price_font
  assign price_height = section.settings.price_height
  assign price_mt = section.settings.price_mt
  assign price_mt_mobile = section.settings.price_mt_mobile

  assign tag_size = section.settings.tag_size
  assign tag_size_mobile = section.settings.tag_size_mobile
  assign tag_color = section.settings.tag_color
  assign tag_bg_color = section.settings.tag_bg_color
  assign tag_custom = section.settings.tag_custom
  assign tag_font = section.settings.tag_font
  assign tag_height = section.settings.tag_height

  assign checkbox_color = section.settings.checkbox_color
  assign checkbox_active_color = section.settings.checkbox_active_color

  assign gift_heading = section.settings.gift_heading
  assign gift_heading_size = section.settings.gift_heading_size
  assign gift_heading_size_mobile = section.settings.gift_heading_size_mobile
  assign gift_heading_color = section.settings.gift_heading_color
  assign gift_heading_custom = section.settings.gift_heading_custom
  assign gift_heading_font = section.settings.gift_heading_font
  assign gift_heading_height = section.settings.gift_heading_height
  assign gift_heading_align = section.settings.gift_heading_align
  assign gift_heading_align_mobile = section.settings.gift_heading_align_mobile
  assign gift_heading_mt_mobile = section.settings.gift_heading_mt_mobile
  assign gift_heading_mt = section.settings.gift_heading_mt

  assign gift_body_row_mobile = section.settings.gift_body_row_mobile
  assign gift_body_row = section.settings.gift_body_row
  assign gift_body_gap_mobile = section.settings.gift_body_gap_mobile
  assign gift_body_gap = section.settings.gift_body_gap
  assign gift_body_mt_mobile = section.settings.gift_body_mt_mobile
  assign gift_body_mt = section.settings.gift_body_mt

  assign gift_item_radius = section.settings.gift_item_radius
  assign gift_item_border_thickness = section.settings.gift_item_border_thickness
  assign gift_item_border_color = section.settings.gift_item_border_color
  assign gift_item_border_style = section.settings.gift_item_border_style

  assign gift_item_icon_size = section.settings.gift_item_icon_size
  assign gift_item_icon_size_mobile = section.settings.gift_item_icon_size_mobile
  assign gift_item_icon_color = section.settings.gift_item_icon_color

  assign gift_item_text_size = section.settings.gift_item_text_size
  assign gift_item_text_size_mobile = section.settings.gift_item_text_size_mobile
  assign gift_item_text_color = section.settings.gift_item_text_color
  assign gift_item_text_custom = section.settings.gift_item_text_custom
  assign gift_item_text_font = section.settings.gift_item_text_font
  assign gift_item_text_height = section.settings.gift_item_text_height

  assign gift_item_heading_size = section.settings.gift_item_heading_size
  assign gift_item_heading_size_mobile = section.settings.gift_item_heading_size_mobile
  assign gift_item_heading_color = section.settings.gift_item_heading_color
  assign gift_item_heading_custom = section.settings.gift_item_heading_custom
  assign gift_item_heading_font = section.settings.gift_item_heading_font
  assign gift_item_heading_height = section.settings.gift_item_heading_height
  assign gift_item_heading_mt_mobile = section.settings.gift_item_heading_mt_mobile
  assign gift_item_heading_mt = section.settings.gift_item_heading_mt

  assign gift_tag = section.settings.gift_tag
  assign gift_tag_size = section.settings.gift_tag_size
  assign gift_tag_size_mobile = section.settings.gift_tag_size_mobile
  assign gift_tag_color = section.settings.gift_tag_color
  assign gift_tag_bg_color = section.settings.gift_tag_bg_color
  assign gift_tag_custom = section.settings.gift_tag_custom
  assign gift_tag_font = section.settings.gift_tag_font
  assign gift_tag_height = section.settings.gift_tag_height

  assign reversed_blocks = section.blocks | reverse

-%}

{%- style -%}

  {{ heading_font | font_face: font_display: 'swap' }}
  {{ item_heading_font | font_face: font_display: 'swap' }}
  {{ price_font | font_face: font_display: 'swap' }}
  {{ tag_font | font_face: font_display: 'swap' }}
  {{ gift_heading_font | font_face: font_display: 'swap' }}
  {{ gift_item_text_font | font_face: font_display: 'swap' }}
  {{ gift_item_heading_font | font_face: font_display: 'swap' }}
  {{ gift_tag_font | font_face: font_display: 'swap' }}
  
  
  .section-{{ section.id }} {
    border-top: solid {{ border_color }} {{ border_thickness }}px;
    border-bottom: solid {{ border_color }} {{ border_thickness }}px;
    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px !important;
    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px !important;
  }
  
  .section-{{ section.id }}-settings {
    margin: 0 auto;
    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;
    padding-left: {{ padding_horizontal_mobile }}rem;
    padding-right: {{ padding_horizontal_mobile }}rem;
    position: relative;
  }

  .bundles-heading-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: {{ heading_justify_align_mobile }};
    padding: {{ heading_padding_vertical_mobile }}px {{ heading_padding_horizontal_mobile }}px;
    background-color: {{ heading_bg_color }};
    border-color: {{ heading_border_color }};
    border-width: {{ heading_border_thickness }}px;
    border-style: {{ heading_border_style }};
    border-radius: {{ heading_radius }}px;
  }

  .bundles-heading-{{ section.id }} * {
    margin: 0;
    font-size: {{ heading_size_mobile }}px;
    color: {{ heading_color }};
    line-height: {{ heading_height }}%;
    text-transform: unset;
    font-weight: 700;
  }

  .bundles-heading-pulse-{{ section.id }} {
    display: block !important;
    width: 10px;
    flex: 0 0 10px;
    height: 10px;
    background-color: {{ heading_pulse_color }};
    border-radius: 50%;
    position: relative;
  }

  .bundles-heading-pulse-{{ section.id }}::after {
    content: '';
    position: absolute;
    top: 0;
    width: 10px;
    height: 10px;
    background: {{ heading_pulse_color }};
    border-radius: 50%;
    animation: grow 1.5s ease-in-out infinite;
  }

  .bundles-heading-pulse-{{ section.id }}::before {
    content: '';
    width: 10px;
    height: 10px;
    background: {{ heading_pulse_color }};
    border-radius: 50%;
    animation: grow 1.5s ease-in-out infinite;
  }

  @keyframes grow {
    0% {
      transform: scale(1, 1);
      opacity: 1;
    }
    100% {
      transform: scale(1.75, 1.75);
      opacity: 0;
    }
  }

  .bundles-body-{{ section.id }} {
    margin-top: {{ body_mt_mobile }}px;
    display: grid;
    grid-template-columns: repeat({{ body_row_mobile }}, 1fr);
    gap: {{ body_gap_mobile }}px;
  }

  .bundles-item-{{ section.id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: {{ item_padding_vertical_mobile }}px {{ item_padding_horizontal_mobile }}px;
    background-color: {{ item_bg_color }};
    border: {{ item_border_thickness }}px solid {{ item_border_color }};
    border-radius: {{ item_radius }}px;
    cursor: pointer;
    text-align: center;
    position: relative;
    transition: all 0.25s ease 0s;
  }

  .bundles-item-{{ section.id }}:hover {
    background-color: {{ item_bg_hover_color }};
    border-color: {{ item_border_hover_color }};
    transition: all 0.25s ease 0s;
  }

  .bundles-item-{{ section.id }}.active {
    background-color: {{ item_bg_active_color }};
    border-color: {{ item_border_active_color }};
    box-shadow: 0 0 0 1px {{ item_border_active_color }};
    transition: all 0.25s ease 0s;
  }

  .bundles-item-{{ section.id }}::before {
    content: "" !important;
    position: absolute !important;
    width: 20px;
    height: 20px;
    box-shadow: 0 0 0 1px {{ checkbox_color }};
    border-radius: 50px !important;
    left: 12px !important;
    top: 50% !important;
    transform: translateY(-50%);
    z-index: 0 !important;
  }

  .bundles-item-{{ section.id }}.active::before {
    background: #ffffff !important;
    border: 7px solid {{ checkbox_active_color }} !important;
    outline: 1px solid {{ checkbox_active_color }};
    box-shadow: none;
  }

  .bundles-item-heading-{{ section.id }} {
    margin: 0;
    font-size: {{ item_heading_size_mobile }}px;
    color: {{ item_heading_color }};
    line-height: {{ item_heading_height }}%;
    text-transform: unset;
    font-weight: 700;
  }

  .bundles-item-price-{{ section.id }} {
    margin: 0;
    margin-top: {{ price_mt_mobile }}px;
    font-size: {{ price_size_mobile }}px;
    color: {{ price_color }};
    line-height: {{ price_height }}%;
    text-transform: unset;
  }

  .bundles-tag-{{ section.id }} {
    position: absolute;
    top: -13px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 95%;
    max-width: max-content;
    background: {{ tag_bg_color }};
    padding: 5px 13px;
    border-radius: 4px;
    margin: 0px;
    font-size: {{ tag_size_mobile }}px;
    color: {{ tag_color }};
    line-height: {{ tag_height }}%;
    text-transform: unset;
    font-weight: 700;
  }

  .bundles-gift-heading-{{ section.id }} {
    margin-top: {{ gift_heading_mt_mobile }}px;
    text-align: {{ gift_heading_align_mobile }};
  }

  .bundles-gift-heading-{{ section.id }} * {
    margin: 0;
    font-size: {{ gift_heading_size_mobile }}px;
    color: {{ gift_heading_color }};
    line-height: {{ gift_heading_height }}%;
    text-transform: unset;
  }

  .bundles-gift-body-{{ section.id }} {
    margin-top: {{ gift_body_mt_mobile }}px;
    display: grid;
    grid-template-columns: repeat({{ gift_body_row_mobile }}, 1fr);
    gap: {{ gift_body_gap_mobile }}px;
  }

  .bundles-gift-card-{{ section.id }} {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 8px;
    padding: 10px;
    border-radius: {{ gift_item_radius }}px;
    border-width: {{ gift_item_border_thickness }}px;
    border-style: {{ gift_item_border_style }};
    border-color: {{ gift_item_border_color }};
    aspect-ratio: 9.6/12;
    box-sizing: border-box;
  }

  .bundles-gift-lock-icon-{{ section.id }} {
    width: {{ gift_item_icon_size_mobile }}px;
    height: {{ gift_item_icon_size_mobile }}px;
    color: {{ gift_item_icon_color }};
  }

  .bundles-gift-lock-icon-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .bundles-gift-lock-text-{{ section.id }} {
    margin: 0;
    font-size: {{ gift_item_text_size_mobile }}px;
    color: {{ gift_item_text_color }};
    line-height: {{ gift_item_text_height }}%;
    text-transform: unset;
  }

  .bundles-gift-item-heading-{{ section.id }} {
    margin: 0;
    margin-top: {{ gift_item_heading_mt_mobile }}px;
    font-size: {{ gift_item_heading_size_mobile }}px;
    color: {{ gift_item_heading_color }};
    line-height: {{ gift_item_heading_height }}%;
    text-transform: unset;
    text-align: center;
    font-weight: 700;
  }

  .bundles-gift-tag-{{ section.id }} {
    position: absolute;
    top: -13px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    background: {{ gift_tag_bg_color }};
    border-radius: 4px;
    padding: 5px 13px;
    margin: 0px;
    font-size: {{ gift_tag_size_mobile }}px;
    color: {{ gift_tag_color }};
    line-height: {{ gift_tag_height }}%;
    text-transform: unset;
    font-weight: 700;
  }

  .bundles-gift-tag-{{ section.id }} span {
    text-decoration: line-through;
    padding-left: 5px;
  }

  .bundles-gift-image-{{ section.id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    opacity: 0;
    pointer-events: none;
    transition: all 0.25s ease 0s;
    border-radius: {{ gift_item_radius }}px;
    overflow: hidden;
  }

  .bundles-gift-item-{{ section.id }}.active .bundles-gift-image-{{ section.id }} {
    opacity: 1;
    pointer-events: all;
    transition: all 0.25s ease 0s;
  }

  .bundles-gift-image-{{ section.id }} img,
  .bundles-gift-image-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .bundles-gift-image-{{ section.id }} svg {
    background-color: #AEAEAE;
  }
  
  @media(min-width: 1024px) {

    .section-{{ section.id }} {
      margin-top: {{ margin_top }}px !important;
      margin-bottom: {{ margin_bottom }}px !important;
    }
    
    .section-{{ section.id }}-settings {
      padding: 0 5rem;
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
      padding-left: {{ padding_horizontal }}rem;
      padding-right: {{ padding_horizontal }}rem;
    }

    .bundles-heading-{{ section.id }} {
      justify-content: {{ heading_justify_align }};
      padding: {{ heading_padding_vertical }}px {{ heading_padding_horizontal }}px;
    }

    .bundles-heading-{{ section.id }} * {
      font-size: {{ heading_size }}px;
    }

    .bundles-body-{{ section.id }} {
      margin-top: {{ body_mt }}px;
      grid-template-columns: repeat({{ body_row }}, 1fr);
      gap: {{ body_gap }}px;
    }

    .bundles-item-{{ section.id }} {
      padding: {{ item_padding_vertical }}px {{ item_padding_horizontal }}px;
    }

    .bundles-item-heading-{{ section.id }} {
      font-size: {{ item_heading_size }}px;
    }

    .bundles-item-price-{{ section.id }} {
      margin-top: {{ price_mt }}px;
      font-size: {{ price_size }}px;
    }

    .bundles-tag-{{ section.id }} {
      font-size: {{ tag_size }}px;
    }

    .bundles-gift-heading-{{ section.id }} {
      margin-top: {{ gift_heading_mt }}px;
      text-align: {{ gift_heading_align }};
    }
  
    .bundles-gift-heading-{{ section.id }} * {
      font-size: {{ gift_heading_size }}px;
    }

    .bundles-gift-body-{{ section.id }} {
      margin-top: {{ gift_body_mt }}px;
      grid-template-columns: repeat({{ gift_body_row }}, 1fr);
      gap: {{ gift_body_gap }}px;
    }

    .bundles-gift-lock-icon-{{ section.id }} {
      width: {{ gift_item_icon_size }}px;
      height: {{ gift_item_icon_size }}px;
    }

    .bundles-gift-lock-text-{{ section.id }} {
      font-size: {{ gift_item_text_size }}px;
    }

    .bundles-gift-item-heading-{{ section.id }} {
      margin-top: {{ gift_item_heading_mt }}px;
      font-size: {{ gift_item_heading_size }}px;
    }

    .bundles-gift-tag-{{ section.id }} {
      font-size: {{ gift_tag_size }}px;
    }

  }
  
{%- endstyle -%}

{% if heading_custom %}
  <style>
    .bundles-heading-{{ section.id }} *{
      font-family: {{ heading_font.family }}, {{ heading_font.fallback_families }};
      font-weight: {{ heading_font.weight }};
      font-style: {{ heading_font.style }};
    }
  </style>
{% endif %}

{% if item_heading_custom %}
  <style>
    .bundles-item-heading-{{ section.id }} {
      font-family: {{ item_heading_font.family }}, {{ item_heading_font.fallback_families }};
      font-weight: {{ item_heading_font.weight }};
      font-style: {{ item_heading_font.style }};
    }
  </style>
{% endif %}

{% if price_custom %}
  <style>
    .bundles-item-price-{{ section.id }} {
      font-family: {{ price_font.family }}, {{ price_font.fallback_families }};
      font-weight: {{ price_font.weight }};
      font-style: {{ price_font.style }};
    }
  </style>
{% endif %}

{% if tag_custom %}
  <style>
    .bundles-tag-{{ section.id }} {
      font-family: {{ tag_font.family }}, {{ tag_font.fallback_families }};
      font-weight: {{ tag_font.weight }};
      font-style: {{ tag_font.style }};
    }
  </style>
{% endif %}

{% if gift_heading_custom %}
  <style>
    .bundles-gift-heading-{{ section.id }} * {
      font-family: {{ gift_heading_font.family }}, {{ gift_heading_font.fallback_families }};
      font-weight: {{ gift_heading_font.weight }};
      font-style: {{ gift_heading_font.style }};
    }
  </style>
{% endif %}

{% if gift_item_text_custom %}
  <style>
    .bundles-gift-lock-text-{{ section.id }} {
      font-family: {{ gift_item_text_font.family }}, {{ gift_item_text_font.fallback_families }};
      font-weight: {{ gift_item_text_font.weight }};
      font-style: {{ gift_item_text_font.style }};
    }
  </style>
{% endif %}

{% if gift_item_heading_custom %}
  <style>
    .bundles-gift-item-heading-{{ section.id }} {
      font-family: {{ gift_item_heading_font.family }}, {{ gift_item_heading_font.fallback_families }};
      font-weight: {{ gift_item_heading_font.weight }};
      font-style: {{ gift_item_heading_font.style }};
    }
  </style>
{% endif %}

{% if gift_tag_custom %}
  <style>
    .bundles-gift-tag-{{ section.id }} {
      font-family: {{ gift_tag_font.family }}, {{ gift_tag_font.fallback_families }};
      font-weight: {{ gift_tag_font.weight }};
      font-style: {{ gift_tag_font.style }};
    }
  </style>
{% endif %}

<script>
  (function () {
    function moreLoadProductForm() {
      var productForm = document.querySelector('#ss-product-bundles');
      if (!productForm){
        var productForm = document.querySelector('{% if bundles_position == "below_title" or bundles_position == "above_title" %}.product__title{% elsif bundles_position == "below_description" or bundles_position == "above_description" %}.product__description{% else %}.button--add-to-cart, .product .product-form, .product-single__add-to-cart, .shopify-payment-button, .shopify-payment-button__button, .ProductForm__BuyButtons, .add-to-cart{% endif %}');
        if (!productForm) return;
        }
        const templateContent = document.querySelector(
          '#ss-product-bundles-{{ section.id }}'
        ).content;

        productForm.insertAdjacentElement(
          '{% if bundles_position == "below_buy" or bundles_position == "below_title" or bundles_position == "below_description" %}afterend{% else %}beforebegin{% endif %}',
          templateContent.firstElementChild
        );
      
    }
    window.addEventListener('DOMContentLoaded', moreLoadProductForm);
  })();
</script>

<template id="ss-product-bundles-{{ section.id }}">
  <div class="section-{{ section.id }} bundles-{{ section.id }}" style="background-color:{{ background_color }}; background-image: {{ background_gradient }};">
    <div class="section-{{ section.id }}-settings">
      {% if heading != blank %}
        <div class="bundles-heading-{{ section.id }}">
          {% if heading_pulse %}
            <div class="bundles-heading-pulse-{{ section.id }}"></div>
          {% endif %}
          <h2>{{ heading }}</h2>
        </div>
      {% endif %}

      <div class="bundles-body-{{ section.id }}">
        {% for block in section.blocks %}
          <div class="bundles-item-{{ section.id }} {% if forloop.first %}active{% endif %}" data-count="{{ block.settings.count_product }}" id="{{ block.id }}">
            {% if block.settings.tag != blank %}
              <p class="bundles-tag-{{ section.id }}">{{ block.settings.tag }}</p>
            {% endif %}

            {% if block.settings.heading != blank %}
              <p class="bundles-item-heading-{{ section.id }}">{{ block.settings.heading }}</p>
            {% endif %}

            {% assign original_price = product.price %}
            {% assign discount_size = block.settings.discount_size | plus: 0  %}
            
            {% assign discount_amount = original_price | times: discount_size | divided_by: 100 %}  
            {% assign final_price = original_price | minus: discount_amount %}
            
            <p class="bundles-item-price-{{ section.id }}">{{ final_price | money }}{{ price_additional_text }}</p>
          </div>
        {% endfor %}
      </div>

      {% if gift_heading != blank %}
        <div class="bundles-gift-heading-{{ section.id }}">
          {{ gift_heading }}
        </div>
      {% endif %}

      <div class="bundles-gift-body-{{ section.id }}">
        {% for block in reversed_blocks %}
          {% if block.settings.gift_product != blank %}
            <div class="bundles-gift-item-{{ section.id }} active" data-id="{{ block.id }}" data-product-id="{{ block.settings.gift_product.selected_or_first_available_variant.id }}">
              <div class="bundles-gift-card-{{ section.id }}">
                <p class="bundles-gift-tag-{{ section.id }}">{{ gift_tag }}<span>{{ block.settings.main_price }}</span></p>
                <div class="bundles-gift-lock-icon-{{ section.id }}">
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18.6 18.6" style="enable-background:new 0 0 18.6 18.6;" xml:space="preserve" width="100%" height="100%">
                    <path fill="CurrentColor" d="M14.6,11c0,0.8,0,1.6,0,2.4c0,0.8-0.3,1.4-0.8,2c-0.8,0.9-1.9,1.4-3.1,1.6c-1.1,0.2-2.3,0.2-3.4-0.1
                      c-0.9-0.3-1.8-0.7-2.5-1.4c-0.6-0.6-1-1.4-0.9-2.3c0-1.5,0-3,0-4.4c0-0.9,0.4-1.5,1.2-1.9c0.1,0,0.1-0.1,0.1-0.2c0-1,0.2-2,0.7-2.9
                      c0.5-0.9,1.1-1.6,2-2c1.2-0.6,2.4-0.4,3.5,0.5c0.8,0.6,1.2,1.4,1.6,2.3c0.3,0.7,0.4,1.4,0.4,2.2c0,0.1,0,0.1,0.1,0.2
                      c0.8,0.4,1.2,1,1.2,1.8C14.6,9.5,14.6,10.3,14.6,11C14.6,11,14.6,11,14.6,11z M9.3,6.7C9.3,6.7,9.3,6.7,9.3,6.7c0.7,0,1.4,0,2,0
                      c0.4,0,0.4,0,0.3-0.4c-0.1-0.8-0.3-1.6-0.8-2.2c-0.5-0.7-1.2-0.9-2-0.8c-0.6,0.1-1,0.5-1.3,1C7.1,5,6.9,5.8,6.9,6.6
                      c0,0.1,0,0.2,0.1,0.2C7.8,6.7,8.5,6.7,9.3,6.7z M9.3,13.8C9.3,13.8,9.3,13.8,9.3,13.8c0.2,0,0.4,0,0.7,0c0.1,0,0.2,0,0.2-0.2
                      c0-0.3,0-0.7,0-1c0-0.1,0-0.2,0.1-0.3c0.9-0.7,0.7-2.2-0.4-2.6c-0.7-0.3-1.5,0-1.9,0.6c-0.4,0.6-0.2,1.5,0.4,1.9
                      c0.1,0.1,0.1,0.1,0.1,0.2c0,0.4,0,0.7,0,1.1c0,0.1,0,0.2,0.1,0.1C8.8,13.8,9,13.8,9.3,13.8z"></path>
                  </svg>
                </div>
                <p class="bundles-gift-lock-text-{{ section.id }}">{{ block.settings.heading }}</p>
    
                <div class="bundles-gift-image-{{ section.id }}">
                  {% if block.settings.gift_image != blank %}
                    <img src="{{ block.settings.gift_image | image_url }}" alt="{{ block.settings.gift_image.alt }}" {% if lazy %}loading="lazy"{% endif %}>
                  {% elsif block.settings.gift_product.featured_image != blank %}
                    <img src="{{ block.settings.gift_product.featured_image | image_url }}" alt="{{ block.settings.gift_product.featured_image.alt }}" {% if lazy %}loading="lazy"{% endif %}>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag }}
                  {% endif %}
                </div>
              </div>
  
              <p class="bundles-gift-item-heading-{{ section.id }}">
                {% if block.settings.gift_heading != blank %}
                  {{ block.settings.gift_heading }}
                {% else %}
                  {{ block.settings.product.title }}
                {% endif %}
              </p>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</template>

<script>
  function initProductBundles() {
    setTimeout(() => {

      let forms = document.querySelectorAll('form[action="/cart/add"][enctype="multipart/form-data"]');
      let bundles = document.querySelectorAll('.bundles-item-{{ section.id }}');
      let gifts = document.querySelectorAll('.bundles-gift-item-{{ section.id }}');

      let activeBundle = document.querySelector('.bundles-item-{{ section.id }}.active');
      let activeGifts = document.querySelectorAll('.bundles-gift-item-{{ section.id }}.active');

      if(activeBundle) {
        let count = activeBundle.getAttribute('data-count');

        var quantityInput = document.createElement('input');
        quantityInput.type = 'hidden';
        quantityInput.name = 'quantity';
        quantityInput.value = `${count}`;
        quantityInput.id = '{{ product.selected_or_first_available_variant.id }}';

        if(forms) {
          forms.forEach(el => {
            el.appendChild(quantityInput);
          })
        }
      }

      if(activeGifts) {
        activeGifts.forEach((el, index) => {
          var quantityInput = document.createElement('input');
          quantityInput.type = 'hidden';
          quantityInput.name = `items[${index}][quantity]`;
          quantityInput.value = '1';
          quantityInput.id = el.getAttribute('data-product-id');

          var productIdInput = document.createElement('input');
          productIdInput.type = 'hidden';
          productIdInput.name = `items[${index}][id]`;
          productIdInput.id = el.getAttribute('data-id');
          productIdInput.value = el.getAttribute('data-product-id');

          if(forms) {
            forms.forEach(element => {
              element.appendChild(quantityInput);
              element.appendChild(productIdInput);
            })
          }
        })
      }
      
      if(bundles) {
        bundles.forEach(el => {
          el.addEventListener('click', () => {

            let count = el.getAttribute('data-count');

            bundles.forEach(element => {
              element.classList.remove('active');
            })
            el.classList.add('active');

            if (gifts) {  
              gifts.forEach(element => {  
                element.classList.remove('active');  
              });  
            
              let found = false;
            
              gifts.forEach((element) => {  
                let dataId = element.getAttribute("data-id");  
            
                if (!found) {  
                  element.classList.add('active');
                  
                  if (dataId == el.id) {  
                    found = true;
                  }  
                }  
              });  
            }

            if(forms) {
              forms.forEach(el => {
                let inputs = el.querySelectorAll('input[name^="items["]');  
                inputs.forEach(input => {  
                    input.remove();  
                });

                let quantityInput = el.querySelector('input[name="quantity"');
                if(quantityInput) {
                  quantityInput.value = count;
                }
              })
            }

            let activeGifts = document.querySelectorAll('.bundles-gift-item-{{ section.id }}.active');

            if(activeGifts) {
              activeGifts.forEach((el, index) => {
                var quantityInput = document.createElement('input');
                quantityInput.type = 'hidden';
                quantityInput.name = `items[${index}][quantity]`;
                quantityInput.value = '1';
                quantityInput.id = el.getAttribute('data-product-id');
      
                var productIdInput = document.createElement('input');
                productIdInput.type = 'hidden';
                productIdInput.name = `items[${index}][id]`;
                productIdInput.id = el.getAttribute('data-id');
                productIdInput.value = el.getAttribute('data-product-id');
      
                if(forms) {
                  forms.forEach(element => {
                    element.appendChild(quantityInput);
                    element.appendChild(productIdInput);
                  })
                }
              })
            }
          })
        })
      }
      
    }, 400)
  }
  
  document.addEventListener('DOMContentLoaded', initProductBundles);
  
  if (Shopify.designMode) {
     document.addEventListener('shopify:section:unload', initProductBundles);
     document.addEventListener('shopify:section:load', initProductBundles);
  }
</script>

{% schema %}
  {
    "name": "SS - Product bundles",
    "settings": [
      {
        "type": "header",
        "content": "⚠️ Save settings to view updates",
        "info":"Learn how to add snippet sections with [this tutorial](https://section-store.helpscoutdocs.com/article/10-adding-product-page-snippets)"
      },
      {
        "type": "paragraph",
        "content": "Learn how to include dynamic content per product with [this tutorial](https://section-store.helpscoutdocs.com/article/17-dynamic-content-settings-per-product)"
      },
      {
        "type": "header",
        "content": "Custom placement",
        "info": "Copy this code: <div id='ss-product-bundles'></div> - Click 'Add block' -> Custom Liquid/HTML -> Paste."
      },
      {
        "type": "select",
        "id": "bundles_position",
        "label": "Position",
        "default": "above_buy",
        "options": [
          {
            "label": "Above buy buttons",
            "value": "above_buy"
          },
          {
            "label": "Below buy buttons",
            "value": "below_buy"
          },
          {
            "label": "Above product title",
            "value": "above_title"
          },
          {
            "label": "Below product title",
            "value": "below_title"
          },
          {
            "label": "Above product description",
            "value": "above_description"
          },
          {
            "label": "Below product description",
            "value": "below_description"
          }
        ]
      },
      {
        "type": "header",
        "content": "Offer settings"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Text",
        "default": "Order by Sep. 12th for guaranteed FREE Gifts"
      },
      {
        "type": "checkbox",
        "id": "heading_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "heading_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "heading_size",
        "min": 0,
        "max": 72,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 15
      },
      {
        "type": "range",
        "id": "heading_size_mobile",
        "min": 0,
        "max": 72,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 13
      },
      {
        "type": "range",
        "id": "heading_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 130
      },
      {
        "type": "text_alignment",
        "id": "heading_align",
        "label": "Alignment",
        "default": "center"
      },
      {
        "type": "text_alignment",
        "id": "heading_align_mobile",
        "label": "Alignment - mobile",
        "default": "center"
      },
      {
         "type": "range",
         "id": "heading_padding_horizontal",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Padding horizontal",
         "default": 24
      },
      {
         "type": "range",
         "id": "heading_padding_horizontal_mobile",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Padding horizontal - mobile",
         "default": 10
      },
      {
        "type": "range",
        "id": "heading_padding_vertical",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding vertical",
        "default": 14
      },
      {
        "type": "range",
        "id": "heading_padding_vertical_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding vertical - mobile",
        "default": 10
      },
      {
         "type": "range",
         "id": "heading_radius",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Roundness",
         "default": 12
      },
      {
         "type": "range",
         "id": "heading_border_thickness",
         "min": 0,
         "max": 10,
         "step": 0.5,
         "unit": "px",
         "label": "Border thickness",
         "default": 3
      },
      {
        "type": "select",
        "id": "heading_border_style",
        "label": "Border style",
        "default": "dotted",
        "options": [
          {
            "label": "Solid",
            "value": "solid"
          },
          {
            "label": "Dotted",
            "value": "dotted"
          },
          {
            "label": "Dashed",
            "value": "dashed"
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "heading_pulse",
        "label": "Use pulse",
        "default": true
      },
      {
        "type": "header",
        "content": "Bundles layout settings"
      },
      {
         "type": "range",
         "id": "body_row",
         "min": 1,
         "max": 3,
         "step": 1,
         "label": "Bundles per row",
         "default": 2
      },
      {
         "type": "range",
         "id": "body_row_mobile",
         "min": 1,
         "max": 3,
         "step": 1,
         "label": "Bundles per row - mobile",
         "default": 2
      },
      {
         "type": "range",
         "id": "body_gap",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Gap",
         "default": 10
      },
      {
         "type": "range",
         "id": "body_gap_mobile",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Gap - mobile",
         "default": 8
      },
      {
         "type": "range",
         "id": "body_mt",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Margin top",
         "default": 32
      },
      {
         "type": "range",
         "id": "body_mt_mobile",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Margin top - mobile",
         "default": 18
      },
      {
        "type": "header",
        "content": "Bundle variant settings"
      },
      {
         "type": "range",
         "id": "item_padding_horizontal",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Padding horizontal",
         "default": 36
      },
      {
         "type": "range",
         "id": "item_padding_horizontal_mobile",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Padding horizontal - mobile",
         "default": 36
      },
      {
        "type": "range",
        "id": "item_padding_vertical",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding vertical",
        "default": 12
      },
      {
        "type": "range",
        "id": "item_padding_vertical_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding vertical - mobile",
        "default": 12
      },
      {
         "type": "range",
         "id": "item_radius",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Roundness",
         "default": 6
      },
      {
         "type": "range",
         "id": "item_border_thickness",
         "min": 0,
         "max": 10,
         "step": 0.5,
         "unit": "px",
         "label": "Border thickness",
         "default": 1.5
      },
      {
        "type": "header",
        "content": "Variant heading settings"
      },
      {
        "type": "checkbox",
        "id": "item_heading_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "item_heading_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "item_heading_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 20
      },
      {
        "type": "range",
        "id": "item_heading_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 16
      },
      {
        "type": "range",
        "id": "item_heading_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 130
      },
      {
        "type": "header",
        "content": "Variant price settings"
      },
      {
        "type": "text",
        "id": "price_additional_text",
        "label": "Additional text",
        "default": "/each"
      },
      {
        "type": "checkbox",
        "id": "price_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "price_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "price_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 14
      },
      {
        "type": "range",
        "id": "price_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 13
      },
      {
        "type": "range",
        "id": "price_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 130
      },
      {
         "type": "range",
         "id": "price_mt",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Margin top",
         "default": 4
      },
      {
         "type": "range",
         "id": "price_mt_mobile",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Margin top - mobile",
         "default": 4
      },
      {
        "type": "header",
        "content": "Variant tag settings"
      },
      {
        "type": "checkbox",
        "id": "tag_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "tag_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "tag_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 11
      },
      {
        "type": "range",
        "id": "tag_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 9
      },
      {
        "type": "range",
        "id": "tag_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 100
      },
      {
        "type": "header",
        "content": "Gifts heading settings"
      },
      {
        "type": "richtext",
        "id": "gift_heading",
        "label": "Text",
        "default": "<p><strong>EXCLUSIVE SALE!</strong> FREE Gifts With Your First Order</p>"
      },
      {
        "type": "checkbox",
        "id": "gift_heading_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "gift_heading_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "gift_heading_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 13
      },
      {
        "type": "range",
        "id": "gift_heading_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 11
      },
      {
        "type": "range",
        "id": "gift_heading_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 150
      },
      {
        "type": "range",
        "id": "gift_heading_mt",
        "min": 0,
        "max": 50,
        "step": 2,
        "unit": "px",
        "label": "Margin top",
        "default": 28
      },
      {
        "type": "range",
        "id": "gift_heading_mt_mobile",
        "min": 0,
        "max": 50,
        "step": 2,
        "unit": "px",
        "label": "Margin top - mobile",
        "default": 16
      },
      {
        "type": "text_alignment",
        "id": "gift_heading_align",
        "label": "Alignment",
        "default": "center"
      },
      {
        "type": "text_alignment",
        "id": "gift_heading_align_mobile",
        "label": "Alignment - mobile",
        "default": "center"
      },
      {
        "type": "header",
        "content": "Gifts layout settings"
      },
      {
         "type": "range",
         "id": "gift_body_row",
         "min": 1,
         "max": 5,
         "step": 1,
         "label": "Gifts per row",
         "default": 4
      },
      {
         "type": "range",
         "id": "gift_body_row_mobile",
         "min": 1,
         "max": 5,
         "step": 1,
         "label": "Gifts per row - mobile",
         "default": 4
      },
      {
         "type": "range",
         "id": "gift_body_gap",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Gap",
         "default": 6
      },
      {
         "type": "range",
         "id": "gift_body_gap_mobile",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Gap - mobile",
         "default": 6
      },
      {
         "type": "range",
         "id": "gift_body_mt",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Margin top",
         "default": 22
      },
      {
         "type": "range",
         "id": "gift_body_mt_mobile",
         "min": 0,
         "max": 50,
         "step": 2,
         "unit": "px",
         "label": "Margin top - mobile",
         "default": 18
      },
      {
        "type": "header",
        "content": "Gift settings"
      },
      {
         "type": "range",
         "id": "gift_item_radius",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Roundness",
         "default": 8
      },
      {
         "type": "range",
         "id": "gift_item_border_thickness",
         "min": 0,
         "max": 10,
         "step": 0.5,
         "unit": "px",
         "label": "Border thickness",
         "default": 1
      },
      {
        "type": "select",
        "id": "gift_item_border_style",
        "label": "Border style",
        "default": "dashed",
        "options": [
          {
            "label": "Solid",
            "value": "solid"
          },
          {
            "label": "Dotted",
            "value": "dotted"
          },
          {
            "label": "Dashed",
            "value": "dashed"
          }
        ]
      },
      {
        "type": "header",
        "content": "Gift locked icon settings"
      },
      {
         "type": "range",
         "id": "gift_item_icon_size",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Size",
         "default": 32
      },
      {
         "type": "range",
         "id": "gift_item_icon_size_mobile",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Size - mobile",
         "default": 30
      },
      {
        "type": "header",
        "content": "Gift locked text settings"
      },
      {
        "type": "checkbox",
        "id": "gift_item_text_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "gift_item_text_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "gift_item_text_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 11
      },
      {
        "type": "range",
        "id": "gift_item_text_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 11
      },
      {
        "type": "range",
        "id": "gift_item_text_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 130
      },
      {
        "type": "header",
        "content": "Gift heading settings"
      },
      {
        "type": "checkbox",
        "id": "gift_item_heading_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "gift_item_heading_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "gift_item_heading_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 14
      },
      {
        "type": "range",
        "id": "gift_item_heading_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 11
      },
      {
        "type": "range",
        "id": "gift_item_heading_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 130
      },
      {
        "type": "range",
        "id": "gift_item_heading_mt",
        "min": 0,
        "max": 50,
        "step": 2,
        "unit": "px",
        "label": "Margin top",
        "default": 10
      },
      {
        "type": "range",
        "id": "gift_item_heading_mt_mobile",
        "min": 0,
        "max": 50,
        "step": 2,
        "unit": "px",
        "label": "Margin top - mobile",
        "default": 10
      },
      {
        "type": "header",
        "content": "Gift tag settings"
      },
      {
        "type": "text",
        "id": "gift_tag",
        "label": "Text",
        "default": "FREE"
      },
      {
        "type": "checkbox",
        "id": "gift_tag_custom",
        "label": "Use custom font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "gift_tag_font",
        "label": "Font family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "gift_tag_size",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size",
        "default": 11
      },
      {
        "type": "range",
        "id": "gift_tag_size_mobile",
        "min": 0,
        "max": 40,
        "step": 1,
        "unit": "px",
        "label": "Font size - mobile",
        "default": 10
      },
      {
        "type": "range",
        "id": "gift_tag_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Line height",
        "default": 100
      },
      {
        "type": "header",
        "content": "Offer colors"
      },
      {
        "type": "color",
        "label": "Text",
        "id": "heading_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Pulse",
        "id": "heading_pulse_color",
        "default": "#F86C84"
      },
      {
        "type": "color",
        "label": "Background",
        "id": "heading_bg_color",
        "default": "#FFF4F3"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "heading_border_color",
        "default": "#F86C84"
      },
      {
        "type": "header",
        "content": "Bundle variant colors"
      },
      {
        "type": "color",
        "label": "Heading",
        "id": "item_heading_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Price",
        "id": "price_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Background",
        "id": "item_bg_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Background hover",
        "id": "item_bg_hover_color",
        "default": "#FFF4F3"
      },
      {
        "type": "color",
        "label": "Background active",
        "id": "item_bg_active_color",
        "default": "#FFF4F3"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "item_border_color",
        "default": "#818181"
      },
      {
        "type": "color",
        "label": "Border hover",
        "id": "item_border_hover_color",
        "default": "#F86C84"
      },
      {
        "type": "color",
        "label": "Border active",
        "id": "item_border_active_color",
        "default": "#F86C84"
      },
      {
        "type": "color",
        "label": "Checkbox",
        "id": "checkbox_color",
        "default": "#777777"
      },
      {
        "type": "color",
        "label": "Checkbox active",
        "id": "checkbox_active_color",
        "default": "#F86C84"
      },
      {
        "type": "header",
        "content": "Variant tag colors"
      },
      {
        "type": "color",
        "label": "Text",
        "id": "tag_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Background",
        "id": "tag_bg_color",
        "default": "#ff6c84"
      },
      {
        "type": "header",
        "content": "Gift colors"
      },
      {
        "type": "color",
        "label": "Gifts heading",
        "id": "gift_heading_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Gift heading",
        "id": "gift_item_heading_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Gift locked icon",
        "id": "gift_item_icon_color",
        "default": "#777777"
      },
      {
        "type": "color",
        "label": "Gift locked text",
        "id": "gift_item_text_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "gift_item_border_color",
        "default": "#000000"
      },
      {
        "type": "header",
        "content": "Gift tag colors"
      },
      {
        "type": "color",
        "label": "Text",
        "id": "gift_tag_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Background",
        "id": "gift_tag_bg_color",
        "default": "#FFD6DD"
      },
      {
        "type": "header",
        "content": "Section colors"
      },
      {
        "type": "color",
        "label": "Section background",
        "id": "background_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color_background",
        "id": "background_gradient",
        "label": "Section background gradient"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "border_color",
        "default": "#000000"
      },
      {
        "type": "header",
        "content": "Section margin (outside)"
      },
      {
        "type": "range",
        "id": "margin_top",
        "min": -20,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Margin top",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_bottom",
        "min": -20,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Margin bottom",
        "default": 0
      },
      {
        "type": "header",
        "content": "Section padding (inside)"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Padding top",
        "default": 0
      },
      {
         "type": "range",
         "id": "padding_bottom",
         "min": 0,
         "max": 100,
         "step": 4,
         "unit": "px",
         "label": "Padding bottom",
         "default": 0
      },
      {
        "type": "range",
        "id": "padding_horizontal",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "rem",
        "label": "Padding sides",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding_horizontal_mobile",
        "min": 0,
        "max": 15,
        "step": 0.5,
        "unit": "rem",
        "label": "Padding sides mobile",
        "default": 0
      },
      {
        "type": "header",
        "content": "Section settings"
      },
      {
        "type": "range",
        "id": "border_thickness",
        "min": 0,
        "max": 10,
        "step": 0.5,
        "unit": "px",
        "label": "Border thickness",
        "default": 0
      },
      {
        "type": "checkbox",
        "id": "lazy",
        "label": "Lazy load",
        "info": "Lazy load images for speed optimisation",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "bundle",
        "name":" Bundle",
        "settings": [
          {
            "type": "header",
            "content": "Main bundle settings"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Bundle"
          },
          {
            "type": "text",
            "id": "tag",
            "label": "Tag"
          },
          {
            "type": "text",
            "id": "discount_size",
            "label": "Discount size",
            "info": "Enter a numerical value as a percentage"
          },
          {
            "type": "text",
            "id": "count_product",
            "label": "Count product",
            "default": "1"
          },
          {
            "type": "header",
            "content": "Gift settings"
          },
          {
            "type": "product",
            "id": "gift_product",
            "label": "Product"
          },
          {
            "type": "text",
            "id": "gift_heading",
            "label": "Heading",
            "default": "Free shipping"
          },
          {
            "type": "text",
            "id": "main_price",
            "label": "Main price",
            "default": "$6"
          },
          {
            "type": "image_picker",
            "id": "gift_image",
            "label": "Product image"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "SS - Product bundles",
        "blocks": [
          {
            "type": "bundle",
            "settings": {
              "heading": "4 Bottles",
              "tag": "BEST DEAL",
              "discount_size": "20",
              "count_product": "4",
              "gift_heading": "Gift",
              "main_price": "$25"
            }
          },
          {
            "type": "bundle",
            "settings": {
              "heading": "3 Bottles",
              "discount_size": "15",
              "count_product": "3",
              "gift_heading": "Gift",
              "main_price": "$19"
            }
          },
          {
            "type": "bundle",
            "settings": {
              "heading": "2 Bottles",
              "discount_size": "10",
              "count_product": "2",
              "main_price": "$6"
            }
          },
          {
            "type": "bundle",
            "settings": {
              "heading": "1 Bottle",
              "discount_size": "5",
              "count_product": "1",
              "main_price": "$10"
            }
          }
        ]
      }
    ]
  }
{% endschema %}