{% comment %}
---------------------------------------------------------
Copyright ¬© 2023 Section Store. All rights reserved.
Unauthorized copying, modification, distribution, or use
of this code or any portion of it, is strictly prohibited.
Violators will be prosecuted to the fullest extent of the law.
For inquiries or permissions, contact daniel@section.store
---------------------------------------------------------
{% endcomment %}

{%- liquid 
  assign padding_horizontal = section.settings.padding_horizontal
  assign padding_horizontal_mobile = section.settings.padding_horizontal_mobile
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign border_color = section.settings.border_color
  assign border_thickness = section.settings.border_thickness
  assign margin_top = section.settings.margin_top
  assign margin_bottom = section.settings.margin_bottom
  assign margin_horizontal_mobile = section.settings.margin_horizontal_mobile
  assign margin_horizontal = section.settings.margin_horizontal
  assign background_color = section.settings.background_color
  assign background_gradient = section.settings.background_gradient
  assign full_width = section.settings.full_width
  assign content_width = section.settings.content_width
  assign lazy = section.settings.lazy
  assign section_radius = section.settings.section_radius

  assign scrolling_velocity = section.settings.scrolling_velocity
  assign scrolling_velocity_mobile = section.settings.scrolling_velocity_mobile

  assign reverse_direction = section.settings.reverse_direction
  assign pause_hover = section.settings.pause_hover
  
  assign text_custom = section.settings.text_custom
  assign text_font = section.settings.text_font
  assign text_size = section.settings.text_size
  assign text_size_mobile = section.settings.text_size_mobile
  assign text_height = section.settings.text_height
  assign text_color = section.settings.text_color
  assign text_mr = section.settings.text_mr
  assign text_mr_mobile = section.settings.text_mr_mobile

  assign image_radius = section.settings.image_radius
  assign image_border_thickness = section.settings.image_border_thickness
  assign image_border_color = section.settings.image_border_color
  assign image_mr = section.settings.image_mr
  assign image_mr_mobile = section.settings.image_mr_mobile
  
-%}

{%- style -%}
  
  {{ text_font | font_face: font_display: 'swap' }}
  
  .section-{{ section.id }} {
    border-top: solid {{ border_color }} {{ border_thickness }}px;
    border-bottom: solid {{ border_color }} {{ border_thickness }}px;
    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px;
    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px;
    margin-left: {{ margin_horizontal_mobile }}rem;
    margin-right: {{ margin_horizontal_mobile }}rem;
    border-radius: {{ section_radius | times: 0.6 | round: 0 }}px;
    overflow: hidden;
  }
  
  .section-{{ section.id }}-settings {
    margin: 0 auto;
    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;
    padding-left: {{ padding_horizontal_mobile }}rem;
    padding-right: {{ padding_horizontal_mobile }}rem;
  }

  .scrolling-scrolling-wrap-{{ section.id }} {
    position: relative;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    overflow: hidden;
    -ms-flex-wrap: nowrap;
    flex-wrap: nowrap;
    background-attachment: scroll !important;
  }

  .scrolling-scrolling-list-{{ section.id }} {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    align-items: center;
    white-space: nowrap;
    background-attachment: scroll !important;
    -webkit-animation: ticker{{ section.id | replace: '-', '' }} {{ scrolling_velocity_mobile }}s infinite linear;
    animation: ticker{{ section.id | replace: '-', '' }} {{ scrolling_velocity_mobile }}s infinite linear;
    flex-shrink: 0;
  }

  .scrolling-scrolling-item-{{ section.id }} {
    display: flex;
    align-items: center;
    background-attachment: scroll !important;
    margin-right: {{ text_mr_mobile }}px;
    flex-shrink: 0;
    text-decoration: none;
  }

  .scrolling-scrolling-item-{{ section.id }}.scrolling-scrolling-item-image-{{ section.id }} {
    margin-right: {{ image_mr_mobile }}px;
  }

  .scrolling-scrolling-text-{{ section.id }} {
    display: inline-block;
    margin: 0;
    font-size: {{ text_size_mobile }}px;
    color: {{ text_color }};
    line-height: {{ text_height }}%;
    text-transform: unset;
    font-weight: 700;
  }

  .scrolling-scrolling-item-{{ section.id }} img,
  .scrolling-scrolling-item-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: {{ image_radius }}px;
    border: {{ image_border_thickness }}px solid {{ image_border_color }};
  }

  .scrolling-scrolling-item-{{ section.id }} svg {
    background-color: #AFAFAF;
  }
  
  @media(min-width: 1024px) {

    .section-{{ section.id }} {
      margin-top: {{ margin_top }}px;
      margin-bottom: {{ margin_bottom }}px;
      margin-left: {{ margin_horizontal }}rem;
      margin-right: {{ margin_horizontal }}rem;
      border-radius: {{ section_radius }}px;
    }
    
    .section-{{ section.id }}-settings {
      padding: 0 5rem;
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
      padding-left: {{ padding_horizontal }}rem;
      padding-right: {{ padding_horizontal }}rem;
    }
    
    .scrolling-scrolling-list-{{ section.id }} {
      animation-duration: {{ scrolling_velocity }}s;
    }

    .scrolling-scrolling-item-{{ section.id }} {
      margin-right: {{ text_mr }}px;
    }

    .scrolling-scrolling-item-{{ section.id }}.scrolling-scrolling-item-image-{{ section.id }} {
      margin-right: {{ image_mr }}px;
    }
    
    .scrolling-scrolling-text-{{ section.id }} {
      font-size: {{ text_size }}px;
    }
    
  }
  
{%- endstyle -%}

{% unless full_width %}
  <style>
    .section-{{ section.id }}-settings {
      max-width: {{ content_width }}rem;
    }
  </style>
{% endunless %}

{% if margin_horizontal_mobile > 0 %}
  <style>
    .section-{{ section.id }} {
      border-left: solid {{ border_color }} {{ border_thickness }}px;
      border-right: solid {{ border_color }} {{ border_thickness }}px;
    }
    
    @media(min-width: 1024px) {
      .section-{{ section.id }} {
        border-left: 0px;
        border-right: 0px;
      }
    }
  </style>
{% endif %}

{% if margin_horizontal > 0 %}
  <style>
    @media(min-width: 1024px) {
      .section-{{ section.id }} {
        border-left: solid {{ border_color }} {{ border_thickness }}px;
        border-right: solid {{ border_color }} {{ border_thickness }}px;
      }
    }
  </style>
{% endif %}

{% if text_custom %}
  <style>
    .scrolling-scrolling-text-{{ section.id }} {
      font-family: {{ text_font.family }}, {{ text_font.fallback_families }};
      font-weight: {{ text_font.weight }};
      font-style: {{ text_font.style }};
    }
  </style>
{% endif %}

{% if reverse_direction %}
  <style>
    @keyframes ticker{{ section.id | replace: '-', '' }} {
      0% {
        transform: translateX(-50%);
      }
      100% {
        transform: translateX(0%);
      }
    }
  </style>
{% else %}
  <style>
    @keyframes ticker{{ section.id | replace: '-', '' }} {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-50%);
      }
    }
  </style>
{% endif %}

{% if pause_hover %}
  <style>
    .scrolling-scrolling-wrap-{{ section.id }}:hover .scrolling-scrolling-list-{{ section.id }} {
       animation-play-state: paused 
    }
  </style>
{% endif %}

{% for block in section.blocks %}
  {% if block.type == "image" %}
  <style>
    .scrolling-scrolling-item-{{ block.id }} {
      width: 100%;
      max-width: {{ block.settings.image_width_mobile }}px;
    }

    @media(min-width: 1024px) {
      .scrolling-scrolling-item-{{ block.id }} {
         max-width:  {{ block.settings.image_width }}px;
      }
    }
  </style>

  {% if block.settings.image_ratio_mobile == "portrait" %}
    <style>
      .scrolling-scrolling-item-{{ block.id }} {
       aspect-ratio: 9.6/12; 
      }
    </style>
  {% elsif block.settings.image_ratio_mobile == "landscape" %}
    <style>
      .scrolling-scrolling-item-{{ block.id }}{
       aspect-ratio: 12/10; 
      }
    </style>
  {% elsif block.settings.image_ratio_mobile == "square" %}
    <style>
      .scrolling-scrolling-item-{{ block.id }} {
       aspect-ratio: 12/12; 
      }
    </style>
  {% else %}
    <style>
      .scrolling-scrolling-item-{{ block.id }} {
       aspect-ratio: auto; 
      }
    </style>
  {% endif %}
  
  {% if block.settings.image_ratio == "portrait" %}
    <style>
      @media(min-width: 1024px) {
       .scrolling-scrolling-item-{{ block.id }} {
         aspect-ratio: 9.6/12; 
        } 
      }
    </style>
  {% elsif block.settings.image_ratio == "landscape" %}
    <style>
      @media(min-width: 1024px) {
        .scrolling-scrolling-item-{{ block.id }}{
         aspect-ratio: 12/10; 
        }
      }
    </style>
  {% elsif block.settings.image_ratio == "square" %}
    <style>
      @media(min-width: 1024px) {
        .scrolling-scrolling-item-{{ block.id }} {
         aspect-ratio: 12/12; 
        }
      }
    </style>
  {% else %}
    <style>
      @media(min-width: 1024px) {
        .scrolling-scrolling-item-{{ block.id }} {
         aspect-ratio: auto; 
        }
      }
    </style>
  {% endif %}

  {% endif %}
{% endfor %}

<div class="section-{{ section.id }} scrolling-{{ section.id }}" style="background-color:{{ background_color }}; background-image: {{ background_gradient }};">
    <div class="section-{{ section.id }}-settings">
      <div class="scrolling-scrolling-wrap-{{ section.id }}">
        <div class="scrolling-scrolling-list-{{ section.id }}">
          {% for item in (1..5) %}
            {% for block in section.blocks %}
              <{% if block.settings.url != blank %}a href="{{ block.settings.url }}"{% else %}div{% endif %} class="scrolling-scrolling-item-{{ section.id }} scrolling-scrolling-item-{{ block.id }} {% if block.type == "image" %}scrolling-scrolling-item-image-{{ section.id }}{% endif %}">
                {% if block.type == "text" %}
                {% if block.settings.text != blank %}
                  <p class="scrolling-scrolling-text-{{ section.id }}">{{ block.settings.text }}</p>
                {% endif %}
                {% else %}
                  {% if block.settings.image != blank %}
                    <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.image.alt }}" {% if lazy %}loading="lazy"{% endif %}>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag }}
                  {% endif %}
                {% endif %}
              </{% if block.settings.url != blank %}a{% else %}div{% endif %}>
            {% endfor %}
          {% endfor %}
        </div>
        <div class="scrolling-scrolling-list-{{ section.id }}">
          {% for item in (1..5) %}
            {% for block in section.blocks %}
              <{% if block.settings.url != blank %}a href="{{ block.settings.url }}"{% else %}div{% endif %} class="scrolling-scrolling-item-{{ section.id }} scrolling-scrolling-item-{{ block.id }}">
                {% if block.type == "text" %}
                {% if block.settings.text != blank %}
                  <p class="scrolling-scrolling-text-{{ section.id }}">{{ block.settings.text }}</p>
                {% endif %}
                {% else %}
                  {% if block.settings.image != blank %}
                    <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.image.alt }}" {% if lazy %}loading="lazy"{% endif %}>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag }}
                  {% endif %}
                {% endif %}
              </{% if block.settings.url != blank %}a{% else %}div{% endif %}>
            {% endfor %}
          {% endfor %}
        </div>
      </div>
    </div>
</div>

{% schema %}
  {
    "name": "SS - Scrolling Text #5",
    "settings": [
      {
        "type": "header",
        "content": "Scrolling Settings",
         "info": "The theme editor may display incorrect scrolling speed; please verify on the live site."
      },
      {
        "type": "range",
        "id": "scrolling_velocity",
        "min": 10,
        "max": 150,
        "step": 2,
        "label": "Scrolling Speed",
        "info": "‚ö° <----------------> üêå",
        "default": 20
      },
      {
        "type": "range",
        "id": "scrolling_velocity_mobile",
        "min": 10,
        "max": 150,
        "step": 2,
        "label": "Scrolling Speed Mobile",
        "info": "‚ö° <----------------> üêå",
        "default": 32
      },
      {
        "type": "checkbox",
        "id": "reverse_direction",
        "label": "Reverse Scrolling Direction"
      },
      {
        "type": "checkbox",
        "id":"pause_hover",
        "label": "Pause on Hover",
        "default":true
      },
      {
        "type": "header",
        "content": "Text Settings"
      },
      {
        "type": "checkbox",
        "id": "text_custom",
        "label": "Use Custom Font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "text_font",
        "label": "Text Font Family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "text_size",
        "min": 0,
        "max": 72,
        "step": 2,
        "unit": "px",
        "label": "Text Size",
        "default": 60
      },
      {
        "type": "range",
        "id": "text_size_mobile",
        "min": 0,
        "max": 72,
        "step": 2,
        "unit": "px",
        "label": "Text Size - Mobile",
        "default": 40
      },
      {
        "type": "range",
        "id": "text_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Text Line Height",
        "default": 150
      },
      {
         "type": "range",
         "id": "text_mr",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Text Margin Right",
         "default": 60
      },
      {
         "type": "range",
         "id": "text_mr_mobile",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Text Margin Right - Mobile",
         "default": 32
      },
      {
        "type": "header",
        "content": "Image Settings"
      },
      {
         "type": "range",
         "id": "image_radius",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Image Roundness",
         "default": 0
      },
      {
         "type": "range",
         "id": "image_border_thickness",
         "min": 0,
         "max": 10,
         "step": 1,
         "unit": "px",
         "label": "Image Border Thickness",
         "default": 0
      },
      {
         "type": "range",
         "id": "image_mr",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Image Margin Right",
         "default": 18
      },
      {
         "type": "range",
         "id": "image_mr_mobile",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Image Margin Right - Mobile",
         "default": 12
      },
      {
        "type": "header",
        "content": "Scrolling Colors"
      },
      {
        "type": "color",
        "label": "Text Color",
        "id": "text_color",
        "default": "#0A0A0A"
      },
      {
        "type": "color",
        "label": "Image Border Color",
        "id": "image_border_color",
        "default": "#000000"
      },
      {
        "type": "header",
        "content": "Section Colors"
      },
      {
        "type": "color",
        "label": "Section background",
        "id": "background_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color_background",
        "id": "background_gradient",
        "label": "Section background gradient"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "border_color",
        "default": "#000000"
      },
      {
        "type": "header",
        "content": "Section margin (outside)"
      },
      {
        "type": "range",
        "id": "margin_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Margin top",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Margin bottom",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_horizontal",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "rem",
        "label": "Margin sides",
        "default": 0
      },
      {
        "type": "range",
        "id": "margin_horizontal_mobile",
        "min": 0,
        "max": 15,
        "step": 0.5,
        "unit": "rem",
        "label": "Margin sides mobile",
        "default": 0
      },
      {
        "type": "header",
        "content": "Section padding (inside)"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Padding top",
        "default": 24
      },
      {
         "type": "range",
         "id": "padding_bottom",
         "min": 0,
         "max": 100,
         "step": 4,
         "unit": "px",
         "label": "Padding bottom",
         "default": 24
      },
      {
        "type": "range",
        "id": "padding_horizontal",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "rem",
        "label": "Padding sides",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding_horizontal_mobile",
        "min": 0,
        "max": 15,
        "step": 0.5,
        "unit": "rem",
        "label": "Padding sides mobile",
        "default": 0
      },
      {
        "type": "header",
        "content": "Section Settings"
      },
      {
        "type": "checkbox",
        "id": "full_width",
        "label": "Full Width",
        "default": true
      },
      {
        "type": "range",
        "id": "content_width",
        "min": 0,
        "max": 400,
        "step": 10,
        "unit": "rem",
        "label": "Section content width",
        "default": 120
      },
      {
        "type": "range",
        "id": "border_thickness",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Border thickness",
        "default": 0
      },
      {
        "type": "range",
        "id": "section_radius",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Section Roundness",
        "default": 0
      },
      {
        "type": "checkbox",
        "id": "lazy",
        "label": "Lazy load",
        "info": "Lazy load images for speed optimisation",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "text",
        "name": "Text",
        "settings": [
          {
            "type": "text",
            "id": "text",
            "label": "Text",
            "default": "Text"
          },
          {
            "type": "url",
            "id": "url",
            "label": "URL"
          }
        ]
      },
      {
        "type": "image",
        "name": "Image",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "range",
            "id": "image_width",
            "min": 30,
            "max": 200,
            "step": 2,
            "unit": "px",
            "label": "Image Width",
            "default": 70
          },
          {
            "type": "range",
            "id": "image_width_mobile",
            "min": 30,
            "max": 200,
            "step": 2,
            "unit": "px",
            "label": "Image Width - Mobile",
            "default": 70
          },
          {
            "type": "select",
            "id": "image_ratio",
            "label": "Image Aspect Ratio",
            "default": "portrait",
            "options": [
              {
                "label": "Portrait",
                "value": "portrait"
              },
              {
                "label": "Square",
                "value": "square"
              },
              {
                "label": "Landscape",
                "value": "landscape"
              },
              {
                "label": "Original",
                "value": "original"
              }
            ]
          },
          {
            "type": "select",
            "id": "image_ratio_mobile",
            "label": "Image Aspect Ratio - Mobile",
            "default": "portrait",
            "options": [
              {
                "label": "Portrait",
                "value": "portrait"
              },
              {
                "label": "Square",
                "value": "square"
              },
              {
                "label": "Landscape",
                "value": "landscape"
              },
              {
                "label": "Original",
                "value": "original"
              }
            ]
          },
          {
            "type": "url",
            "id": "url",
            "label": "URL"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "SS - Scrolling Text #5",
        "blocks": [
          {
            "type": "image"
          },
          {
            "type": "text"
          },
          {
            "type": "image"
          },
          {
            "type": "text"
          },
          {
            "type": "image"
          },
          {
            "type": "text"
          },
          {
            "type": "image"
          },
          {
            "type": "text"
          }
        ]
      }
    ]
  }
{% endschema %}