{%- liquid 
  assign padding_horizontal = section.settings.padding_horizontal
  assign padding_horizontal_mobile = section.settings.padding_horizontal_mobile
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign border_color = section.settings.border_color
  assign border_thickness = section.settings.border_thickness
  assign border_bottom = section.settings.border_bottom
  assign margin_top = section.settings.margin_top
  assign margin_bottom = section.settings.margin_bottom
  assign margin_horizontal_mobile = section.settings.margin_horizontal_mobile
  assign margin_horizontal = section.settings.margin_horizontal
  assign background_color = section.settings.background_color
  assign full_width = section.settings.full_width
  assign content_width = section.settings.content_width
  assign lazy = section.settings.lazy

  assign show_type = section.settings.show_type

  assign layout_gap_mobile = section.settings.layout_gap_mobile
  assign layout_gap = section.settings.layout_gap
  assign layout_padding_horizontal = section.settings.layout_padding_horizontal
  assign layout_padding_horizontal_mobile = section.settings.layout_padding_horizontal_mobile
  assign layout_padding_vertical = section.settings.layout_padding_vertical
  assign layout_padding_vertical_mobile = section.settings.layout_padding_vertical_mobile
  assign layout_radius = section.settings.layout_radius
  assign layout_border_thickness = section.settings.layout_border_thickness
  assign layout_border_color = section.settings.layout_border_color
  assign layout_bg_color = section.settings.layout_bg_color

  assign menu = section.settings.menu
  assign mobile_menu = section.settings.mobile_menu
  assign mobile_menu_text = section.settings.mobile_menu_text
  assign mobile_menu_text_close = section.settings.mobile_menu_text_close
  assign mobile_menu_text_size = section.settings.mobile_menu_text_size
  assign mobile_menu_text_color = section.settings.mobile_menu_text_color
  assign mobile_menu_text_custom = section.settings.mobile_menu_text_custom
  assign mobile_menu_text_font = section.settings.mobile_menu_text_font
  assign mobile_menu_text_height = section.settings.mobile_menu_text_height

  assign submenu_gap = section.settings.submenu_gap
  assign submenu_list_gap = section.settings.submenu_list_gap
  assign submenu_link_hover_color = section.settings.submenu_link_hover_color
  assign submenu_link_color = section.settings.submenu_link_color
  assign submenu_link_header_color = section.settings.submenu_link_header_color
  assign submenu_divider_thickness = section.settings.submenu_divider_thickness
  assign submenu_divider_color = section.settings.submenu_divider_color
  assign submenu_border_color = section.settings.submenu_border_color
  assign submenu_link_bg_hover_color = section.settings.submenu_link_bg_hover_color
  assign submenu_show_numbers = section.settings.submenu_show_numbers
  assign submenu_numbers_color = section.settings.submenu_numbers_color
  assign submenu_numbers_hover_color = section.settings.submenu_numbers_hover_color

  assign list_gap_mobile = section.settings.list_gap_mobile
  assign list_gap = section.settings.list_gap

  assign link_size = section.settings.link_size
  assign link_size_mobile = section.settings.link_size_mobile
  assign link_color = section.settings.link_color
  assign link_hover_color = section.settings.link_hover_color
  assign link_custom = section.settings.link_custom
  assign link_font = section.settings.link_font
  assign link_height = section.settings.link_height
  assign link_padding_horizontal = section.settings.link_padding_horizontal
  assign link_padding_vertical = section.settings.link_padding_vertical
  assign link_radius = section.settings.link_radius
  assign link_bg_color = section.settings.link_bg_color
  assign link_bg_hover_color = section.settings.link_bg_hover_color

  assign menu_icon_size_mobile = section.settings.menu_icon_size_mobile
  assign menu_icon_bg_color = section.settings.menu_icon_bg_color

  assign logo = section.settings.logo
  assign logo_mobile = section.settings.logo_mobile
  assign logo_position = section.settings.logo_position
  assign logo_align_mobile = section.settings.logo_align_mobile
  assign logo_width = section.settings.logo_width
  assign logo_width_mobile = section.settings.logo_width_mobile

  assign use_shop_name = section.settings.use_shop_name
  assign name_size = section.settings.name_size
  assign name_size_mobile = section.settings.name_size_mobile
  assign name_color = section.settings.name_color
  assign name_hover_color = section.settings.name_hover_color
  assign name_custom = section.settings.name_custom
  assign name_font = section.settings.name_font
  assign name_height = section.settings.name_height

  assign right_gap_mobile = section.settings.right_gap_mobile
  assign right_gap = section.settings.right_gap

  assign right_link_size = section.settings.right_link_size
  assign right_link_size_mobile = section.settings.right_link_size_mobile
  assign right_link_color = section.settings.right_link_color
  assign right_link_hover_color = section.settings.right_link_hover_color
  assign right_link_custom = section.settings.right_link_custom
  assign right_link_font = section.settings.right_link_font
  assign right_link_height = section.settings.right_link_height

  assign icon_size_mobile = section.settings.icon_size_mobile
  assign icon_size = section.settings.icon_size

  assign use_search = section.settings.use_search
  assign search_menu_mobile = section.settings.search_menu_mobile
  assign search_text  = section.settings.search_text
  assign search_icon_desktop  = section.settings.search_icon_desktop

  assign use_account = section.settings.use_account
  assign account_menu_mobile = section.settings.account_menu_mobile
  assign account_text  = section.settings.account_text
  assign account_icon_desktop  = section.settings.account_icon_desktop

  assign cart_text  = section.settings.cart_text
  assign cart_icon_desktop  = section.settings.cart_icon_desktop

  assign cart_count_color = section.settings.cart_count_color
  assign cart_count_bg_color = section.settings.cart_count_bg_color
  
-%}

{%- style -%}
  
  {{ link_font | font_face: font_display: 'swap' }}
  {{ mobile_menu_text_font | font_face: font_display: 'swap' }}
  {{ name_font | font_face: font_display: 'swap' }}
  {{ right_link_font | font_face: font_display: 'swap' }}
  
  .section-{{ section.id }} {
    border-top: solid {{ border_color }} {{ border_thickness }}px;
    border-bottom: solid {{ border_color }} {{ border_thickness }}px;
    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px;
    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px;
    margin-left: {{ margin_horizontal_mobile }}rem;
    margin-right: {{ margin_horizontal_mobile }}rem;
    background-color: {{ background_color }};
    transition: all 0.6s ease 0s;
  }
  
  .section-{{ section.id }}-settings {
    margin: 0 auto;
    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;
    padding-left: {{ padding_horizontal_mobile }}rem;
    padding-right: {{ padding_horizontal_mobile }}rem;
  }

  .header-{{ section.id }}.fixed {
    position: fixed;
    top: 0;
    left: 0;
    width: calc(100% - {{margin_horizontal_mobile | times: 2 }}rem);
    z-index: 999;
  }

  .header-{{ section.id }}.onscroll {
    background-color: {{ background_color }};
    transition: all 0.25s ease;
  }

  .header-{{ section.id }}.scroll {
    transform: translateY(-150%) ;
    transition: all 0.25s ease;
  }

  .header-{{ section.id }}.scroll.active {
    transform: translateY(0) ;
    transition: all 0.25s ease;
  }

  .header-{{ section.id }}.open {
    background: hsla(0, 0%, 100%, .7);
    -webkit-backdrop-filter: blur(5px);
    backdrop-filter: blur(5px);
  }

  .header-body-{{ section.id }} {
    display: grid;
    align-items: end;
    padding: {{ layout_padding_vertical_mobile }}px {{ layout_padding_horizontal_mobile }}px;
    border: {{ layout_border_thickness }}px solid {{ layout_border_color }};
    border-radius: {{ layout_radius }}px;
    gap: {{ layout_gap_mobile }}px;
    background-color: {{ layout_bg_color }};
    transition: all 0.25s ease;
    position: relative;
  }

  .header-{{ section.id }}.open .header-body-{{ section.id }} {
    border-bottom-left-radius: 0px;
    border-bottom-right-radius: 0px;
    transition: all 0.25s ease;
  }

  .header-menu-list-{{ section.id }} {
    padding: 0px;
    margin: 0px;
    display: none;
    align-items: center;
    gap: {{ list_gap_mobile }}px;
    flex-wrap: wrap;
    list-style: none;
  }

  .header-menu-mobile-{{ section.id }} .header-menu-list-{{ section.id }} {
    display: flex;
    flex-direction: column;
    align-items: start;
  }

  .header-menu-item-{{ section.id }} {
    line-height: 100%;
    cursor: pointer;
    box-sizing: border-box;
    padding-bottom: 0;
  }

  .header-menu-link-{{ section.id }} {
    margin: 0;
    font-size: {{ link_size_mobile }}px;
    color: {{ link_color }};
    line-height: {{ link_height }}%;
    text-transform: uppercase;
    text-decoration: none;
    font-weight: 400;
    transition: all 0.25s ease;
    position: relative;
    z-index: 3;
    display: block;
    padding: {{ link_padding_vertical }}px {{ link_padding_horizontal }}px;
    background-color: {{ link_bg_color }};
    border-radius: {{ link_radius }}px;
  }

  .header-menu-link-{{ section.id }} span {
    margin-left: 4px;
    color: {{ submenu_numbers_color }};
    transition: all 0.25s ease;
  }

  .header-{{ section.id }}.open .header-menu-mobile-inner-{{ section.id }} .header-menu-link-{{ section.id }} {
    color: {{ submenu_link_color }};
  }

  .header-submenu-{{ section.id }} .header-menu-link-{{ section.id }} {
    color: {{ submenu_link_color }} !important;
    font-weight: 400;
    background-color: transparent;
    max-width: fit-content;
  }

  .header-menu-mobile-{{ section.id }} .header-menu-link-{{ section.id }} {
    background-color: transparent;
  }

  .header-submenu-{{ section.id }} .header-menu-link-{{ section.id }}:hover {
    color: {{ submenu_link_hover_color }} !important;
  }

  .header-menu-item-parent-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 10px;
    max-width: fit-content;
    flex-basis: 0;
  }

  .header-menu-item-icon-{{ section.id }} {
    display: block;
    flex: 0 0 8px;
    width: 8px;
    transition: all 0.25s ease 0s;
    color: {{ submenu_link_color }};
  }

  .header-menu-item-icon-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .header-submenu-{{ section.id }} {
    position: absolute;
    z-index: 3;
    top: calc(100% - {{ padding_bottom | times: 4 }}px);
    left: -{{ layout_border_thickness }}px;
    width: calc(100% + {{ layout_border_thickness | times: 2 }}px); 
    opacity: 0;
    pointer-events: none;
    transition: all 0.25s ease 0s;
    list-style: none;
    margin: 0px;
  }

  .header-submenu-bg-{{ section.id }} {
    display: block !important;
    height: {{ padding_bottom | times: 4 }}px;
    pointer-events: none;
  }

  .header-submenu-inner-{{ section.id }} {
    background: hsla(0, 0%, 82%, .8);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    border-bottom: {{ border_thickness }}px solid {{ border_color }};
    border-bottom-left-radius: {{ layout_radius }}px;
    border-bottom-right-radius: {{ layout_radius }}px;
    border: 1px solid {{ submenu_border_color }};
    border-top: 0px;
  }

  .header-submenu-{{ section.id }} .section-{{ section.id }}-settings {
    padding-top: {{ padding_top }}px;
  }

  .header-menu-item-parent-{{ section.id }}.active .header-submenu-{{ section.id }} {
    opacity: 1;
    pointer-events: all;
    transition: all 0.25s ease 0s;
  }

  .header-menu-burger-wrapper-{{ section.id }} {
    position: relative;
    cursor: pointer;
  }

  .header-menu-burger-wrapper-{{ section.id }}:after {
    content: '';
    position: absolute;
    top: -4px;
    left: 10px;
    width: 18px;
    height: 100%;
    z-index: 2;
    min-height: 14px;
  }

  .header-menu-burger-{{ section.id }} {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
    z-index: 3;
    transition: all 0.25s ease;
    cursor: pointer;
    background-color: transparent;
    border: 0px;
    box-shadow: none;
    padding: 0px;
    min-height: 16px;
  }

  .header-menu-burger-text-{{ section.id }} {
    margin: 0px;
    font-size: {{ mobile_menu_text_size }}px;
    color: {{ mobile_menu_text_color }};
    line-height: {{ mobile_menu_text_height }}%;
    text-transform: uppercase;
    text-decoration: none;
    font-weight: 400;
  }

  .header-menu-burger-text-{{ section.id }}:last-child {
    display: none;
  }

  .header-{{ section.id }}.open .header-menu-burger-text-{{ section.id }}:last-child {
    display: block;
  }

  .header-{{ section.id }}.open .header-menu-burger-text-{{ section.id }}:nth-child(2) {
    display: none;
  }

  .header-menu-burger-icon-wrapper-{{ section.id }} {
    position: relative;
    width: {{ menu_icon_size_mobile }}px;
    height: {{ menu_icon_size_mobile }}px;
  }

  .header-menu-burger-icon-wrapper-{{ section.id }}:before {
    content: '';
    width: calc(100% + 10px);
    height: calc(100% + 10px);
    position: absolute;
    z-index: 1;
    left: -5px;
    top: -5px;
    background-color: {{ menu_icon_bg_color }};
    border-radius: 4px;
  }

  .header-menu-burger-icon-{{ section.id }} {
    display: inline-block;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: {{ menu_icon_size_mobile }}px;
    height: 1px;
    background: {{ link_color }};
    transition: transform .4s ease; 
    z-index: 2;
  }

  .header-{{ section.id }}.open .header-menu-burger-icon-{{ section.id }} {
    transform: translate(-50%, -50%) rotate(45deg);
    transition-delay: .22s;
    top: 50%;
    left: 50%;
  }

  .header-menu-burger-icon-{{ section.id }}::before,
  .header-menu-burger-icon-{{ section.id }}::after{
    content: "";
    display: block;
    position: absolute;
    width: 100%;
    height: 1px;
    background-color: inherit;
    background: {{ link_color }};
  }

  .header-menu-burger-icon-{{ section.id }}::before {
    top: -3px;
    transition: top .25s ease .27s, opacity .25s ease, width .25s ease;
  }

  .header-{{ section.id }}.open .header-menu-burger-icon-{{ section.id }}::before {
    top: 0;
    opacity: 0;
    width: 100%;
    transition: top .2s ease, opacity .2s ease .22s, width .1s ease;
  }

  .header-menu-burger-icon-{{ section.id }}::after {
    bottom: -3px;
    transition: bottom .25s ease .27s, transform .25s ease, width .25s ease;
  }

  .header-{{ section.id }}.open .header-menu-burger-icon-{{ section.id }}::after {
    bottom: 0;
    transform: rotate(-90deg);
    width: 100%;
    transition: bottom .2s ease, transform .2s ease .22s, width .1s ease;
  }

  .header-logo-{{ section.id }} {
    display: flex;
    max-width: fit-content;
    flex-direction: column;
    width: 100%;
    text-align: center;
    position: relative;
    z-index: 3;
    text-decoration: none;
  }

  .header-logo-image-{{ section.id }} {
    margin: 0px;
    width: 100%;
    max-width: {{ logo_width_mobile }}px;
  }

  .header-logo-image-{{ section.id }} img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .header-logo-image-desktop-{{ section.id }} {
    display: none;
  }

  .header-logo-text-{{ section.id }} {
    margin: 0;
    margin-top: 4px;
    font-size: {{ name_size_mobile }}px;
    color: {{ name_color }};
    line-height: {{ name_height }}%;
    text-transform: uppercase;
    text-decoration: none;
    transition: all 0.25s ease;
    text-align: {{ logo_align_mobile }};
    overflow: hidden;
  }

  .header-right-{{ section.id }} {
    display: flex;
    align-items: center;
    justify-content: end;
    gap: {{ right_gap_mobile }}px;
    flex-wrap: wrap;
    position: relative;
    z-index: 3;
  }

  

  .header-search-text-{{ section.id }},
  .header-account-text-{{ section.id }},
  .header-cart-text-{{ section.id }}{
    display: none;
    margin: 0;
    color: {{ right_link_color }};
    font-size: {{ right_link_size_mobile }}px;
    line-height: {{ right_link_height }}%;
    text-transform: unset;
    text-decoration: none;
    transition: all .25s ease 0s;
  }

  .header-cart-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .header-search-icon-{{ section.id }},
  .header-account-icon-{{ section.id }},
  .header-cart-icon-{{ section.id }} {
    display: block;
    width: {{ icon_size_mobile }}px;
  }

  .header-search-icon-{{ section.id }} svg,
  .header-account-icon-{{ section.id }} svg,
  .header-cart-icon-{{ section.id }} svg{
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .header-search-icon-{{ section.id }} svg path,
  .header-account-icon-{{ section.id }} svg path,
  .header-cart-icon-{{ section.id }} svg path {
    stroke: {{ right_link_color }};
    transition: all .25s ease 0s;
  }

  .header-cart-{{ section.id }},
  .header-account-{{ section.id }} {
    text-decoration: none;
  }
  
  .header-search-{{ section.id }},
  .header-account-{{ section.id }}{
    display: flex;
    padding: 0px;
    margin: 0px;
    background-color: transparent;
    border: 0px;
    box-shadow: none;
    cursor: pointer;
    text-decoration: none;
  }

  .header-cart-{{ section.id }} .cart-count-bubble {
    position: relative;
    top: unset;
    left: unset;
    right: unset;
    bottom: unset;
    padding: 0px;
    background-color: transparent;
    border: 0px;
    margin: 0px;
    box-sizing: border-box;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-align: center; 
    border-radius: 4px;
  }

  .header-cart-{{ section.id }} .cart-count-bubble:after {
    content: '';
    width: calc(100% + 4px);
    height: calc(100% + 4px);
    position: absolute;
    top: -2px;
    left: -2px;
    background-color: #e8e8e8;
    border-radius: 4px;
    z-index: 1;
  }

  .header-cart-{{ section.id }} .cart-count-bubble span {
    position: relative;
    z-index: 2;
    font-size: {{ right_link_size_mobile }}px;
    line-height: {{ right_link_height }}%;
    color: {{ cart_count_color }};
    text-transform: unset;
    text-decoration: none;
    transition: all .25s ease 0s;
  }

  .header-menu-mobile-{{ section.id }} {
    position: absolute;
    top: 100%;
    left: calc(({{ padding_horizontal_mobile }}rem + {{ layout_border_thickness }}px) * -1);
    width: calc(100% + {{ padding_horizontal_mobile | times: 2 }}rem + {{ layout_border_thickness | times: 2 }}px);
    padding: 0px calc( {{ padding_horizontal_mobile }}rem + {{ layout_border_thickness }}px);
    height: 100dvh;
    overflow-y: auto;
    background-color: rgba(0,0,0,0.5);
    transition: all 0.25s ease 0s;
    z-index: 99;
    background: hsla(0, 0%, 100%, .7);
    -webkit-backdrop-filter: blur(5px);
    backdrop-filter: blur(5px);
    opacity: 0;
    pointer-events: none;
  }

  .header-{{ section.id }}.open .header-menu-mobile-{{ section.id }} {
    opacity: 1;
    pointer-events: all;
    transition: all 0.25s ease 0s;
  }

  .header-menu-mobile-inner-{{ section.id }} {
    background: hsla(0, 0%, 82%, .8);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    max-width: 100%;
    border-bottom-left-radius: {{ layout_radius }}px;
    border-bottom-right-radius: {{ layout_radius }}px;
    padding: 4px 0px;
    position: relative;
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    border: 1px solid {{ submenu_border_color }};
    border-top: 0px;
  }

  .header-mobile-menu-item-parent-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .header-menu-mobile-{{ section.id }} .header-menu-item-{{ section.id }} {
    max-width: 100%;
    width: 100%;
    justify-content: space-between;
    position: static;
    padding: 12px 10px;
  }

  .header-menu-mobile-{{ section.id }} .header-menu-item-{{ section.id }}:not(:last-child) {
    border-bottom: 1px solid {{ submenu_divider_color }};
  }

  .header-menu-mobile-{{ section.id }} .header-menu-item-icon-{{ section.id }} {
    flex: 0 0 18px;
    width: 18px;
  }

  .header-menu-mobile-submenu-{{ section.id }} {
    position: absolute;
    background: hsla(0, 0%, 82%, .8);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    z-index: 4;
    padding: 4px 0px;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    overflow-x: hidden;
    overflow-y: auto;
    transform: translateX(110%);
    transition: all 0.25s ease 0s;
  }

  .header-mobile-menu-item-parent-{{ section.id }}.active > .header-menu-mobile-submenu-{{ section.id }} {
    transform: translateX(0%);
    transition: all 0.25s ease 0s;
  }

  .header-menu-mobile-submenu-heading-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    background-color: transparent;
    border: 0px;
    border-bottom: 1px solid {{ submenu_divider_color }};
    padding: 0px;
    padding: 10px;
    box-shadow: none;
    font-size: {{ link_size_mobile }}px;
    color: {{ submenu_link_header_color }};
    line-height: {{ link_height }}%;
    text-transform: uppercase;
    text-decoration: none;
    font-weight: 400;
  }

  .header-menu-mobile-submenu-heading-{{ section.id }} .header-menu-item-icon-{{ section.id }} {
    transform: rotate(180deg);
  }

  .header-mobile-submenu-list-{{ section.id }} {
    margin: 0px;
    margin-top: {{ list_gap_mobile }}px;
    display: flex;
    flex-direction: column;
    gap: {{ list_gap_mobile }}px;
    padding: 0px;
    list-style: none;
  }

  .header-logo-desktop-{{ section.id }} {
    display: none;
  }
  
  .header-submenu-menu-{{ section.id }} {
    display: flex;
    gap: {{ submenu_gap }}px;
    flex-wrap: wrap;
  }

  .header-submenu-menu-{{ section.id }} .header-menu-list-{{ section.id }} {
    display: flex;
    align-items: stretch;
    gap: {{ submenu_gap }}px;
  }

  .header-submenu-menu-{{ section.id }} > .header-menu-list-{{ section.id }} .header-menu-item-with-submenu-{{ section.id }} > .header-menu-link-{{ section.id }}:first-child {
    display: block;
    max-width: fit-content;
    font-size: {{ link_size }}px;
    font-weight: 400;
    margin-bottom: 12px;
    color: {{ submenu_link_header_color }} !important;
  }

  .header-submenu-menu-{{ section.id }} .header-menu-list-{{ section.id }} .header-menu-list-{{ section.id }} {
    margin-top: {{ submenu_list_gap }}px;
    display: flex;
    flex-direction: column;
    gap: {{ submenu_list_gap }}px;
  }

  .header-submenu-menu-{{ section.id }} >  .header-menu-list-{{ section.id }} > .header-menu-item-{{ section.id }}:not(:last-child) {
    border-right: {{ submenu_divider_thickness }}px solid {{ submenu_divider_color }};
  }

  ul.hidden-list > .header-menu-item-{{ section.id }} > .header-menu-link-{{ section.id }},
  ul.hidden-list > .header-menu-item-{{ section.id }} > .header-menu-item-icon-{{ section.id }}{
    opacity: 0;
    transition: all 0.25s ease 0s;
  }
  
  @media(min-width: 1024px) {

    .section-{{ section.id }} {
      margin-top: {{ margin_top }}px;
      margin-bottom: {{ margin_bottom }}px;
      margin-left: {{ margin_horizontal }}rem;
      margin-right: {{ margin_horizontal }}rem;
    }
    
    .section-{{ section.id }}-settings {
      padding: 0 5rem;
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
      padding-left: {{ padding_horizontal }}rem;
      padding-right: {{ padding_horizontal }}rem;
    }
  
    .header-{{ section.id }}.fixed {
      width: calc(100% - {{ margin_horizontal | times: 2 }}rem);
    }

    .header-{{ section.id }}.open {
      background: none;
      background: {{ background_color }};
      -webkit-backdrop-filter:  unset;
      backdrop-filter: unset;
    }

    .header-body-{{ section.id }} {
      display: grid;
      padding: {{ layout_padding_vertical }}px {{ layout_padding_horizontal }}px;
      gap: {{ layout_gap }}px;
    }

    .header-menu-burger-{{ section.id }} {
      display: none;
    }

    .header-menu-list-{{ section.id }} {
      display: flex;
      gap: {{ list_gap }}px;
    }

    .header-menu-link-{{ section.id }} {
      font-size: {{ link_size }}px;
      transition: all 0.25s ease;
    }

    .header-menu-item-{{ section.id }}:hover > .header-menu-link-{{ section.id }} {
      transition: all 0.25s ease;
      color: {{ link_hover_color }};
    }

    .header-menu-item-{{ section.id }} > .header-menu-link-{{ section.id }}:hover {
      background-color: {{ link_bg_hover_color }};
      transition: all 0.25s ease;
    }

    .header-submenu-{{ section.id }} .header-menu-item-{{ section.id }} > .header-menu-link-{{ section.id }}:hover {
      background-color: {{ submenu_link_bg_hover_color }};
      transition: all 0.25s ease;
    }

    .header-submenu-menu-{{ section.id }} > .header-menu-list-{{ section.id }} > .header-menu-item-{{ section.id }} > .header-menu-link-{{ section.id }}:first-child:hover {
      background-color: transparent;
    }

    .header-menu-link-{{ section.id }}:hover span {
      color: {{ submenu_numbers_hover_color }};
      transition: all 0.25s ease;
    }

    .header-submenu-{{ section.id }} .header-menu-item-parent-{{ section.id }} {
      max-width: 100%;
    }

    .header-submenu-{{ section.id }} .header-menu-item-{{ section.id }}::after {
      display: none;
    }

    .header-menu-item-parent-{{ section.id }}.active > .header-menu-item-icon-{{ section.id }} {
      transform: rotate(180deg);
      transition: all 0.25s ease 0s;
    }

     .header-logo-{{ section.id }} {
      align-items: center !important;
      justify-content: center !important;
     }

    .header-logo-image-{{ section.id }} {
      max-width: {{ logo_width }}px;
    }

    .header-logo-image-desktop-{{ section.id }} {
      display: block;
    }

    .header-logo-image-mobile-{{ section.id }} {
      display: none;
    }

    .header-logo-text-{{ section.id }} {
      font-size: {{ name_size }}px;
      text-align: center;
      transition: all 0.25s ease;
    }

    .header-logo-text-{{ section.id }}:hover {
      transition: all 0.25s ease;
      color: {{ name_hover_color }};
    }

    .header-right-{{ section.id }} {
      gap: {{ right_gap }}px;
      order: 3;
    }

    .header-search-text-{{ section.id }},
    .header-account-text-{{ section.id }},
    .header-cart-text-{{ section.id }}{
      display: inline;
      font-size: {{ right_link_size }}px;
    }

    .header-search-text-{{ section.id }}:hover,
    .header-account-text-{{ section.id }}:hover,
    .header-cart-text-{{ section.id }}:hover{
      transition: all .25s ease 0s;
      color: {{ right_link_hover_color }}!important;
    }

    .header-cart-text-{{ section.id }} {
      display: inline; 
    }

    .header-search-icon-{{ section.id }},
    .header-account-icon-{{ section.id }},
    .header-cart-icon-{{ section.id }} {
      display: none;
      width: {{ icon_size }}px;
    }

    .header-search-icon-{{ section.id }}:hover svg path,
    .header-account-icon-{{ section.id }}:hover svg path,
    .header-cart-icon-{{ section.id }}:hover svg path{
      stroke: {{ right_link_hover_color }};
      transition: all .25s ease 0s;
    }


    .header-cart-{{ section.id }} .cart-count-bubble span {
      font-size: {{ right_link_size }}px;
    }

    .header-menu-mobile-{{ section.id }} {
      display: none;
    }

    .header-logo-desktop-{{ section.id }} {
      display: block;
    }

    .header-logo-mobile-{{ section.id }} {
      display: none;
    }
    
  }
  
{%- endstyle -%}

{% unless full_width %}
  <style>
    .section-{{ section.id }}-settings {
      max-width: {{ content_width }}px;
    }
  </style>
{% endunless %}

{% if margin_horizontal_mobile > 0 %}
  <style>
    .section-{{ section.id }} {
      border-left: solid {{ border_color }} {{ border_thickness }}px;
      border-right: solid {{ border_color }} {{ border_thickness }}px;
    }
    
    @media(min-width: 1024px) {
      .section-{{ section.id }} {
        border-left: 0px;
        border-right: 0px;
      }
    }
  </style>
{% endif %}

{% if margin_horizontal > 0 %}
  <style>
    @media(min-width: 1024px) {
      .section-{{ section.id }} {
        border-left: solid {{ border_color }} {{ border_thickness }}px;
        border-right: solid {{ border_color }} {{ border_thickness }}px;
      }
    }
  </style>
{% endif %}

{% if link_custom %}
  <style>
    .header-menu-link-{{ section.id }} {
      font-family: {{ link_font.family }}, {{ link_font.fallback_families }};
      font-weight: {{ link_font.weight }};
      font-style: {{ link_font.style }};
    }
  </style>
{% endif %}

{% if mobile_menu_text_custom %}
  <style>
    .header-menu-burger-text-{{ section.id }} {
      font-family: {{ mobile_menu_text_font.family }}, {{ mobile_menu_text_font.fallback_families }};
      font-weight: {{ mobile_menu_text_font.weight }};
      font-style: {{ mobile_menu_text_font.style }};
    }
  </style>
{% endif %}

{% if name_custom %}
  <style>
    .header-logo-text-{{ section.id }} {
      font-family: {{ name_font.family }}, {{ name_font.fallback_families }};
      font-weight: {{ name_font.weight }};
      font-style: {{ name_font.style }};
    }
  </style>
{% endif %}

{% if right_link_custom %}
  <style>
    .header-search-text-{{ section.id }},
    .header-account-text-{{ section.id }},
    .header-cart-text-{{ section.id }} {
      font-family: {{ right_link_font.family }}, {{ right_link_font.fallback_families }};
      font-weight: {{ right_link_font.weight }};
      font-style: {{ right_link_font.style }};
    }
  </style>
{% endif %}

{% if border_bottom %}
  <style>
    .section-{{ section.id }} {
      border-top: 0px;
    }
  </style>
{% endif %}

{% if logo_align_mobile == "center" %}
  <style>
    .header-body-{{ section.id }} {
      grid-template-columns: 1fr auto 1fr;
    }
  </style>
{% elsif logo_align_mobile == "right" %}
  <style>
    .header-body-{{ section.id }} {
      grid-template-columns: 1fr auto auto;
    }
  </style>
{% else %}
  <style>
    .header-body-{{ section.id }} {
      grid-template-columns: auto auto 1fr;
    }
  </style>
{% endif %}

{% if logo_position == "center" %}
  <style>
    @media(min-width: 1024px) {

      .header-body-{{ section.id }} {
        grid-template-columns: 1fr auto 1fr;
      }
      
      .header-menu-{{ section.id }} {
        order: 1;
      }

      .header-logo-{{ section.id }} {
        order: 2;
        text-align: center;
      }
    }
  </style>
{% else %}
  <style>
    @media(min-width: 1024px) {

      .header-body-{{ section.id }} {
        grid-template-columns: auto 1fr auto;
      }
      
      .header-menu-{{ section.id }} {
        order: 2;
      }

      .header-logo-{{ section.id }} {
        order: 1;
        text-align: left;
      }
    }
  </style>
{% endif %}

{% if search_icon_desktop %}
  <style>
    @media(min-width: 1024px) {
      .header-search-icon-{{ section.id }} {
        display: block;
      }

      .header-search-text-{{ section.id }} {
        display: none;
      }
    }
  </style>
{% endif %}

{% if account_icon_desktop %}
  <style>
    @media(min-width: 1024px) {
      .header-account-icon-{{ section.id }} {
        display: block;
      }

      .header-account-text-{{ section.id }} {
        display: none;
      }
    }
  </style>
{% endif %}

{% if cart_icon_desktop %}
  <style>
    @media(min-width: 1024px) {
      .header-cart-icon-{{ section.id }} {
        display: block;
      }

      .header-cart-text-{{ section.id }} {
        display: none;
      }
    }
  </style>
{% endif %}

{% if submenu_divider_thickness > 0 %}
  <style>
    .header-submenu-menu-{{ section.id }} >  .header-menu-list-{{ section.id }} .header-menu-item-{{ section.id }}:not(:last-child) {
      padding-right: {{ submenu_gap }}px;
    }
  </style>
{% endif %}

{% if search_menu_mobile %}
  <style>
    .header-right-{{ section.id }} .header-search-{{ section.id }} {
      display: none;
    }

    @media(min-width: 1024px) {
      .header-right-{{ section.id }} .header-search-{{ section.id }} {
        display: flex;
      }
    }
  </style>
{% endif %}

{% if account_menu_mobile %}
  <style>
    .header-right-{{ section.id }} .header-account-{{ section.id }} {
      display: none;
    }

    @media(min-width: 1024px) {
      .header-right-{{ section.id }} .header-account-{{ section.id }} {
        display: flex;
      }
    }
  </style>
{% endif %}

{% if logo_align_mobile == "center" %}
  <style>
    .header-logo-{{ section.id }} {
      align-items: center;
    }
  </style>
{% elsif logo_align_mobile == "right" %}
   <style>
    .header-logo-{{ section.id }} {
      align-items: end;
    }
  </style>
{% endif %}

{% comment %} FOR FREE THEMES{% endcomment %}
{%- if settings.cart_type == "drawer" -%}
  {{ 'component-cart-drawer.css' | asset_url | stylesheet_tag }}
  {{ 'component-cart.css' | asset_url | stylesheet_tag }}
  {{ 'component-totals.css' | asset_url | stylesheet_tag }}
  {{ 'component-price.css' | asset_url | stylesheet_tag }}
  {{ 'component-discounts.css' | asset_url | stylesheet_tag }}
{%- endif -%}
{% comment %} FOR FREE THEMES{% endcomment %}

<div class="section-{{ section.id }} header-{{ section.id }} {% if show_type == "always" %}fixed always{% elsif show_type == "scroll_up" %}scroll active fixed{% else %}top{% endif %}">
    <div class="section-{{ section.id }}-settings">
      <div class="header-body-{{ section.id }}">
        <div class="header-menu-{{ section.id }}">
          <div class="header-menu-burger-wrapper-{{ section.id }}">
            <button class="header-menu-burger-{{ section.id }}">
              <div class="header-menu-burger-icon-wrapper-{{ section.id }}">
                <span class="header-menu-burger-icon-{{ section.id }}"></span>
              </div>            
              <span class="header-menu-burger-text-{{ section.id }}">{{ mobile_menu_text }}</span>
              <span class="header-menu-burger-text-{{ section.id }}">{{ mobile_menu_text_close }}</span>
            </button>
          </div>
          <ul class="header-menu-list-{{ section.id }}">
            {% for link in menu.links %}
              <li class="header-menu-item-{{ section.id }} header-menu-item-main-{{ section.id }} {% if link.links.size > 0 %}header-menu-item-parent-{{ section.id }}{% endif %}">
                <a href="{{ link.url }}" class="header-menu-link-{{ section.id }}">
                  {{ link.title }}
                </a>
                {% if link.links.size > 0 %}

                  <div class="header-submenu-{{ section.id }}">
                    <div class="header-submenu-bg-{{ section.id }}"></div>
                    <div class="header-submenu-inner-{{ section.id }}">
                      <div class="section-{{ section.id }}-settings">
                        <div class="header-submenu-menu-{{ section.id }}">
                            <ul class="header-menu-list-{{ section.id }}">
                              {% for child_link in link.links %}
                                <li class="header-menu-item-{{ section.id }} {% if child_link.links.size > 0 %}header-menu-item-with-submenu-{{ section.id }}{% endif %}">
                                  <a href="{{ child_link.url }}" class="header-menu-link-{{ section.id }}">
                                    {{ child_link.title }}
                                    {% if submenu_show_numbers %}
                                      {% assign child_link_handle = child_link.handle | handleize %}
                                      {% assign child_link_collection = collections[child_link_handle] %}
                                      <span>{{ child_link_collection.all_products_count }}</span>
                                    {% endif %}
                                  </a>

                                  {% if child_link.links.size > 0 %}
                                    <ul class="header-menu-list-{{ section.id }}">
                                      {% for child_child_link in child_link.links %}
                                         <li class="header-menu-item-{{ section.id }}">
                                           <a href="{{ child_child_link.url }}" class="header-menu-link-{{ section.id }}">
                                             {{ child_child_link.title }}
                                             {% if submenu_show_numbers %}
                                                {% assign child_child_link_handle = child_child_link.handle | handleize %}
                                                {% assign child_child_link_collection = collections[child_child_link_handle] %}
                                                <span>{{ child_child_link_collection.all_products_count }}</span>
                                              {% endif %}
                                           </a>
                                         </li>
                                      {% endfor %}
                                    </ul>
                                  {% endif %}
                                </li>
                              {% endfor %}
                            </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                {% endif %}
              </li>

            {% endfor %}
          </ul>

          <div class="header-menu-mobile-{{ section.id }}">
            <div class="header-menu-mobile-inner-{{ section.id }}">
              <ul class="header-menu-list-{{ section.id }}">
                {% for link in mobile_menu.links %}
                  <li class="header-menu-item-{{ section.id }} {% if link.links.size > 0 %}header-mobile-menu-item-parent-{{ section.id }}{% endif %}">
                    <a href="{{ link.url }}" class="header-menu-link-{{ section.id }}">{{ link.title }}</a>
                    {% if link.links.size > 0 %}
                      <span class="header-menu-item-icon-{{ section.id }}">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="m5.625 11.25 3.75 -3.75 -3.75 -3.75" stroke-width="1"></path></svg>
                      </span>
                      <div class="header-menu-mobile-submenu-{{ section.id }}">
                        <button class="header-menu-mobile-submenu-heading-{{ section.id }}">
                          <span class="header-menu-item-icon-{{ section.id }}">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="m5.625 11.25 3.75 -3.75 -3.75 -3.75" stroke-width="1"></path></svg>
                          </span>
                          {{ link.title }}
                        </button>
                        <ul class="header-mobile-submenu-list-{{ section.id }}">
                          {% for child_link in link.links %}
                            <li class="header-menu-item-{{ section.id }} {% if child_link.links.size > 0 %}header-mobile-menu-item-parent-{{ section.id }}{% endif %}">
                              <a href="{{ child_link.url }}" class="header-menu-link-{{ section.id }}">{{ child_link.title }}</a>
                              {% if child_link.links.size > 0 %}
                                <span class="header-menu-item-icon-{{ section.id }}">
                                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="m5.625 11.25 3.75 -3.75 -3.75 -3.75" stroke-width="1"></path></svg>
                                </span>
                                <div class="header-menu-mobile-submenu-{{ section.id }}">
                                  <button class="header-menu-mobile-submenu-heading-{{ section.id }}">
                                    <span class="header-menu-item-icon-{{ section.id }}">
                                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="m5.625 11.25 3.75 -3.75 -3.75 -3.75" stroke-width="1"></path></svg>
                                    </span>
                                    {{ child_link.title }}
                                  </button>
                                  <ul class="header-mobile-submenu-list-{{ section.id }}">
                                    {% for child_child_link in child_link.links %}
                                       <li class="header-menu-item-{{ section.id }}">
                                         <a href="{{ child_child_link.url }}" class="header-menu-link-{{ section.id }}">{{ child_child_link.title }}</a>
                                       </li>
                                    {% endfor %}
                                  </ul>
                                </div>
                              {% endif %}
                            </li>
                          {% endfor %}
                        </ul>
                      </div>
                    {% endif %}
                  </li>
                {% endfor %}
                {% if use_search and search_menu_mobile %}
                   <li class="header-menu-item-{{ section.id }}">
                     <a href="{{ routes.search_url }}" class="header-menu-link-{{ section.id }}">{{ search_text }}</a>
                   </li>
                {% endif %}
                {% if use_account and account_menu_mobile %}
                   <li class="header-menu-item-{{ section.id }}">
                     <a href="{{ routes.account_url }}" class="header-menu-link-{{ section.id }}">{{ account_text }}</a>
                   </li>
                {% endif %}
              </ul>
            </div>
          </div>
        </div>
        
        <a href="{{ shop.url }}" class="header-logo-{{ section.id }}">
          {% if logo != blank %}
            <div class="header-logo-image-{{ section.id }} {% if logo_mobile != blank %}header-logo-desktop-{{ section.id }}{% endif %}">
              <img src="{{ logo | image_url }}" alt="{{ logo.alt }}" {% if lazy %}loading="lazy"{% endif %}>
            </div>
            {% if logo_mobile != blank %}
              <p class="header-logo-image-{{ section.id }} header-logo-mobile-{{ section.id }}">
                <img src="{{ logo_mobile | image_url }}" alt="{{ logo_mobile.alt }}" {% if lazy %}loading="lazy"{% endif %}>
              </p>
            {% endif %}
          {% endif %}
          {% if use_shop_name %}
            <p class="header-logo-text-{{ section.id }}">{{ shop.name }}</p>
          {% endif %}
        </a>

        <div class="header-right-{{ section.id }}">
          {% if use_search %}
            <a href="{{ routes.search_url }}" class="header-search-{{ section.id }}">
              <span class="header-search-icon-{{ section.id }}">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="m10.558125 10.575000000000001 1.925 1.925m-0.555625 -5.261875c0 2.6168750000000003 -2.114375 4.738125 -4.721875 4.738125 -2.6081250000000002 0 -4.7225 -2.12125 -4.7225 -4.7375C2.483125 4.6206249999999995 4.5975 2.5 7.205 2.5c2.6081250000000002 0 4.7225 2.12125 4.7225 4.738125" stroke-width="1"></path></svg>
              </span>
              <span class="header-search-text-{{ section.id }}">{{ search_text }}</span>
            </a>

          {% endif %}

          {%- if shop.customer_accounts_enabled and use_account -%}
            <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header-account-{{ section.id }}">
              <span class="header-account-icon-{{ section.id }}">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="M5.625 4.6875a1.875 1.875 0 1 0 3.75 0 1.875 1.875 0 1 0 -3.75 0" stroke-width="1"></path><path d="M12.1875 12.8125c-0.296875 -5.833125 -9.078125 -5.833125 -9.375 0" stroke-width="1"></path></svg>
              </span>
              <span class="header-account-text-{{ section.id }}">{{ account_text }}</span>
            </a>
          {%- endif -%}

          <a href="{{ routes.cart_url }}" class="header-cart-{{ section.id }}">
            <span class="header-cart-icon-{{ section.id }}">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" height="16" width="16"><path d="M10.3125 13.125a0.9375 0.9375 0 1 0 0 -1.875 0.9375 0.9375 0 0 0 0 1.875m-5 0a0.9375 0.9375 0 1 0 0 -1.875 0.9375 0.9375 0 0 0 0 1.875M2.31875 3.375h9.508750000000001c0.86125 0 1.4831250000000002 0.79375 1.2468750000000002 1.5925l-1.03375 3.5C11.881250000000001 9.004999999999999 11.3725 9.375 10.79375 9.375H5.07c-0.579375 0 -1.08875 -0.370625 -1.2475 -0.9075zm0 0L1.875 1.875" stroke-width="1"></path></svg>
            </span>
            <span class="header-cart-text-{{ section.id }}">{{ cart_text }}</span>
            <div class="cart-count-bubble">
              {%- if cart.item_count < 100 -%}
                <span aria-hidden="true">{{ cart.item_count }}</span>
              {%- endif -%}
            </div>
          </a>
        </div>
      </div>
    </div>
</div>

<script>
  function initHeader5() {
    let header = document.querySelector('.header-{{ section.id }}');
    let menuMobile = document.querySelector('.header-menu-mobile-{{ section.id }}');
    
    let logo = document.querySelector('.header-logo-{{ section.id }} img');
    let subMenus = document.querySelectorAll('.header-submenu-{{ section.id }}');

    let mobileSubMenu = document.querySelectorAll('.header-menu-mobile-submenu-{{ section.id }}');
    let parentItems = document.querySelectorAll('.header-menu-item-main-{{ section.id }}.header-menu-item-parent-{{ section.id }}');

    let shopName = document.querySelector('.header-logo-text-{{ section.id }}');
    let defaultHeight;
    if(shopName) {
      defaultHeight = shopName.offsetHeight;
    }

    let currentHeight = defaultHeight; 
    let animationFrame = null;
    let isAnimating = false;

    function decreaseHeight() {
      if (currentHeight > 0) {
        currentHeight = Math.max(0, currentHeight - 4);
        if(shopName) {
          shopName.style.height = `${currentHeight}px`;
        }
        animationFrame = requestAnimationFrame(decreaseHeight);
      } else {
        isAnimating = false;
        cancelAnimationFrame(animationFrame);
      }
    }

    function increaseHeight() {
      if (currentHeight < defaultHeight) {
        currentHeight = Math.min(defaultHeight, currentHeight + 4);
         if(shopName) {
          shopName.style.height = `${currentHeight}px`;
         }
        animationFrame = requestAnimationFrame(increaseHeight);
      } else {
        isAnimating = false;
        cancelAnimationFrame(animationFrame);
      }
    }
    
    if (header) {
        if (window.scrollY > 0) {
            header.classList.add('onscroll');
        } else {
          header.classList.add('top');
        }
    
        let lastScrollTop = window.scrollY;
    
        document.addEventListener('scroll', () => {

            if(parentItems) {
              parentItems.forEach(el => el.classList.remove('active'));
            }

            header.classList.remove('open');
          
            const currentScrollTop = window.scrollY;
            const maxScroll = document.documentElement.scrollHeight - window.innerHeight;

            if (currentScrollTop === 0) {
              header.classList.add('top');
            }
    
            if (currentScrollTop <= 0) {
                header.classList.add('active');
                header.classList.remove('onscroll');
                return;
            }
    
            if (currentScrollTop >= maxScroll) {
                header.classList.remove('active');
                return;
            }
    
            if (currentScrollTop !== lastScrollTop) {
                if (header.classList.contains('scroll')) {
                    if (currentScrollTop > lastScrollTop) {
                        header.classList.remove('active');
                    } else {
                        header.classList.add('active');
                    }
                }

                if (header.classList.contains('always')) {
                  if (shopName) {
                
                    if (currentScrollTop > lastScrollTop) {
                      if (!isAnimating) {
                        isAnimating = true;
                        cancelAnimationFrame(animationFrame);
                        decreaseHeight();
                      }
                    } else {
                      if (!isAnimating) {
                        isAnimating = true;
                        cancelAnimationFrame(animationFrame);
                        increaseHeight();
                      }
                    }
                  }
                }
    
                // if (header.classList.contains('transparent')) {
                //     if (currentScrollTop === 0) {
                //         header.classList.remove('onscroll');
                //         header.classList.add('top');
                //     } else {
                //         header.classList.add('onscroll');
                //         header.classList.remove('top');
                //     }
                // }
    
                lastScrollTop = currentScrollTop;
            }
        });

        let burger_icon = header.querySelector('.header-menu-burger-wrapper-{{ section.id }}');
        if(burger_icon) {
          burger_icon.addEventListener('click', () => {
            header.classList.toggle('open');
            if(header.classList.contains('open')) {
              document.body.style.overflow = 'hidden';
            } else {
              document.body.style.overflow = '';
            }
          })
        }

        document.addEventListener('click', (e) => {
          if(e.target == menuMobile) {
            document.body.style.overflow = '';
            header.classList.remove('open');
          }
        });

        if(parentItems) {
          parentItems.forEach(el => {
            document.addEventListener('click', (event) => {  
              if (!el.contains(event.target) && !el.classList.contains('active')) {  
                return;
              }  
             
              if (!el.contains(event.target) && el.classList.contains('active')) {  
                el.classList.remove('active');
              }

              if(!el.contains(event.target)) {
                header.classList.remove('open');
              }
            }); 
            
            el.addEventListener('mouseenter', () => {
              el.classList.add('active');
              header.classList.add('onscroll');
              header.classList.add('open');
            });

             el.addEventListener('mouseleave', () => {
               el.classList.remove('active');
               header.classList.remove('open');
             });
          });
        }

        if (mobileSubMenu) {  
          mobileSubMenu.forEach(el => {  
            let parentItem = el.closest('.header-mobile-menu-item-parent-{{ section.id }}');  
            let heading = el.querySelector('.header-menu-mobile-submenu-heading-{{ section.id }}'); 
            let parentUL = parentItem.closest('ul');
            
            if (parentItem) {  
              parentItem.addEventListener('click', () => {  
                parentItem.classList.add('active'); 
                parentUL.classList.add('hidden-list');
              });  
            }  
        
            if (heading) {  
              heading.addEventListener('click', (event) => {  
                event.stopPropagation();
                parentItem.classList.remove('active');
                parentUL.classList.remove('hidden-list');
                
              });  
            }  
          });  
        } 

        if (logo) {  
          const logoHeight = logo.offsetHeight;
          const halfLogoHeight = logoHeight / 1.5;
      
          if (subMenus) {  
              subMenus.forEach(el => {  
                  el.style.top = `calc(100% - ${halfLogoHeight}px)`;
                  let paddingDiv = el.querySelector('.header-submenu-bg-{{ section.id }}');  
                  if (paddingDiv) {  
                      paddingDiv.style.height = `${halfLogoHeight}px`;
                  }  
              });  
          }  
        } 
      }
  }

  document.addEventListener('DOMContentLoaded', initHeader5);
  
  if (Shopify.designMode) {
     document.addEventListener('shopify:section:unload', initHeader5);
     document.addEventListener('shopify:section:load', initHeader5);
  }
</script>

{% schema %}
{
  "name": "SG-Header #5",
  "settings": [
    {
      "type": "header",
      "content": "Header settings"
    },
    {
      "type": "select",
      "id": "show_type",
      "label": "Reveal menu",
      "default": "always",
      "options": [
        {
          "label": "Scroll up",
          "value": "scroll_up"
        },
        {
          "label": "Always/sticky",
          "value": "always"
        },
        {
          "label": "Only top",
          "value": "top"
        }
      ]
    },
    {
      "type": "header",
      "content": "Menu layout settings"
    },
    {
      "type": "range",
      "id": "layout_padding_horizontal",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding horizontal",
      "default": 10
    },
    {
      "type": "range",
      "id": "layout_padding_horizontal_mobile",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding horizontal - mobile",
      "default": 10
    },
    {
      "type": "range",
      "id": "layout_padding_vertical",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding vertical",
      "default": 10
    },
    {
      "type": "range",
      "id": "layout_padding_vertical_mobile",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding vertical - mobile",
      "default": 10
    },
    {
      "type": "range",
      "id": "layout_radius",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Roundness",
      "default": 4
    },
    {
      "type": "range",
      "id": "layout_border_thickness",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Border thickness",
      "default": 1
    },
    {
      "type": "range",
      "id": "layout_gap",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Logo spacing",
      "default": 32
    },
    {
      "type": "range",
      "id": "layout_gap_mobile",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Logo spacing - mobile",
      "default": 12
    },
    {
      "type": "header",
      "content": "Menu settings"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "link_list",
      "id": "mobile_menu",
      "label": "Mobile menu",
      "default": "main-menu"
    },
    {
      "type": "text",
      "id": "mobile_menu_text",
      "label": "Mobile menu text",
      "default": "Menu"
    },
    {
      "type": "text",
      "id": "mobile_menu_text_close",
      "label": "Mobile menu text close",
      "default": "Close"
    },
    {
      "type": "checkbox",
      "id": "mobile_menu_text_custom",
      "label": "Use custom font",
      "default": false
    },
    {
      "type": "font_picker",
      "id": "mobile_menu_text_font",
      "label": "Font family",
      "default": "josefin_sans_n4"
    },
    {
      "type": "range",
      "id": "mobile_menu_text_size",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "mobile_menu_text_height",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "%",
      "label": "Line height",
      "default": 100
    },
    {
      "type": "header",
      "content": "Menu list settings"
    },
    {
      "type": "range",
      "id": "list_gap",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Gap",
      "default": 12
    },
    {
      "type": "range",
      "id": "list_gap_mobile",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Gap - mobile",
      "default": 0
    },
    {
      "type": "header",
      "content": "Menu link settings"
    },
    {
      "type": "checkbox",
      "id": "link_custom",
      "label": "Use custom font",
      "default": false
    },
    {
      "type": "font_picker",
      "id": "link_font",
      "label": "Font family",
      "default": "josefin_sans_n4"
    },
    {
      "type": "range",
      "id": "link_size",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 12
    },
    {
      "type": "range",
      "id": "link_size_mobile",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Font size - mobile",
      "default": 14
    },
    {
      "type": "range",
      "id": "link_height",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "%",
      "label": "Line height",
      "default": 130
    },
    {
      "type": "range",
      "id": "link_padding_horizontal",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding horizontal",
      "default": 4
    },
    {
      "type": "range",
      "id": "link_padding_vertical",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding vertical",
      "default": 2
    },
    {
      "type": "range",
      "id": "link_radius",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Roundness",
      "default": 2
    },
    {
      "type": "header",
      "content": "Submenu settings"
    },
    {
      "type": "range",
      "id": "submenu_gap",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Gap",
      "default": 32
    },
    {
      "type": "header",
      "content": "Submenu list settings"
    },
    {
      "type": "range",
      "id": "submenu_list_gap",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Gap",
      "default": 4
    },
    {
      "type": "range",
      "id": "submenu_divider_thickness",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Divider thickness",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "submenu_show_numbers",
      "label": "Show the product quantities in the collection (desktop only)",
      "default": true
    },
    {
      "type": "header",
      "content": "Burger menu icon settings"
    },
    {
      "type": "range",
      "id": "menu_icon_size_mobile",
      "min": 8,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Size - mobile",
      "default": 10
    },
    {
      "type": "header",
      "content": "Logo settings"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo_mobile",
      "label": "Logo - mobile (optional)"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 10,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Width",
      "default": 30
    },
    {
      "type": "range",
      "id": "logo_width_mobile",
      "min": 10,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Width - mobile",
      "default": 30
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Position - desktop",
      "default": "center",
      "options": [
        {
          "label": "Left",
          "value": "left"
        },
        {
          "label": "Center",
          "value": "center"
        }
      ]
    },
    {
      "type": "select",
      "id": "logo_align_mobile",
      "label": "Alignment - Mobile",
      "default": "center",
      "options": [
        {
          "label": "Left",
          "value": "left"
        },
        {
          "label": "Center",
          "value": "center"
        },
        {
          "label": "Right",
          "value": "right"
        }
      ]
    },
    {
      "type": "header",
      "content": "Shop name settings"
    },
    {
      "type": "checkbox",
      "id": "use_shop_name",
      "label": "Use shop name",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "name_custom",
      "label": "Use custom font",
      "default": false
    },
    {
      "type": "font_picker",
      "id": "name_font",
      "label": "Font family",
      "default": "josefin_sans_n4"
    },
    {
      "type": "range",
      "id": "name_size",
      "min": 0,
      "max": 72,
      "step": 2,
      "unit": "px",
      "label": "Font size",
      "default": 12
    },
    {
      "type": "range",
      "id": "name_size_mobile",
      "min": 0,
      "max": 72,
      "step": 2,
      "unit": "px",
      "label": "Font size - mobile",
      "default": 14
    },
    {
      "type": "range",
      "id": "name_height",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "%",
      "label": "Line height",
      "default": 100
    },
    {
      "type": "header",
      "content": "Right navigation settings"
    },
    {
      "type": "range",
      "id": "right_gap",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Gap",
      "default": 20
    },
    {
      "type": "range",
      "id": "right_gap_mobile",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Gap - mobile",
      "default": 12
    },
    {
      "type": "header",
      "content": "Right link settings"
    },
    {
      "type": "checkbox",
      "id": "right_link_custom",
      "label": "Use custom font",
      "default": false
    },
    {
      "type": "font_picker",
      "id": "right_link_font",
      "label": "Font family",
      "default": "josefin_sans_n4"
    },
    {
      "type": "range",
      "id": "right_link_size",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 12
    },
    {
      "type": "range",
      "id": "right_link_size_mobile",
      "min": 0,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Font size - mobile",
      "default": 12
    },
    {
      "type": "range",
      "id": "right_link_height",
      "min": 50,
      "max": 200,
      "step": 10,
      "unit": "%",
      "label": "Line height",
      "default": 130
    },
    {
      "type": "header",
      "content": "Right icon settings"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 10,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Size",
      "default": 18
    },
    {
      "type": "range",
      "id": "icon_size_mobile",
      "min": 10,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Size - mobile",
      "default": 20
    },
    {
      "type": "header",
      "content": "Search settings"
    },
    {
      "type": "checkbox",
      "id": "use_search",
      "label": "Use search",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "search_menu_mobile",
      "label": "Move search link to burger menu (mobile)",
      "default": true
    },
    {
      "type": "text",
      "id": "search_text",
      "label": "Text",
      "default": "SEARCH"
    },
    {
      "type": "checkbox",
      "id": "search_icon_desktop",
      "label": "Icon on dekstop",
      "default": false
    },
    {
      "type": "header",
      "content": "Account settings"
    },
    {
      "type": "checkbox",
      "id": "use_account",
      "label": "Use account link",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "account_menu_mobile",
      "label": "Move account link to burger menu (mobile)",
      "default": true
    },
    {
      "type": "text",
      "id": "account_text",
      "label": "Text",
      "default": "LOGIN"
    },
    {
      "type": "checkbox",
      "id": "account_icon_desktop",
      "label": "Icon on dekstop",
      "default": false
    },
    {
      "type": "header",
      "content": "Cart settings"
    },
    {
      "type": "text",
      "id": "cart_text",
      "label": "Text",
      "default": "BAG"
    },
    {
      "type": "checkbox",
      "id": "cart_icon_desktop",
      "label": "Icon on dekstop",
      "default": false
    },
    {
      "type": "header",
      "content": "Menu layout colors"
    },
    {
      "type": "color",
      "label": "Background",
      "id": "layout_bg_color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "label": "Border",
      "id": "layout_border_color",
      "default": "#F0F0F0"
    },
    {
      "type": "header",
      "content": "Menu link colors"
    },
    {
      "type": "color",
      "label": "Link",
      "id": "link_color",
      "info": "A top-level link on desktop and burger menu icon on mobile",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Link hover",
      "id": "link_hover_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Background",
      "id": "link_bg_color"
    },
    {
      "type": "color",
      "label": "Background hover",
      "id": "link_bg_hover_color",
      "default": "#E8E8E8"
    },
    {
      "type": "color",
      "label": "Mobile menu text",
      "id": "mobile_menu_text_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Menu icon background",
      "id": "menu_icon_bg_color",
      "default": "#e8e8e8"
    },
    {
      "type": "header",
      "content": "Mega menu colors"
    },
    {
      "type": "color",
      "label": "Top-level link",
      "id": "submenu_link_header_color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "label": "Link",
      "id": "submenu_link_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Link hover",
      "id": "submenu_link_hover_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Background hover",
      "id": "submenu_link_bg_hover_color",
      "default": "#42FF00"
    },
    {
      "type": "color",
      "label": "Border",
      "id": "submenu_border_color",
      "default": "#F0F0F0"
    },
    {
      "type": "color",
      "label": "Divider",
      "id": "submenu_divider_color",
      "default": "#CACACA"
    },
    {
      "type": "color",
      "label": "Numbers",
      "id": "submenu_numbers_color"
    },
    {
      "type": "color",
      "label": "Numbers hover",
      "id": "submenu_numbers_hover_color",
      "default": "#999999"
    },
    {
      "type": "header",
      "content": "Shop name colors"
    },
    {
      "type": "color",
      "label": "Text",
      "id": "name_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Text hover",
      "id": "name_hover_color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Right navigation colors"
    },
    {
      "type": "color",
      "label": "Link",
      "id": "right_link_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Link hover",
      "id": "right_link_hover_color",
      "default": "#000000"
    },
    {
      "type": "color",
      "label": "Cart count background",
      "id": "cart_count_bg_color",
      "default": "#E8E8E8"
    },
    {
      "type": "color",
      "label": "Cart count",
      "id": "cart_count_color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Section colors"
    },
    {
      "type": "color",
      "label": "Section background",
      "id": "background_color"
    },
    {
      "type": "color",
      "label": "Border",
      "id": "border_color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Section margin (outside)"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_horizontal",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "rem",
      "label": "Margin sides",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_horizontal_mobile",
      "min": 0,
      "max": 15,
      "step": 0.5,
      "unit": "rem",
      "label": "Margin sides mobile",
      "default": 0
    },
    {
      "type": "header",
      "content": "Mega menu padding (inside)"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "rem",
      "label": "Padding sides",
      "default": 4
    },
    {
      "type": "range",
      "id": "padding_horizontal_mobile",
      "min": 0,
      "max": 15,
      "step": 0.5,
      "unit": "rem",
      "label": "Padding sides mobile",
      "default": 1.5
    },
    {
      "type": "header",
      "content": "Section settings"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": true
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 800,
      "max": 2000,
      "step": 100,
      "unit": "px",
      "label": "Section content width",
      "default": 1400
    },
    {
      "type": "range",
      "id": "border_thickness",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Border thickness",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "border_bottom",
      "label": "Only border bottom",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "lazy",
      "label": "Lazy load",
      "info": "Lazy load images for speed optimisation",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "SG-Header #5"
    }
  ]
}
{% endschema %}