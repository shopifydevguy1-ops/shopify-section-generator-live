{% comment %}
---------------------------------------------------------
Copyright Â© 2023 Section Store. All rights reserved.
Unauthorized copying, modification, distribution, or use
of this code or any portion of it, is strictly prohibited.
Violators will be prosecuted to the fullest extent of the law.
For inquiries or permissions, contact daniel@section.store
---------------------------------------------------------
{% endcomment %}

{%- liquid 
  assign padding_horizontal = section.settings.padding_horizontal
  assign padding_horizontal_mobile = section.settings.padding_horizontal_mobile
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign border_color = section.settings.border_color
  assign border_thickness = section.settings.border_thickness
  assign margin_top = section.settings.margin_top
  assign margin_bottom = section.settings.margin_bottom
  assign background_color = section.settings.background_color
  assign background_gradient = section.settings.background_gradient
  assign full_width = section.settings.full_width
  assign content_width = section.settings.content_width
  assign lazy = section.settings.lazy

  assign height = section.settings.height
  assign fixed_height = section.settings.fixed_height
  assign fixed_height_mobile = section.settings.fixed_height_mobile

  assign image = section.settings.image
  assign image_mobile = section.settings.image_mobile
  assign image_radius = section.settings.image_radius

  assign overlay = section.settings.overlay
  assign overlay_color = section.settings.overlay_color

  assign hotspot_size = section.settings.hotspot_size
  assign hotspot_size_mobile = section.settings.hotspot_size_mobile
  assign hotspot_border_thickness = section.settings.hotspot_border_thickness
  assign hotspot_border_thickness_mobile = section.settings.hotspot_border_thickness_mobile
  assign hotspot_border_hover_color = section.settings.hotspot_border_hover_color
  assign hotspot_border_color = section.settings.hotspot_border_color
  assign hotspot_bg_hover_color = section.settings.hotspot_bg_hover_color
  assign hotspot_bg_color = section.settings.hotspot_bg_color
  assign hotspot_animation = section.settings.hotspot_animation
  assign hotspot_shadow = section.settings.hotspot_shadow

  assign modal_vertical_padding_mobile = section.settings.modal_vertical_padding_mobile
  assign modal_vertical_padding = section.settings.modal_vertical_padding
  assign modal_horizontal_padding_mobile = section.settings.modal_horizontal_padding_mobile
  assign modal_horizontal_padding = section.settings.modal_horizontal_padding
  assign modal_radius = section.settings.modal_radius
  assign modal_width = section.settings.modal_width
  assign modal_bg_color = section.settings.modal_bg_color

  assign modal_image_width_mobile = section.settings.modal_image_width_mobile
  assign modal_image_ratio_mobile = section.settings.modal_image_ratio_mobile
  assign modal_image_ratio = section.settings.modal_image_ratio
  assign modal_image_radius = section.settings.modal_image_radius

  assign heading_size = section.settings.heading_size
  assign heading_size_mobile = section.settings.heading_size_mobile
  assign heading_color = section.settings.heading_color
  assign heading_custom = section.settings.heading_custom
  assign heading_font = section.settings.heading_font
  assign heading_height = section.settings.heading_height
  assign heading_align = section.settings.heading_align
  assign heading_align_mobile = section.settings.heading_align_mobile
  assign heading_mt = section.settings.heading_mt

  assign text_size = section.settings.text_size
  assign text_color = section.settings.text_color
  assign text_custom = section.settings.text_custom
  assign text_font = section.settings.text_font
  assign text_height = section.settings.text_height
  assign text_align = section.settings.text_align
  assign text_mt = section.settings.text_mt

  assign price_size = section.settings.price_size
  assign price_color = section.settings.price_color
  assign price_original_color = section.settings.price_original_color
  assign price_custom = section.settings.price_custom
  assign price_font = section.settings.price_font
  assign price_height = section.settings.price_height
  assign price_align = section.settings.price_align
  assign price_mt = section.settings.price_mt
  assign price_compare = section.settings.price_compare

  assign button = section.settings.button
  assign button_size = section.settings.button_size
  assign button_color = section.settings.button_color
  assign button_hover_color = section.settings.button_hover_color
  assign button_custom = section.settings.button_custom
  assign button_font = section.settings.button_font
  assign button_height = section.settings.button_height
  assign button_mt = section.settings.button_mt
  assign button_padding_vertical = section.settings.button_padding_vertical
  assign button_padding_horizontal = section.settings.button_padding_horizontal
  assign button_radius = section.settings.button_radius
  assign button_border_thickness = section.settings.button_border_thickness
  assign button_border_color = section.settings.button_border_color
  assign button_border_hover_color = section.settings.button_border_hover_color
  assign button_bg_color = section.settings.button_bg_color
  assign button_bg_hover_color = section.settings.button_bg_hover_color
  
-%}

{%- style -%}

  {{  heading_font | font_face: font_display: 'swap' }}
  {{  text_font | font_face: font_display: 'swap' }}
  {{  price_font | font_face: font_display: 'swap' }}
  {{  button_font | font_face: font_display: 'swap' }}

  .hotspots-{{ section.id }} {
    position: relative;
    overflow: hidden;
  }
  
  .section-{{ section.id }} {
    border-top: solid {{ border_color }} {{ border_thickness }}px;
    border-bottom: solid {{ border_color }} {{ border_thickness }}px;
    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px;
    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px;
  }
  
  .section-{{ section.id }}-settings {
    margin: 0 auto;
    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;
    padding-left: {{ padding_horizontal_mobile }}rem;
    padding-right: {{ padding_horizontal_mobile }}rem;
    position: relative;
    height: 100%;
  }

  .hotspots-image-{{ section.id }} {
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 1;
    top: 0;
    left: 0;
    overflow: hidden;
    border-radius: {{ image_radius }}px;
  }

  .hotspots-image-{{ section.id }} img,
  .hotspots-image-{{ section.id }} svg {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hotspots-image-{{ section.id }} img.hotspots-desktop-image-{{ section.id }} {
    display: none;
  }

  .hotspots-image-{{ section.id }}:after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background-color: {{ overlay_color | hex_to_rgba: overlay }};
    z-index: 1;
  }

  .hotspots-item-{{ section.id }} {
    position: absolute;
    z-index: 2;
    display: block !important;
    width: {{ hotspot_size_mobile }}px;
    height: {{ hotspot_size_mobile }}px;
    border-radius: 50%;
    border: {{ hotspot_border_thickness_mobile }}px solid {{ hotspot_border_color }};
    background-color: {{ hotspot_bg_color }};
    transition: all 0.25s ease 0s;
    cursor: pointer;
  }

  .hotspots-item-{{ section.id }}:hover {
    border-color: {{ hotspot_border_hover_color }};
    background-color: {{ hotspot_bg_hover_color }};
    transition: all 0.25s ease 0s;
  }

  .hotspots-modal-{{ section.id }} {
    width: 100%;
    max-width: 300px;
    position: absolute;
    top: 8px;
    transition: all 0.5s ease 0s;
    border-radius: {{ modal_radius }}px;
    overflow: hidden;
    padding: {{ modal_vertical_padding_mobile }}px {{ modal_horizontal_padding_mobile }}px;
    opacity: 0;
    z-index: 2;
    background-color: {{ modal_bg_color }};
  }

  .hotspots-modal-{{ section.id }}.active {
    transform: translateX(0);
    opacity: 1;
    transition: all 0.5s ease 0s;
  }

  .hotspots-modal-body-{{ section.id }} {
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
  }

  .hotspots-modal-link-{{ section.id }} {
    position: absolute;
    width: 100%;
    height: 100%;
    display: block !important;
    top: 0;
    left: 0;
    z-index: 2;
  }

  .hotspots-modal-image-{{ section.id }} {
    overflow: hidden;
    border-radius: {{ modal_image_radius }}px;
    width: 100%;
    max-width: {{ modal_image_width_mobile }}px;
  }

  .hotspots-modal-image-{{ section.id }} img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hotspots-modal-heading-{{ section.id }} {
    display: block;
    width: 100%;
    text-align: {{ heading_align_mobile }};
    margin: 0;
    font-size: {{ heading_size_mobile }}px;
    color: {{ heading_color }};
    line-height: {{ heading_height }}%;
    text-transform: unset;
    font-weight: 700;
    font-style: normal;
  }

  .hotspots-modal-text-{{ section.id }} {
    display: none;
    margin: 0;
    font-size: {{ text_size }}px;
    color: {{ text_color }};
    line-height: {{ text_height }}%;
    text-transform: unset;
    font-style: normal;
    text-align: {{ text_align }};
    margin-top: {{ text_mt }}px;
  }

  .hotspots-modal-price-{{ section.id }} {
    margin-top: {{ price_mt }}px;
    display: none;
    align-items: center;
    gap: 5px;
  }

  .hotspots-modal-price-{{ section.id }} * {
    margin: 0;
    font-size: {{ price_size }}px;
    color: {{ price_color }};
    line-height: {{ price_height }}%;
    text-transform: unset;
    font-weight: 700;
    font-style: normal;
  }

  .hotspots-modal-compare-price-{{ section.id }} {
    opacity: 0.8;
    font-size: {{ price_size | times: 0.8 }}px;
    color: {{ price_original_color }};
    text-decoration: line-through !important;
  }

  .hotspots-modal-button-{{ section.id }} {
    display: none;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin: 0;
    margin-top: {{ button_mt }}px;
    font-size: {{ button_size }}px;
    color: {{ button_color }};
    line-height: {{ button_height }}%;
    text-align: center;
    text-transform: unset;
    text-decoration: none;
    padding: {{ button_padding_vertical }}px {{ button_padding_horizontal }}px;
    border-radius: {{ button_radius }}px;
    transition: all 0.25s ease 0s;
    position: relative;
    font-weight: 700;
    font-style: normal;
    z-index: 2;
    background-color: {{ button_bg_color }};
    border: {{ button_border_thickness }}px solid {{ button_border_color }};
  }

  .hotspots-modal-button-{{ section.id }}:hover {
    background-color: {{ button_bg_hover_color }};
    border: {{ button_border_thickness }}px solid {{ button_border_hover_color }};
    color: {{ button_hover_color }};
    transition: all 0.25s ease 0s;
  }

  .hotspots-modal-arrow-{{ section.id }} {
    margin-left: auto;
    width: 7px;
    height: 12px;
  }

  .hotspots-modal-arrow-{{ section.id }} svg {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
  }
  
  @media(min-width: 1024px) {

    .section-{{ section.id }} {
      margin-top: {{ margin_top }}px;
      margin-bottom: {{ margin_bottom }}px;
    }
    
    .section-{{ section.id }}-settings {
      padding: 0 5rem;
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
      padding-left: {{ padding_horizontal }}rem;
      padding-right: {{ padding_horizontal }}rem;
    }

    .hotspots-image-{{ section.id }} img.hotspots-desktop-image-{{ section.id }} {
      display: block;
    }

    .hotspots-image-{{ section.id }} img.hotspots-mobile-image-{{ section.id }} {
      display: none;
    }

    .hotspots-item-{{ section.id }} {
      width: {{ hotspot_size }}px;
      height: {{ hotspot_size }}px;
      border-width: {{ hotspot_border_thickness }}px;
    }

    .hotspots-modal-{{ section.id }} {
      max-width: {{ modal_width }}%;
      padding: {{ modal_vertical_padding }}px {{ modal_horizontal_padding }}px;
    }

    .hotspots-modal-heading-{{ section.id }} {
      margin-top: {{ heading_mt }}px;
      text-align: {{ heading_align }};
      font-size: {{ heading_size }}px;
    }

    .hotspots-modal-body-{{ section.id }} {
      flex-direction: column;
      align-items: stretch;
    }

    .hotspots-modal-image-{{ section.id }} {
      max-width: 100%;
    }
    
    .hotspots-modal-text-{{ section.id }} {
      display: block;
    }

    .hotspots-modal-price-{{ section.id }} {
      display: flex;
    }

    .hotspots-modal-button-{{ section.id }} {
      display: flex;
    }

    .hotspots-modal-arrow-{{ section.id }} {
      display: none;
    }

    .hotspots-modal-link-{{ section.id }} {
      display: none !important;
    }
    
  }
  
{%- endstyle -%}

{% unless full_width %}
  <style>
    .section-{{ section.id }}-settings {
      max-width: {{ content_width }}rem;
    }
  </style>
{% endunless %}

{% if heading_custom %}
  <style>
    .hotspots-modal-heading-{{ section.id }} {
      font-family: {{ heading_font.family }}, {{ heading_font.fallback_families }};
      font-weight: {{ heading_font.weight }};
      font-style: {{ heading_font.style }};
    }
  </style>
{% endif %}

{% if text_custom %}
  <style>
    .hotspots-modal-text-{{ section.id }} {
      font-family: {{ text_font.family }}, {{ text_font.fallback_families }};
      font-weight: {{ text_font.weight }};
      font-style: {{ text_font.style }};
    }
  </style>
{% endif %}

{% if price_custom %}
  <style>
    .hotspots-modal-price-{{ section.id }} * {
      font-family: {{ price_font.family }}, {{ price_font.fallback_families }};
      font-weight: {{ price_font.weight }};
      font-style: {{ price_font.style }};
    }
  </style>
{% endif %}

{% if button_custom %}
  <style>
    .hotspots-modal-button-{{ section.id }} {
      font-family: {{ button_font.family }}, {{ button_font.fallback_families }};
      font-weight: {{ button_font.weight }};
      font-style: {{ button_font.style }};
    }
  </style>
{% endif %}

{% if height == "adapt_first" %}
  <style>
    .hotspots-{{ section.id }} {
      height: 100vh;
    }
  </style>
{% elsif height == "auto_height" %}
  <style>

     .hotspots-{{ section.id }} {
        height: auto;
      }

    .hotspots-content-wrapper-{{ section.id }} {
      height: 100%;
    }

  </style>
{% else %}
  <style>
    .hotspots-{{ section.id }} {
      height: {{ fixed_height_mobile }}px;
    }
  
    @media(min-width: 768px) {
      .hotspots-{{ section.id }} {
        height: {{ fixed_height }}px;
      }
    }
  </style>
{% endif %}

{% if hotspot_shadow %}
  <style>
    .hotspots-item-{{ section.id }} {
      box-shadow: 0 5px 15px #0009;
    }
  </style>
{% endif %}

{% if hotspot_animation %}
  <style>
    .hotspots-item-{{ section.id }} {
      animation: float{{ section.id }} 2s ease-in-out infinite;
    }

    @keyframes float{{ section.id }} {
      0% {
          box-shadow: 0 5px 15px #0009;
          transform: translatey(0);
      }
      50% {
          box-shadow: 0 25px 15px #0003;
          transform: translatey(-10px);
      }
      100% {
          box-shadow: 0 5px 15px #0009;
          transform: translatey(0);
      }
    }
  </style>
{% endif %}

{% if modal_image_ratio_mobile == "portrait" %}
  <style>
    .hotspots-modal-image-{{ section.id }} {
     aspect-ratio: 9.6/14; 
    }
  </style>
{% elsif modal_image_ratio_mobile == "landscape" %}
  <style>
    .hotspots-modal-image-{{ section.id }}{
     aspect-ratio: 12/9; 
    }
  </style>
{% elsif modal_image_ratio_mobile == "square" %}
  <style>
    .hotspots-modal-image-{{ section.id }} {
     aspect-ratio: 12/12; 
    }
  </style>
{% else%}
  <style>
    .hotspots-modal-image-{{ section.id }} {
     aspect-ratio: auto; 
    }
  </style>
{% endif %}

{% if modal_image_ratio == "portrait" %}
  <style>
    @media(min-width: 1024px) {
     .hotspots-modal-image-{{ section.id }} {
       aspect-ratio: 9.6/14; 
      } 
    }
  </style>
{% elsif modal_image_ratio == "landscape" %}
  <style>
    @media(min-width: 1024px) {
      .hotspots-modal-image-{{ section.id }}{
       aspect-ratio: 12/9; 
      }
    }
  </style>
{% elsif modal_image_ratio == "square" %}
  <style>
    @media(min-width: 1024px) {
      .hotspots-modal-image-{{ section.id }} {
       aspect-ratio: 12/12; 
      }
    }
  </style>
{% else%}
  <style>
    @media(min-width: 1024px) {
      .hotspots-modal-image-{{ section.id }} {
       aspect-ratio: auto; 
      }
    }
  </style>
{% endif %}

{% if price_align == "center" %}
  <style>
    .hotspots-modal-price-{{ section.id }} {
      justify-content: center;
    }
  </style>
{% elsif price_align == "right" %}
  <style>
    .hotspots-modal-price-{{ section.id }} {
      justify-content: end;
    }
  </style>
{% endif %}

{% for block in section.blocks %}
  <style>
    .hotspots-item-{{ block.id }} {
      left: {{ block.settings.horizontal_position_mobile }}%;
      top: {{ block.settings.vertical_position_mobile }}%;
      transform: translate(-{{ block.settings.horizontal_position_mobile }}%, -{{ block.settings.vertical_position_mobile}}%);
    }
    @media(min-width: 1024px) {
      .hotspots-item-{{ block.id }} {
        left: {{ block.settings.horizontal_position }}%;
        top: {{ block.settings.vertical_position }}%;
        transform: translate(-{{ block.settings.horizontal_position }}%, -{{ block.settings.vertical_position}}%);
      }
    }
  </style>

  {% if block.settings.horizontal_position_mobile > 49 %}
    <style>
      .hotspots-modal-{{ block.id }} {
        left: 8px;
        transform: translateX(-120%);
      }
    </style>
  {% else %}
    <style>
      .hotspots-modal-{{ block.id }} {
        right: 8px;
        transform: translateX(120%);
      }
    </style>
  {% endif %}

  {% if block.settings.horizontal_position > 49 %}
    <style>
      @media(min-width: 1024px) {
        .hotspots-modal-{{ block.id }} {
          right: unset;
          left: 16px;
          transform: translateX(-120%);
        }
      }
    </style>
  {% else %}
    <style>
      @media(min-width: 1024px) {
        .hotspots-modal-{{ block.id }} {
          left: unset;
          right: 16px;
          transform: translateX(120%);
        } 
      }
    </style>
  {% endif %}
{% endfor %}

<div class="section-{{ section.id }} hotspots-{{ section.id }}" style="background-color:{{ background_color }}; background-image: {{ background_gradient }};">
    <div class="section-{{ section.id }}-settings">
      <div class="hotspots-image-{{ section.id }}">
        {% if image != blank %}
          <img src="{{ image | image_url }}" alt="{{ image.alt }}" {% if lazy %}loading="lazy"{% endif %} {% if image_mobile != blank %}class="hotspots-desktop-image-{{ section.id }}"{% endif %}>
          {% if image_mobile != blank %}
            <img src="{{ image_mobile | image_url }}" alt="{{ image_mobile.alt }}" {% if lazy %}loading="lazy"{% endif %} class="hotspots-mobile-image-{{ section.id }}">
          {% endif %}
        {% else %}
          {{ 'image' | placeholder_svg_tag }}
        {% endif %}
      </div>
      {% for block in section.blocks %}
        <div class="hotspots-item-{{ section.id }} hotspots-item-{{ block.id }}" id="{{ block.id }}"></div>
      {% endfor %}
    </div>
  {% for block in section.blocks %}
    <div class="hotspots-modal-{{ section.id }} hotspots-modal-{{ block.id }}" data-id="{{ block.id }}">
      {% if block.settings.product != blank %}
        <div class="hotspots-modal-body-{{ section.id }}">
          <a href="{{ block.settings.product.url }}" class="hotspots-modal-link-{{ section.id }}"></a>
          {% if block.settings.product.featured_image != blank %}
            <div class="hotspots-modal-image-{{ section.id }}">
              <img src="{{ block.settings.product.featured_image | image_url }}" alt="{{ block.settings.product.featured_image.alt }}" {% if lazy %}loading="lazy"{% endif %}>
            </div>
          {% endif %}
          <p class="hotspots-modal-heading-{{ section.id }}">{{ block.settings.product.title }}</p>
          {% if block.settings.product.description != blank %}
            <div class="hotspots-modal-text-{{ section.id }}">
              {{ block.settings.product.description | strip_html | truncatewords: 10 }}
            </div>
          {% endif %}
          <div class="hotspots-modal-price-{{ section.id }}">
            <p class="hotspots-modal-regular-price-{{ section.id }}">{{ block.settings.product.price | money }}</p>
            {% if block.settings.product.compare_at_price != blank and price_compare %}
              <strong>-</strong> <p class="hotspots-modal-compare-price-{{ section.id }}">{{ block.settings.product.compare_at_price | money }}</p>
            {% endif %}
          </div>
          <a href="{{ block.settings.product.url }}" class="hotspots-modal-button-{{ section.id }}">
            {{ button }}
          </a>
          <div class="hotspots-modal-arrow-{{ section.id }}">
            <svg width="36" height="62" viewBox="0 0 36 62" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <rect x="36" y="62" width="36" height="62" transform="rotate(-180 36 62)" fill="url(#pattern0)"/>
              <defs>
              <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
              <use xlink:href="#image0_2_2" transform="scale(0.0277778 0.016129)"/>
              </pattern>
              <image id="image0_2_2" width="36" height="62" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAA+CAYAAABDTbllAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJOSURBVHgBzdm/bhMxHAfw7+8OJJZIgaoloA7HQEkrUWVkhI2xPAHkCeANKE8AK1uzwUTeoPAGVQcUdboxhUS6DQgKxk6rqn+uOf9s/3z3XU6X2PJHTmJf/AMaFkINybKs3bp1c0eBsoSomKk/w9Eoz2sBbW097KWKvhjX+deJsHv4/ehdVNACA9qHQru0wXz+IkWkVGJMEupEmSErzGnEQRyMTpFAMEwMdLuh2AyxMUCeqtkzEZAr5kCvRcFBPhhzExTkizEJ9qXe7m689MWYBJkhg1GEPUaXUkwQUEiMNyg0xgskgXEGSWGcQJIYNkgawwLFwFiDYmFMKldqLkZBHbhiKkEa85aLufHrrzPGhCowu+Bi8ryAR6hJmFJQnZgroLoxF0BNwJyBmoJZgLY3H73WA3yw7SCJMUn0AG9sG0tjFiBcOoVY3jgZSGJOxlDqq21jPUPvzVYCwSQp0r6+5rYdzFYiiVr8ynrdbjanf/tgfHyk8OpwdDRA4JytQ01BXVipm4C6spfVjSrd7etEXfs8VBdq6TN1Hailp7DjyaS4v94aYJ4+17cdWImw01lbwfHP6Tc4pPJYeDwuft9bb31moYCnriirc+qYKOuD81go1kl+DBS7tCCNcqp1SKKciy9SKK9qkATKuzwVGhWkXmZQx5Ppx7urKw/0bc+yWykqaAHvx2Q69EUFryj6okRKnD4o1qEnN483N/b0xf4filJ90SIwe6YI7ShFYM5MRSmTM2aqiFa3t0IpfIoGMjGotdU7twn0pOTtPMWs/x+AkvP8f5dQgAAAAABJRU5ErkJggg=="/>
              </defs>
            </svg>
          </div>
        </div>
      {% endif %}
    </div>
  {% endfor %}
</div>

<script>
  function initScrollingProducts() {
    let items = document.querySelectorAll('.hotspots-item-{{ section.id }}');
    let modals = document.querySelectorAll('.hotspots-modal-{{ section.id }}');
    if(items) {
      items.forEach(el => {
        el.addEventListener('click', () => {
          if(modals) {
            modals.forEach( element => {
              let dataId = element.getAttribute('data-id');
              if(el.id == dataId) {
                element.classList.toggle('active');
              } else {
                element.classList.remove('active');
              }
            })
          }
        })
      })
    }
  }

  document.addEventListener('DOMContentLoaded', initScrollingProducts);
  
  if (Shopify.designMode) {
     document.addEventListener('shopify:section:unload', initScrollingProducts);
     document.addEventListener('shopify:section:load', initScrollingProducts);
  }
</script>

{% schema %}
  {
    "name": "SS - Hotspots #5",
    "settings": [
            {
        "type": "header",
        "content": "Height Settings"
      },
      {
        "type": "select",
        "id": "height",
        "label": "Height",
        "default": "fixed_height",
        "options": [
          {
            "label": "Adapt to image",
            "value": "adapt_first"
          },
          {
            "label": "Fixed Height",
            "value": "fixed_height"
          }
        ]
      },
      {
        "type": "range",
        "id": "fixed_height",
        "min": 200,
        "max": 1000,
        "step": 10,
        "unit": "px",
        "label": "Fixed Height",
        "default": 700
      },
      {
        "type": "range",
        "id": "fixed_height_mobile",
        "min": 100,
        "max": 1000,
        "step": 10,
        "unit": "px",
        "label": "Fixed Height - Mobile",
        "default": 500
      },
      {
        "type": "header",
        "content": "Image Settings"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "image_picker",
        "id": "image_mobile",
        "label": "Image - Mobile"
      },
      {
        "type": "range",
        "id": "image_radius",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Image Border Radius",
        "default": 0
      },
      {
        "type": "range",
        "id": "overlay",
        "min": 0,
        "max": 1,
        "step": 0.1,
        "label": "Image Overlay Opacity",
        "default": 0.2
      },
      {
        "type": "header",
        "content": "Hotspot Settings"
      },
      {
        "type": "range",
        "id": "hotspot_size",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Hotspot Size",
        "default": 50
      },
      {
        "type": "range",
        "id": "hotspot_size_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Hotspot Size - Mobile",
        "default": 30
      },
      {
        "type": "range",
        "id": "hotspot_border_thickness",
        "min": 0,
        "max": 10,
        "step": 1,
        "unit": "px",
        "label": "Hotspot Border Thickness",
        "default": 4
      },
      {
        "type": "range",
        "id": "hotspot_border_thickness_mobile",
        "min": 0,
        "max": 10,
        "step": 1,
        "unit": "px",
        "label": "Hotspot Border Thickness - Mobile",
        "default": 2
      },
      {
        "type": "checkbox",
        "id": "hotspot_shadow",
        "label": "Use Hotspot Box Shadow",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "hotspot_animation",
        "label": "Use Hotspot Animation",
        "default": true
      },
      {
        "type": "header",
        "content": "Hotspot Modal Settings"
      },
      {
        "type": "range",
        "id": "modal_width",
        "min": 10,
        "max": 50,
        "step": 1,
        "unit": "%",
        "label": "Modal Width - Desktop",
        "default": 25
      },
      {
        "type": "range",
        "id": "modal_vertical_padding",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Modal Vertical Padding",
        "default": 20
      },
      {
        "type": "range",
        "id": "modal_vertical_padding_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Modal Vertical Padding - Mobile",
        "default": 8
      },
      {
        "type": "range",
        "id": "modal_horizontal_padding",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Modal Horizontal Padding",
        "default": 20
      },
      {
        "type": "range",
        "id": "modal_horizontal_padding_mobile",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Modal Horizontal Padding - Mobile",
        "default": 8
      },
      {
        "type": "range",
        "id": "modal_radius",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Modal Border Radius",
        "default": 0
      },
      {
        "type": "header",
        "content": "Modal Image Settings"
      },
      {
        "type": "range",
        "id": "modal_image_width_mobile",
        "min": 50,
        "max": 200,
        "step": 2,
        "unit": "px",
        "label": "Modal Image Width - Mobile",
        "default": 100
      },
      {
        "type": "select",
        "id": "modal_image_ratio",
        "label": "Modal Image Aspect Ratio",
        "default": "square",
        "options": [
          {
            "label": "Portrait",
            "value": "portrait"
          },
          {
            "label": "Square",
            "value": "square"
          },
          {
            "label": "Landscape",
            "value": "landscape"
          },
          {
            "label": "Original",
            "value": "original"
          }
        ]
      },
      {
        "type": "select",
        "id": "modal_image_ratio_mobile",
        "label": "Modal Image Aspect Ratio - Mobile",
        "default": "square",
        "options": [
          {
            "label": "Portrait",
            "value": "portrait"
          },
          {
            "label": "Square",
            "value": "square"
          },
          {
            "label": "Landscape",
            "value": "landscape"
          },
          {
            "label": "Original",
            "value": "original"
          }
        ]
      },
      {
         "type": "range",
         "id": "modal_image_radius",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Modal Image Border Radius",
         "default": 0
      },
      {
        "type": "header",
        "content": "Modal Heading Settings"
      },
      {
        "type": "checkbox",
        "id": "heading_custom",
        "label": "Use Custom Font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "heading_font",
        "label": "Heading Font Family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "heading_size",
        "min": 0,
        "max": 50,
        "step": 2,
        "unit": "px",
        "label": "Heading Size",
        "default": 22
      },
      {
        "type": "range",
        "id": "heading_size_mobile",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "px",
        "label": "Heading Size - Mobile",
        "default": 15
      },
      {
        "type": "range",
        "id": "heading_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Heading Line Height",
        "default": 130
      },
      {
        "type": "range",
        "id": "heading_mt",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Heading Margin Top",
        "default": 20
      },
      {
        "type": "text_alignment",
        "id": "heading_align",
        "label": "Heading Align"
      },
      {
        "type": "text_alignment",
        "id": "heading_align_mobile",
        "label": "Heading Align - Mobile"
      },
      {
        "type": "header",
        "content": "Modal Text Settings"
      },
      {
        "type": "checkbox",
        "id": "text_custom",
        "label": "Use Custom Font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "text_font",
        "label": "Text Font Family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "text_size",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Text Size",
        "default": 15
      },
      {
        "type": "range",
        "id": "text_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Text Line Height",
        "default": 130
      },
      {
        "type": "range",
        "id": "text_mt",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Text Margin Top",
        "default": 0
      },
      {
        "type": "text_alignment",
        "id": "text_align",
        "label": "Text Align"
      },
      {
        "type": "header",
        "content": "Modal Price Settings"
      },
      {
        "type": "checkbox",
        "id": "price_custom",
        "label": "Use Custom Font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "price_font",
        "label": "Price Font Family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "price_size",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Price Size",
        "default": 20
      },
      {
        "type": "range",
        "id": "price_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Price Line Height",
        "default": 130
      },
      {
        "type": "range",
        "id": "price_mt",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Price Margin Top",
        "default": 0
      },
      {
        "type": "text_alignment",
        "id": "price_align",
        "label": "Price Align"
      },
      {
        "type": "checkbox",
        "id": "price_compare",
        "label": "Show Compare at Price",
        "default": false
      },
      {
        "type": "header",
        "content": "Button"
      },
      {
        "type": "text",
        "id": "button",
        "label": "Button Text",
        "default": "Shop now"
      },
      {
        "type": "checkbox",
        "id": "button_custom",
        "label": "Use Custom Font",
        "default": false
      },
      {
        "type": "font_picker",
        "id": "button_font",
        "label": "Button Font Family",
        "default": "josefin_sans_n4"
      },
      {
        "type": "range",
        "id": "button_size",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "px",
        "label": "Button Size",
        "default": 17
      },
      {
        "type": "range",
        "id": "button_height",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "%",
        "label": "Button Line Height",
        "default": 100
      },
      {
        "type": "range",
        "id": "button_mt",
        "min": 0,
        "max": 50,
        "step": 2,
        "unit": "px",
        "label": "Button Margin Top",
        "default": 10
      },
      {
        "type": "range",
        "id": "button_padding_vertical",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Button Padding Vertical",
        "default": 12
      },
      {
         "type": "range",
         "id": "button_padding_horizontal",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Button Padding Horizontal",
         "default": 20
      },
      {
         "type": "range",
         "id": "button_radius",
         "min": 0,
         "max": 100,
         "step": 2,
         "unit": "px",
         "label": "Button Border Radius",
         "default": 4
      },
      {
         "type": "range",
         "id": "button_border_thickness",
         "min": 0,
         "max": 10,
         "step": 1,
         "unit": "px",
         "label": "Button Border Thickness",
         "default": 1
      },
      {
        "type": "header",
        "content": "Modal Colors"
      },
      {
        "type": "color",
        "label": "Modal Background Color",
        "id": "modal_bg_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Modal Heading Color",
        "id": "heading_color",
        "default": "#2D2926"
      },
      {
        "type": "color",
        "label": "Modal Text Color",
        "id": "text_color",
        "default": "#706C69"
      },
      {
        "type": "color",
        "label": "Modal Price Color",
        "id": "price_color",
        "default": "#2D2926"
      },
      {
        "type": "color",
        "label": "Modal Original Price Color",
        "id": "price_original_color",
        "default": "#2D2926"
      },
      {
        "type": "header",
        "content": "Modal Button Colors"
      },
      {
        "type": "color",
        "label": "Button Text Color",
        "id": "button_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Button Text Hover Color",
        "id": "button_hover_color",
        "default": "#2D2926"
      },
      {
        "type": "color",
        "label": "Button Background Color",
        "id": "button_bg_color",
        "default": "#2D2926"
      },
      {
        "type": "color",
        "label": "Button Background Hover Color",
        "id": "button_bg_hover_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Button Border Color",
        "id": "button_border_color",
        "default": "#2D2926"
      },
      {
        "type": "color",
        "label": "Button Border Hover Color",
        "id": "button_border_hover_color",
        "default": "#2D2926"
      },
      {
        "type": "header",
        "content": "Section Colors"
      },
      {
        "type": "color",
        "label": "Hotspot Background Color",
        "id": "hotspot_bg_color",
        "default": "#F6DBE0"
      },
      {
        "type": "color",
        "label": "Hotspot Background Hover Color",
        "id": "hotspot_bg_hover_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Hotspot Border Color",
        "id": "hotspot_border_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Hotspot Border Hover Color",
        "id": "hotspot_border_hover_color",
        "default": "#FFFFFF"
      },
      {
        "type": "color",
        "label": "Overlay Color",
        "id": "overlay_color",
        "default": "#000000"
      },
      {
        "type": "color",
        "label": "Section background",
        "id": "background_color",
        "default": "#AFAFAF"
      },
      {
        "type": "color_background",
        "id": "background_gradient",
        "label": "Section background gradient"
      },
      {
        "type": "color",
        "label": "Border",
        "id": "border_color",
        "default": "#000000"
      },
      {
        "type": "header",
        "content": "Section margin (outside)"
      },
      {
        "type": "range",
        "id": "margin_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Margin top",
        "default": 36
      },
      {
        "type": "range",
        "id": "margin_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Margin bottom",
        "default": 36
      },
      {
        "type": "header",
        "content": "Section padding (inside)"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Padding top",
        "default": 0
      },
      {
         "type": "range",
         "id": "padding_bottom",
         "min": 0,
         "max": 100,
         "step": 4,
         "unit": "px",
         "label": "Padding bottom",
         "default": 0
      },
      {
        "type": "range",
        "id": "padding_horizontal",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "rem",
        "label": "Padding sides",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding_horizontal_mobile",
        "min": 0,
        "max": 15,
        "step": 0.5,
        "unit": "rem",
        "label": "Padding sides mobile",
        "default": 0
      },
      {
        "type": "header",
        "content": "Section Settings"
      },
      {
        "type": "checkbox",
        "id": "full_width",
        "label": "Full Width",
        "default": true
      },
      {
        "type": "range",
        "id": "content_width",
        "min": 0,
        "max": 400,
        "step": 10,
        "unit": "rem",
        "label": "Section content width",
        "default": 120
      },
      {
        "type": "range",
        "id": "border_thickness",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Border thickness",
        "default": 0
      },
      {
        "type": "checkbox",
        "id": "lazy",
        "label": "Lazy load",
        "info": "Lazy load images for speed optimisation",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "hotspot",
        "name": "Hotspot",
        "settings": [
          {
            "type": "header",
            "content": "Hotspot position"
          },
          {
            "type": "range",
            "id": "vertical_position",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "Vertical Position - Desktop",
            "default": 50
          },
          {
            "type": "range",
            "id": "vertical_position_mobile",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "Vertical Position - Mobile",
            "default": 50
          },
          {
            "type": "range",
            "id": "horizontal_position",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "Horizontal Position",
            "default": 50
          },
          {
            "type": "range",
            "id": "horizontal_position_mobile",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "%",
            "label": "Horizontal Position - Mobile",
            "default": 50
          },
          {
            "type": "header",
            "content": "Hotspots content"
          },
          {
            "type": "product",
            "id": "product",
            "label": "Product"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "SS - Hotspots #5",
        "blocks": [
          {
            "type": "hotspot",
            "settings": {
              "vertical_position": 25,
              "vertical_position_mobile": 25,
              "horizontal_position": 25,
              "horizontal_position_mobile": 25
            }
          },
          {
            "type": "hotspot",
            "settings": {
              "vertical_position": 50,
              "vertical_position_mobile": 50,
              "horizontal_position": 50,
              "horizontal_position_mobile": 50
            }
          },
          {
            "type": "hotspot",
            "settings": {
              "vertical_position": 75,
              "vertical_position_mobile": 75,
              "horizontal_position": 75,
              "horizontal_position_mobile": 75
            }
          }
        ]
      }
    ]
  }
{% endschema %}