<script
  src="https://cdnjs.cloudflare.com/ajax/libs/Sparticles/1.3.1/sparticles.min.js"
  defer
></script>

<style>
  .sparticles {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 9999999;
  }
</style>
<div></div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    let colorType = {
      type: 'multi',
    };

    let colors = {
      color1: '{{ section.settings.color1 }}',
      color2: '{{ section.settings.color2 }}',
      color3: '{{ section.settings.color3 }}',
      color4: '{{ section.settings.color4 }}',
      color5: '{{ section.settings.color5 }}',
    };

    let options = {
      alphaSpeed: 2,
      alphaVariance: 1,
      color: [colors.color1, colors.color2, colors.color3, colors.color4],
      composition: 'source-over',
      drift: 2,
      glow: 50,
      maxAlpha: 2,
      maxSize: 24,
      minAlpha: -0.2,
      minSize: 3,
      parallax: 6,
      rotation: 0.5,
      shape: ['image'],
      style: 'fill',
      twinkle: false,
      xVariance: 20,
      yVariance: 20,
      direction: {{ section.settings.direction }}, // default 160
      speed: {{ section.settings.speed }}, // default 2.5
      count: {{ section.settings.intensity }}, // default: 500
      imageUrl: [
        {% for block in section.blocks %}
          '{{ block.settings.url }}',
        {% endfor %}
      ],
    };

    new Sparticles(document.body, options);
  });
</script>

{% schema %}
{
  "name": "SG-Snow Effect",
  "settings": [
    {
      "type": "range",
      "id": "intensity",
      "label": "Intensity/Count",
      "min": 0,
      "max": 2000,
      "step": 50,
      "default": 500
    },
    {
      "type": "color",
      "id": "color1",
      "label": "Color 1",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "color2",
      "label": "Color 2",
      "default": "#e9effa"
    },
    {
      "type": "color",
      "id": "color3",
      "label": "Color 3",
      "default": "#def1fa"
    },
    {
      "type": "color",
      "id": "color4",
      "label": "Color 4",
      "default": "#b2d1db"
    },
    {
      "type": "color",
      "id": "color5",
      "label": "Color 5",
      "default": "#878f91"
    },
    {
      "type": "range",
      "id": "direction",
      "label": "Direction",
      "unit": "deg",
      "min": 0,
      "max": 360,
      "step": 5,
      "default": 160
    },
    {
      "type": "range",
      "id": "speed",
      "label": "Speed",
      "min": 0,
      "max": 50,
      "step": 0.5,
      "default": 2.5
    }
  ],
  "blocks": [
    {
      "type": "snow",
      "name": "Snow flake image",
      "settings": [
        {
          "type": "text",
          "id": "url",
          "label": "Snow flake image URL",
          "info": "Upload the image to Files, and copy the PNG URL to here"
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "Effect",
      "name": "SG-Snow effect",
      "blocks": [
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake.png?v=1670383333"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake1.png?v=1670383333"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake2.png?v=1670383334"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake3.png?v=1670383334"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake4.png?v=1670383333"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake5.png?v=1670383333"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake6.png?v=1670383333"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake7.png?v=1670383333"
          }
        },
        {
          "type": "snow",
          "settings": {
            "url": "https://cdn.shopify.com/s/files/1/0559/5519/4016/files/snowflake8.png?v=1670383333"
          }
        }
      ]
    }
  ]
}
{% endschema %}