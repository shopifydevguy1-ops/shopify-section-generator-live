{
  "id": "custom-back-top",
  "name": "CUSTOM Back to top",
  "description": "Section: CUSTOM Back to top",
  "tags": [
    "back"
  ],
  "type": "custom",
  "liquid_code": "{%- liquid\n  assign show_when_precent_of_page = section.settings.show_when_precent_of_page\n  assign hide_on_mobile = section.settings.hide_on_mobile\n  assign position = section.settings.position\n  assign horizontal_dst_to_edge = section.settings.horizontal_dst_to_edge\n  assign vertical_dst_to_edge = section.settings.vertical_dst_to_edge\n\n  assign independent = section.settings.independent\n  assign independent_distance = section.settings.independent_distance\n\n  assign button_border_thickness = section.settings.button_border_thickness\n  assign button_shadow = section.settings.button_shadow\n  assign button_bg_color = section.settings.button_bg_color\n  assign button_border_color = section.settings.button_border_color\n\n  assign image = section.settings.image\n  assign image_size = section.settings.image_size\n  assign image_size_mobile = section.settings.image_size_mobile\n  assign image_animate = section.settings.image_animate\n  assign image_direction = section.settings.image_direction\n  assign image_speed = section.settings.image_speed\n  assign image_bg_color = section.settings.image_bg_color\n  assign image_border_radius = section.settings.image_border_radius\n  \n  assign text = section.settings.text\n  assign text_distance = section.settings.text_distance\n  assign text_distance_mobile = section.settings.text_distance_mobile\n  assign text_duplicate = section.settings.text_duplicate\n  assign text_custom = section.settings.text_custom\n  assign text_font = section.settings.text_font\n  assign text_size = section.settings.text_size\n  assign text_size_mobile = section.settings.text_size_mobile\n  assign text_color = section.settings.text_color\n  assign text_animate = section.settings.text_animate\n  assign text_direction = section.settings.text_direction\n  assign text_speed = section.settings.text_speed\n\n  assign text_distance_two = text_distance | times: 2\n  assign transfrom_origin = image_size | plus: text_distance_two\n\n  assign text_distance_mobile_two = text_distance_mobile | times: 2\n  assign transfrom_origin_mobile = image_size_mobile | plus: text_distance_mobile_two\n\n  if image_direction == \"right\"\n    assign image_rotate = \"360deg\"\n  else\n    assign image_rotate = \"-360deg\"\n  endif\n\n  if text_direction == \"right\"\n    assign text_rotate = \"360deg\"\n  else\n    assign text_rotate = \"-360deg\"\n  endif\n\n  if independent \n    assign show_when_precent_of_page = 100\n  endif\n-%}\n\n{%- style -%}\n\n  {{ text_font | font_face: font_display: 'swap' }}\n\n  .back-top-wrapper-{{ section.id }} {\n    position: relative;\n  }\n  \n  .back-top-{{ section.id }} {\n    padding: 5px;\n    position: fixed;\n    bottom: {{ vertical_dst_to_edge }}px;\n    background-color: {{ button_bg_color }};\n    border-radius: 50%;\n    border: {{ button_border_thickness }}px solid {{ button_border_color }};\n    transition: all 0.3s ease-in-out;\n    cursor: pointer;\n    opacity: 0;\n    pointer-events: none;\n    z-index: -1;\n    transition: all 0.35s ease 0s;\n    transform: translateY(20px);\n  }\n\n  .back-top-{{ section.id }}.active {\n    transition: all 0.35s ease 0s;\n    opacity: 1;\n    pointer-events: all;\n    z-index: 2;\n    transform: translateY(0px);\n  }\n\n  .back-top-content-{{ section.id }} {\n    position: relative;\n    width: fit-content;\n    height: fit-content;\n    padding: {{ text_distance_mobile }}px;\n  }\n\n  .back-top-image-{{ section.id }} {\n    position: relative;\n    z-index: 2;\n    border-radius: {{ image_border_radius }}%;\n    width: {{ image_size_mobile }}px;\n    height: {{ image_size_mobile }}px;\n    background-color: {{ image_bg_color }};\n  }\n\n  .back-top-image-{{ section.id }} img,\n  .back-top-image-{{ section.id }} svg {\n    width: 100%;\n    height: 100%;\n    display: block;\n    object-fit: cover;\n    border-radius: {{ image_border_radius }}%;\n  }\n\n  .back-top-text-{{ section.id }} {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .back-top-text_inner-{{ section.id }} {\n    height: 100%;\n    width: 100%;\n    transform-origin: center center;\n  }\n\n  #text-{{ section.id }} {\n    margin: 0px;\n    position: relative;\n  }\n\n  #text-{{ section.id }} span {\n    position: absolute;\n    transform-origin: 0 {{ transfrom_origin_mobile | times: 0.5 | round: 0 }}px;\n    left: 50%;\n    color: {{ text_color }};\n    font-size: {{ text_size_mobile }}px;\n    font-weight: 700;\n    line-height: 100%;\n  }\n\n  #right-eye,\n  #left-eye {\n    transform-origin: center;\n  }\n\n  @media(min-width: 1024px) {\n\n    .back-top-content-{{ section.id }} {\n      padding: {{ text_distance }}px;\n    }\n\n    .back-top-image-{{ section.id }} {\n      width: {{ image_size }}px;\n      height: {{ image_size }}px;\n    }\n    \n    #text-{{ section.id }} span {\n      transform-origin: 0 {{ transfrom_origin | times: 0.5 | round: 0 }}px;\n      font-size: {{ text_size }}px;\n    }\n  }\n{%- endstyle -%}\n\n{% if text_custom %}\n  <style>\n    #text-{{ section.id }} span {\n      font-family: {{ text_font.family }}, {{ text_font.fallback_families }};\n      font-weight: {{ text_font.weight }};\n      font-style: {{ text_font.style }};\n    }\n  </style>\n{% endif %}\n\n{% if position == \"left\" %}\n  <style>\n    .back-top-{{ section.id }} {\n      left: {{ horizontal_dst_to_edge }}px;\n    }\n  </style>\n{% elsif position == \"center\" %}\n  <style>\n    .back-top-{{ section.id }} {\n      left: 50%;\n      transform: translateX(-50%) translateY(20px);\n    }\n    \n    .back-top-{{ section.id }}.active {\n      transform: translateX(-50%) translateY(0px);\n    }\n  </style>\n{% else %}\n  <style>\n    .back-top-{{ section.id }} {\n      right: {{ horizontal_dst_to_edge }}px;\n    }\n  </style>\n{% endif %}\n\n{% if image_animate == \"always\" %}\n  <style>\n  \n    .back-top-image-{{ section.id }} img,\n    .back-top-image-{{ section.id }} svg {\n      animation: rotating {{ image_speed }}s linear infinite;  \n    }\n    \n    @keyframes rotating {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate({{ image_rotate }});\n      }\n    }\n  </style>\n{% elsif image_animate == \"hover\" %}\n  <style>\n  \n    .back-top-{{ section.id }}:hover .back-top-image-{{ section.id }} img,\n    .back-top-{{ section.id }}:hover .back-top-image-{{ section.id }} svg {\n      animation: rotating {{ image_speed }}s linear infinite;  \n    }\n    \n    @keyframes rotating {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate({{ image_rotate }});\n      }\n    }\n  </style>\n{% endif %}\n\n{% if text_animate == \"always\" %}\n  <style>\n  \n    .back-top-text_inner-{{ section.id }} {\n      animation: rotating_text {{ text_speed }}s linear infinite;  \n    }\n    \n    @keyframes rotating_text {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate({{ text_rotate }});\n      }\n    }\n  </style>\n{% elsif text_animate == \"hover\" %}\n  <style>\n  \n    .back-top-{{ section.id }}:hover .back-top-text_inner-{{ section.id }} {\n      animation: rotating_text {{ text_speed }}s linear infinite;  \n    }\n    \n    @keyframes rotating_text {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate({{ text_rotate }});\n      }\n    }\n  </style>\n{% endif %}\n\n{% if hide_on_mobile %}\n  <style>\n    \n    .back-top-{{ section.id }} {\n      display: none;\n    }\n\n    @media(min-width: 1024px) {\n      \n      .back-top-{{ section.id }} {\n        display: block;\n      }\n    }\n  </style>\n{% endif %}\n\n{% if button_shadow %}\n  <style>\n    .back-top-{{ section.id }} {\n      box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;\n    }\n  </style>\n{% endif %}\n\n{% if independent %}\n  <style>\n    .back-top-{{ section.id }} {\n      position: absolute;\n      bottom: unset;\n      top: -{{ independent_distance }}px;\n    }\n  </style>\n{% endif %}\n\n{% if independent %}<div class=\"back-top-wrapper-{{ section.id }}\">{% endif %}\n<button class=\"back-top-{{ section.id }} {% if independent %}active{% endif %}\">\n  <div class=\"back-top-content-{{ section.id }}\">\n    <div class=\"back-top-image-{{ section.id }}\">\n      {% if image != blank %}\n        <img src=\"{{ image | image_url }}\" alt=\"back-top-image\">\n      {% else %}\n        <svg width=\"79\" height=\"73\" viewBox=\"0 0 79 73\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" id=\"eyes\">\n          <g filter=\"url(#filter0_d_350_47)\">\n          <path d=\"M10.1294 36.7103C10.1294 29.2549 11.9248 22.5582 14.7707 17.7621C17.6305 12.9424 21.4265 10.2166 25.4073 10.2166C29.3881 10.2166 33.184 12.9424 36.0438 17.7621C38.8897 22.5582 40.6851 29.2549 40.6851 36.7103C40.6851 44.1657 38.8897 50.8623 36.0438 55.6581C33.184 60.4781 29.388 63.2041 25.4072 63.2041C21.4265 63.2041 17.6305 60.4781 14.7707 55.6581C11.9248 50.8623 10.1294 44.1657 10.1294 36.7103Z\" stroke=\"black\" stroke-width=\"2.17752\"/>\n          <mask id=\"mask0_350_47\" style=\"mask-type:alpha\" maskUnits=\"userSpaceOnUse\" x=\"9\" y=\"9\" width=\"33\" height=\"56\">\n          <path d=\"M10.1294 36.7103C10.1294 29.2549 11.9248 22.5582 14.7707 17.7621C17.6305 12.9424 21.4265 10.2166 25.4073 10.2166C29.3881 10.2166 33.184 12.9424 36.0438 17.7621C38.8897 22.5582 40.6851 29.2549 40.6851 36.7103C40.6851 44.1657 38.8897 50.8623 36.0438 55.6581C33.184 60.4781 29.388 63.2041 25.4072 63.2041C21.4265 63.2041 17.6305 60.4781 14.7707 55.6581C11.9248 50.8623 10.1294 44.1657 10.1294 36.7103Z\" fill=\"white\" stroke=\"black\" stroke-width=\"2.17752\"/>\n          </mask>\n          <g mask=\"url(#mask0_350_47)\">\n          <path id=\"left-eye\" d=\"M20.4575 36.4566C20.4575 32.8168 22.9779 30.4545 25.4071 30.4545C27.8364 30.4545 30.3568 32.8168 30.3568 36.4566C30.3568 40.0964 27.8364 42.4587 25.4071 42.4587C22.9779 42.4587 20.4575 40.0964 20.4575 36.4566Z\" fill=\"black\" stroke=\"black\" stroke-width=\"5.10075\"/>\n          </g>\n          <path d=\"M38.6606 36.7103C38.6606 29.2549 40.456 22.5582 43.3019 17.7621C46.1617 12.9424 49.9576 10.2166 53.9384 10.2166C57.9191 10.2166 61.7151 12.9424 64.5751 17.7621C67.4211 22.5582 69.2161 29.2549 69.2161 36.7103C69.2161 44.1657 67.4211 50.8623 64.5751 55.6581C61.7151 60.4781 57.9191 63.2041 53.9384 63.2041C49.9576 63.2041 46.1617 60.4781 43.3018 55.6581C40.456 50.8623 38.6606 44.1657 38.6606 36.7103Z\" fill=\"white\" stroke=\"black\" stroke-width=\"2.17752\"/>\n          <mask id=\"mask1_350_47\" style=\"mask-type:alpha\" maskUnits=\"userSpaceOnUse\" x=\"37\" y=\"9\" width=\"34\" height=\"56\">\n          <path d=\"M38.6606 36.7103C38.6607 29.2549 40.456 22.5582 43.3019 17.7621C46.1617 12.9424 49.9577 10.2166 53.9385 10.2166C57.9191 10.2166 61.7151 12.9424 64.5751 17.7621C67.4211 22.5582 69.2161 29.2549 69.2161 36.7103C69.2161 44.1657 67.4211 50.8623 64.5751 55.6581C61.7151 60.4781 57.9191 63.2041 53.9385 63.2041C49.9577 63.2041 46.1617 60.4781 43.3019 55.6581C40.456 50.8623 38.6606 44.1657 38.6606 36.7103Z\" fill=\"white\" stroke=\"black\" stroke-width=\"2.17752\"/>\n          </mask>\n          <g mask=\"url(#mask1_350_47)\">\n          <path id=\"right-eye\" d=\"M48.9888 36.7102C48.9888 33.0704 51.5092 30.7081 53.9385 30.7081C56.3681 30.7081 58.8881 33.0704 58.8881 36.7102C58.8881 40.35 56.3681 42.7123 53.9385 42.7123C51.5092 42.7123 48.9888 40.35 48.9888 36.7102Z\" fill=\"black\" stroke=\"black\" stroke-width=\"5.10075\"/>\n          </g>\n          </g>\n          <defs>\n          <filter id=\"filter0_d_350_47\" x=\"0.344868\" y=\"0.432148\" width=\"78.6555\" height=\"72.5564\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n          <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/>\n          <feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result=\"hardAlpha\"/>\n          <feOffset/>\n          <feGaussianBlur stdDeviation=\"4.34783\"/>\n          <feComposite in2=\"hardAlpha\" operator=\"out\"/>\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0\"/>\n          <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_350_47\"/>\n          <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow_350_47\" result=\"shape\"/>\n          </filter>\n          </defs>\n        </svg>\n      {% endif %}\n    </div>\n\n    {% if text != blank %}\n      <div class=\"back-top-text-{{ section.id }}\">\n        <div class=\"back-top-text_inner-{{ section.id }}\">\n         <p data-text=\"{% for i in (1..text_duplicate) %}{{ text }} {% endfor %}\" id=\"text-{{ section.id }}\"></p>\n        </div>\n      </div>\n    {% endif %}\n  </div>\n</button>\n{% if independent %}</div>{% endif %}\n\n<script>\n  function initBackToTop() {\n    var backToTopArrow = document.querySelector(\n      '.back-top-{{ section.id }}'\n    );\n    backToTopArrow.addEventListener('click', function () {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    });\n    {% unless independent %}\n    // it only shows when the view is 20% from bottom of the page:\n    const precentOfPage = 1 - {{ show_when_precent_of_page }} / 100;\n    if(precentOfPage === 1) {\n      backToTopArrow.classList.add('active');\n    } else {\n      window.addEventListener('scroll', function () {\n        if (\n          window.scrollY >\n          precentOfPage * (document.body.scrollHeight - window.innerHeight)\n        ) {\n          backToTopArrow.classList.add('active');\n        } else {\n          backToTopArrow.classList.remove('active');\n        }\n      });\n    }\n    {% endunless %}\n\n    let text = document.getElementById('text-{{ section.id }}');\n    let str = text.getAttribute('data-text');\n    let coef = 360 / str.length;\n    let maxWidth = 0; // Переменная для хранения максимальной ширины\n    \n    if (text) {\n      for (let i = 0; i < str.length; i++) {\n        let span = document.createElement('span');\n        span.innerHTML = str[i];\n        text.appendChild(span);\n    \n        // Установите временный стиль для span, чтобы получить его ширину\n        span.style.transform = `rotate(${coef * i}deg)`;\n        let spanWidth = span.offsetWidth;\n    \n        // Обновите maxWidth, если текущая ширина больше\n        maxWidth = Math.max(maxWidth, spanWidth);\n      }\n    \n      // Пройдите по всем span и установите им максимальную ширину\n      for (let i = 0; i < text.children.length; i++) {\n        let span = text.children[i];\n        span.style.width = maxWidth + 'px';\n      }\n    }\n    var leftEye = document.getElementById('left-eye');\n    var rightEye = document.getElementById('right-eye');\n\n    document.addEventListener('mousemove', function (e) {\n        moveEye(leftEye, e.clientX, e.clientY);\n        moveEye(rightEye, e.clientX, e.clientY);\n    });\n\n    function moveEye(eye, mouseX, mouseY) {\n        var eyeRect = eye.getBoundingClientRect();\n        var eyeX = eyeRect.left + eyeRect.width / 2;\n        var eyeY = eyeRect.top + eyeRect.height / 2;\n\n        var deltaX = mouseX - eyeX;\n        var deltaY = mouseY - eyeY;\n\n        var userAgent = navigator.userAgent;\n        var isFirefox = userAgent.includes('Firefox');\n        var angle = Math.atan2(deltaY, deltaX);\n        var distance;\n        if(isFirefox) {\n          distance = Math.min(eyeRect.width, eyeRect.height) / (1 * {{ image_size | times: 0.05 }}); \n        } else {\n         distance = Math.min(eyeRect.width, eyeRect.height) / (1 * {{ image_size | times: 0.01 }}); \n        }\n\n        var distance2 = Math.sqrt(deltaX**2 + deltaY**2);\n        var scaleMultiplier = 0.0006;\n        var scaleY = 1 + distance2 * scaleMultiplier;\n      \n\n        var newX = Math.cos(angle) * distance;\n        var newY = Math.sin(angle) * distance;\n\n        eye.style.transform = 'translate(' + newX + 'px, ' + newY + 'px) scaleY(' + scaleY + ')';\n    }\n  }\n  document.addEventListener('DOMContentLoaded', initBackToTop);\n  if (Shopify.designMode) {\n     document.addEventListener('shopify:section:unload', initBackToTop);\n     document.addEventListener('shopify:section:load', initBackToTop);\n  }\n</script>",
  "variables": {
    "independent": {
      "type": "text",
      "default": "",
      "label": "Set as independent block",
      "description": "Set as independent block"
    },
    "independent_distance": {
      "type": "text",
      "default": "0",
      "label": "Distance from the of the section (when set as independent block)",
      "description": "Distance from the of the section (when set as independent block)"
    },
    "hide_on_mobile": {
      "type": "text",
      "default": "false",
      "label": "Hide on mobile?",
      "description": "Hide on mobile?"
    },
    "show_when_precent_of_page": {
      "type": "text",
      "default": "30",
      "label": "Show when the view is X% from bottom of the page",
      "description": "0% means it will always show, 100% means it will never show"
    },
    "position": {
      "type": "text",
      "default": "right",
      "label": "Position",
      "description": "Position"
    },
    "horizontal_dst_to_edge": {
      "type": "text",
      "default": "20",
      "label": "Horizontal Edge Distance",
      "description": "Horizontal Edge Distance"
    },
    "vertical_dst_to_edge": {
      "type": "text",
      "default": "20",
      "label": "Vertical Edge Distance",
      "description": "Vertical Edge Distance"
    },
    "button_border_thickness": {
      "type": "text",
      "default": "0",
      "label": "Button Border Thickness",
      "description": "Button Border Thickness"
    },
    "button_shadow": {
      "type": "text",
      "default": "true",
      "label": "Use Button Shadow",
      "description": "Use Button Shadow"
    },
    "image": {
      "type": "text",
      "default": "",
      "label": "Image",
      "description": "Image"
    },
    "image_size": {
      "type": "text",
      "default": "60",
      "label": "Image Size",
      "description": "Image Size"
    },
    "image_size_mobile": {
      "type": "text",
      "default": "50",
      "label": "Image Size - Mobile",
      "description": "Image Size - Mobile"
    },
    "image_border_radius": {
      "type": "text",
      "default": "0",
      "label": "Image Border Radius",
      "description": "Image Border Radius"
    },
    "text": {
      "type": "text",
      "default": "BACK TO TOP.",
      "label": "Text",
      "description": "Text"
    },
    "text_distance": {
      "type": "text",
      "default": "25",
      "label": "Distance from Image",
      "description": "Distance from Image"
    },
    "text_distance_mobile": {
      "type": "text",
      "default": "25",
      "label": "Distance from Image - Mobile",
      "description": "Distance from Image - Mobile"
    },
    "text_duplicate": {
      "type": "text",
      "default": "3",
      "label": "Duplicate Text",
      "description": "Duplicate Text"
    },
    "text_custom": {
      "type": "text",
      "default": "true",
      "label": "Use Custom Font",
      "description": "Use Custom Font"
    },
    "text_font": {
      "type": "text",
      "default": "assistant_n4",
      "label": "Text Font Family",
      "description": "Text Font Family"
    },
    "text_size": {
      "type": "text",
      "default": "12",
      "label": "Text Size",
      "description": "Text Size"
    },
    "text_size_mobile": {
      "type": "text",
      "default": "12",
      "label": "Text Size - Mobile",
      "description": "Text Size - Mobile"
    },
    "image_animate": {
      "type": "text",
      "default": "never",
      "label": "Rotate the Image",
      "description": "Rotate the Image"
    },
    "image_direction": {
      "type": "text",
      "default": "right",
      "label": "Image Direction of Rotation",
      "description": "Image Direction of Rotation"
    },
    "image_speed": {
      "type": "text",
      "default": "5",
      "label": "Speed of Image Rotation",
      "description": "Speed of Image Rotation"
    },
    "text_animate": {
      "type": "text",
      "default": "hover",
      "label": "Rotate the Text",
      "description": "Rotate the Text"
    },
    "text_direction": {
      "type": "text",
      "default": "right",
      "label": "Text Direction of Rotation",
      "description": "Text Direction of Rotation"
    },
    "text_speed": {
      "type": "text",
      "default": "10",
      "label": "Speed of Text Rotation",
      "description": "Speed of Text Rotation"
    },
    "button_bg_color": {
      "type": "color",
      "default": "#FFFFFF",
      "label": "Button Background Color",
      "description": "Button Background Color"
    },
    "button_border_color": {
      "type": "color",
      "default": "#000000",
      "label": "Button Border Color",
      "description": "Button Border Color"
    },
    "image_bg_color": {
      "type": "color",
      "default": "#FFFFFF",
      "label": "Image Background Color",
      "description": "Image Background Color"
    },
    "text_color": {
      "type": "color",
      "default": "#000000",
      "label": "Text Color",
      "description": "Text Color"
    }
  }
}