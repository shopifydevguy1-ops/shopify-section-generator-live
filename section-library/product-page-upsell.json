{
  "id": "product-page-upsell",
  "name": "Upsell: Mini Add to Cart",
  "description": "Section: Upsell: Mini Add to Cart",
  "tags": [
    "product"
  ],
  "type": "product",
  "liquid_code": "{% if section.blocks.size > 0 %}\n  <style>\n    .complete-look {\n      display: grid;\n      grid-template-columns: 100%;\n      gap: 5px;\n    }\n    .complete-look__form {\n      background-color: #f7f7f7;\n    }\n    .complete-look__wrap {\n      display: flex;\n      align-items: flex-start;\n      padding-right: 15px;\n    }\n    .complete-look__img {\n      max-width: 115px;\n      height: auto;\n      align-self: center;\n    }\n    @media only screen and (min-width: 768px) {\n      .complete-look__img {\n        max-width: 120px;\n      }\n    }\n    .complete-look__product-details {\n      padding: 10px 0 0 10px;\n      flex: 1;\n    }\n    .complete-look__title-wrap {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .complete-look__link {\n      display: block;\n      text-decoration: none !important;\n      padding-right: 10px;\n      line-height: 1.2;\n    }\n    .complete-look__cta {\n      box-shadow: none;\n      cursor: pointer;\n\n      display: inline-block;\n      transition: background-color 0.3s, color 0.3s, border-color 0.3s;\n      font-family: Brandon Black, Helvetica, Arial, sans-serif;\n      text-transform: uppercase;\n      letter-spacing: 1.5px;\n      text-align: center;\n      line-height: 1;\n\n      background-color: #000;\n      border: 2px solid #000;\n      color: #fff;\n\n      font-size: 11px;\n      flex-shrink: 0;\n    }\n    @media only screen and (min-width: 768px) {\n      .complete-look__cta {\n        min-width: 70px;\n        padding: 10px;\n      }\n    }\n  </style>\n  <template id=\"custom-mini-atc\">\n    <div class=\"complete-look\">\n      {% for block in section.blocks %}\n        {% assign product = block.settings.product %}\n        <div data-mini-atc class=\"complete-look__form\">\n          <div class=\"complete-look__wrap\">\n            <img\n              class=\"complete-look__img\"\n              src=\"{{ product.featured_image | img_url: '120x' }}\"\n              alt=\"{{ product.title }}\"\n              width=\"120\"\n              height=\"120\"\n              loading=\"lazy\"\n            >\n            <div class=\"complete-look__product-details\">\n              <div class=\"complete-look__title-wrap\">\n                <a\n                  class=\"complete-look__link\"\n                  href=\"{{ product.url }}\"\n                >\n                  <div class=\"complete-look__product-title\">\n                    {{ product.title }}\n                  </div>\n                  <div\n                    class=\"complete-look__product-price\"\n                  >\n                    <span class=\"money notranslate\">{{ product.price | money_with_currency }}</span>\n                  </div>\n                </a>\n                <button\n                  type=\"submit\"\n                  name=\"add\"\n                  class=\"complete-look__cta\"\n                  data-mini-add-to-cart\n                  data-variant-id=\"{{ product.variants.first.id }}\"\n                >\n                  Add\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      {% endfor %}\n    </div>\n  </template>\n\n  <script>\n    document.addEventListener('DOMContentLoaded', function () {\n      // Copy template content to #mini-atc-target\n      const template = document.querySelector('#custom-mini-atc');\n      const target = document.querySelector('#mini-atc-target');\n      if (template && target) {\n        target.innerHTML = template.innerHTML;\n      }\n      const addToCartButtons = document.querySelectorAll('[data-mini-add-to-cart]');\n      addToCartButtons.forEach(function (button) {\n        button.addEventListener('click', function () {\n          // Use fetch to add product to cart to Shopify\n          const variantId = button.getAttribute('data-variant-id');\n          if (!variantId) return;\n\n          button.innerHTML = 'Adding...';\n\n          fetch('/cart/add.js', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              items: [\n                {\n                  id: variantId,\n                  quantity: 1,\n                },\n              ],\n            }),\n          })\n            .then(function (response) {\n              return response.json();\n            })\n            .then(function (data) {\n              button.innerHTML = 'Added';\n              setTimeout(function () {\n                button.innerHTML = 'Add';\n              }, 2000);\n            })\n            .catch(function (error) {\n              console.error(error);\n              button.innerHTML = 'Error';\n              setTimeout(function () {\n                button.innerHTML = 'Add';\n              }, 2000);\n            });\n        });\n      });\n    });\n  </script>\n{% endif %}",
  "variables": {
    "html": {
      "type": "text",
      "default": "<div id='mini-atc-target'></div>",
      "label": "HTML",
      "description": "Copy and paste the HTML from the template above"
    }
  }
}