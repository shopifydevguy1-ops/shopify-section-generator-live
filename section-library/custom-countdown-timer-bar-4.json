{
  "id": "custom-countdown-timer-bar-4",
  "name": "Countdown timer bar #4",
  "description": "Section: Countdown timer bar #4",
  "tags": [
    "countdown"
  ],
  "type": "custom",
  "liquid_code": "{%- liquid \n  assign padding_horizontal = section.settings.padding_horizontal\n  assign padding_horizontal_mobile = section.settings.padding_horizontal_mobile\n  assign margin_horizontal = section.settings.margin_horizontal\n  assign margin_horizontal_mobile = section.settings.margin_horizontal_mobile\n  assign padding_top = section.settings.padding_top\n  assign padding_bottom = section.settings.padding_bottom\n  assign border_color = section.settings.border_color\n  assign border_thickness = section.settings.border_thickness\n  assign margin_top = section.settings.margin_top\n  assign margin_bottom = section.settings.margin_bottom\n  assign background_color = section.settings.background_color\n  assign background_gradient = section.settings.background_gradient\n  assign full_width = section.settings.full_width\n  assign content_width = section.settings.content_width\n  assign section_radius = section.settings.section_radius\n  assign background_style = section.settings.background_style\n\n  assign position = section.settings.position\n\n  assign hide_close = section.settings.hide_close\n\n  assign close_color = section.settings.close_color\n-%}\n\n{%- style -%}\n  \n  .section-{{ section.id }} {\n    border-top: solid {{ border_color }} {{ border_thickness }}px;\n    border-bottom: solid {{ border_color }} {{ border_thickness }}px;\n    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px;\n    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px;\n    margin-left: {{ margin_horizontal_mobile }}rem;\n    margin-right: {{ margin_horizontal_mobile }}rem;\n    border-radius: {{ section_radius | times: 0.6 | round: 0 }}px;\n    overflow: hidden;\n  }\n\n  .section-{{ section.id }}-settings {\n    margin: 0 auto;\n    position: relative;\n    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;\n    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;\n    padding-left: {{ padding_horizontal_mobile }}rem;\n    padding-right: {{ padding_horizontal_mobile }}rem;\n  }\n\n  .countdown-timer-content-{{ section.id }} {\n    position: relative;\n    display: flex;\n    align-items: center;\n    gap: 20px;\n    justify-content: space-between;\n    flex-direction: column;\n  }\n\n  .timer-close-{{ section.id }} {\n    position: absolute;\n    top: 0;\n    right: -10px;\n    z-index: 9999;\n    cursor: pointer;\n    width: 20px;\n    height: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 4px;\n  }\n\n  .timer-close-{{ section.id }} svg {\n    display: block;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  .timer-close-{{ section.id }} svg rect {\n    fill: {{ close_color }};\n  }\n\n  @media(min-width: 1024px) {\n    .section-{{ section.id }} {\n      margin-top: {{ margin_top }}px;\n      margin-bottom: {{ margin_bottom }}px;      \n      margin-left: {{ margin_horizontal }}rem;\n      margin-right: {{ margin_horizontal }}rem;\n      border-radius: {{ section_radius }}px;\n    }\n\n    .section-{{ section.id }}-settings {\n      padding: 0 5rem;\n      padding-top: {{ padding_top }}px;\n      padding-bottom: {{ padding_bottom }}px;\n      padding-left: {{ padding_horizontal }}rem;\n      padding-right: {{ padding_horizontal }}rem;\n    }\n\n    .countdown-timer-content-{{ section.id }} {  \n      flex-direction: row;\n    }\n\n    .timer-close-{{ section.id }} {\n      right: -30px;\n    }\n  }\n  \n{%- endstyle -%}\n\n{% unless full_width %}\n  <style>\n    .section-{{ section.id }}-settings {\n      max-width: {{ content_width }}px;\n    }\n  </style>\n{% endunless %}\n\n{% if margin_horizontal_mobile > 0 %}\n  <style>\n    .section-{{ section.id }} {\n      border-left: solid {{ border_color }} {{ border_thickness }}px;\n      border-right: solid {{ border_color }} {{ border_thickness }}px;\n    }\n    \n    @media(min-width: 1024px) {\n      .section-{{ section.id }} {\n        border-left: 0px;\n        border-right: 0px;\n      }\n    }\n  </style>\n{% endif %}\n\n{% if margin_horizontal > 0 %}\n  <style>\n    @media(min-width: 1024px) {\n      .section-{{ section.id }} {\n        border-left: solid {{ border_color }} {{ border_thickness }}px;\n        border-right: solid {{ border_color }} {{ border_thickness }}px;\n      }\n    }\n  </style>\n{% endif %}\n\n{% if position == \"fixed_bottom\" %}\n  <style>\n    .countdown-timer-{{ section.id }} {\n      position: fixed;\n      left: 0;\n      bottom: 0;\n      z-index: 999;\n      width: calc(100% - {{ margin_horizontal_mobile | times: 2 }}rem);\n    }\n\n    @media(min-width: 1024px) {\n      .countdown-timer-{{ section.id }} {\n        width: calc(100% - {{ margin_horizontal | times: 2 }}rem);\n      }\n    }\n  </style>\n{% endif %}\n\n{% for block in section.blocks %}\n  {% case block.type %}\n    {% when 'badge' %}\n       <style>\n        {{  block.settings.badge_font | font_face: font_display: 'swap' }}\n\n        .countdown-badge-{{ block.id }} {\n          padding: {{ block.settings.badge_padding_vertical_mobile }}px {{ block.settings.badge_padding_horizontal_mobile }}px;\n          background-color: {{ block.settings.badge_bg_color }};\n          border-radius: {{ block.settings.badge_radius }}px;\n          border: {{ block.settings.badge_border_thickness }}px solid {{ block.settings.badge_border_color }};\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .countdown-badge-{{ block.id }} * {          \n          margin: 0;            \n          font-size: {{ block.settings.badge_size_mobile }}px;\n          color: {{ block.settings.badge_color }};\n          line-height: {{ block.settings.badge_height }}%;\n          text-transform: unset;\n          text-decoration: none;\n          word-break: break-word;\n        }          \n\n        @media(min-width: 1024px) {\n          .countdown-badge-{{ block.id }} {\n            padding: {{ block.settings.badge_padding_vertical }}px {{ block.settings.badge_padding_horizontal }}px;\n          }\n\n          .countdown-badge-{{ block.id }} * {                \n            font-size: {{ block.settings.badge_size }}px;\n          }  \n        }\n      </style>\n\n      {% if block.settings.badge_custom %}\n        <style>\n          .countdown-badge-{{ block.id }} * {\n            font-family: {{ block.settings.badge_font.family }}, {{ block.settings.badge_font.fallback_families }};\n            font-weight: {{ block.settings.badge_font.weight }};\n            font-style: {{ block.settings.badge_font.style }};\n          }\n        </style>\n      {% endif %}\n\n    {% when 'text' %}\n      <style>\n        {{  block.settings.text_font | font_face: font_display: 'swap' }}\n\n        .countdown-text-{{ block.id }} {\n          text-align: {{ block.settings.text_align_mobile }};\n        }\n\n        .countdown-text-{{ block.id }} * {          \n          margin: 0;            \n          font-size: {{ block.settings.text_size_mobile }}px;\n          color: {{ block.settings.text_color }};\n          line-height: {{ block.settings.text_height }}%;\n          text-transform: unset;\n          text-decoration: none;\n          word-break: break-word;\n        }  \n\n        .countdown-text-{{ block.id }} strong {\n          color: {{ block.settings.text_active_color }};\n        }\n\n        @media(min-width: 1024px) {\n          .countdown-text-{{ block.id }} {\n            text-align: {{ block.settings.text_align }};\n          }\n\n          .countdown-text-{{ block.id }} * {                \n            font-size: {{ block.settings.text_size }}px;\n          }  \n        }\n      </style>\n\n      {% if block.settings.text_custom %}\n        <style>\n          .countdown-text-{{ block.id }} * {\n            font-family: {{ block.settings.text_font.family }}, {{ block.settings.text_font.fallback_families }};\n            font-weight: {{ block.settings.text_font.weight }};\n            font-style: {{ block.settings.text_font.style }};\n          }\n        </style>\n      {% endif %}\n\n    {% when 'timer' %}      \n      <style>\n        {{  block.settings.number_font | font_face: font_display: 'swap' }}\n        {{  block.settings.text_font | font_face: font_display: 'swap' }}\n        {{  block.settings.completed_text_font | font_face: font_display: 'swap' }}\n        \n        .countdown-timer-{{ block.id }} {\n          display: flex;\n          align-items: stretch;\n          gap: {{ block.settings.timer_gap_mobile}}px;\n\n        }\n\n        .countdown-timer-{{ block.id }} .time-block {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          text-align: center;\n          width: 100%;\n          background-color: {{ block.settings.item_bg_color }};\n          border-radius: {{ block.settings.item_radius }}px;\n          border: {{ block.settings.item_border_thickness }}px solid {{ block.settings.item_border_color }};\n          padding: {{ block.settings.item_padding_vertical_mobile }}px {{ block.settings.item_padding_horizontal_mobile }}px;\n        }\n\n        .countdown-timer-{{ block.id }} .time-block__num {\n          margin: 0;\n          font-size: {{ block.settings.number_size_mobile }}px;\n          color: {{ block.settings.number_color }};\n          line-height: {{ block.settings.number_height }}%;\n          text-transform: unset;\n        }\n        \n        .countdown-timer-{{ block.id }} .time-block__unit {\n          margin: 0;\n          font-size: {{ block.settings.text_size_mobile }}px;\n          color: {{ block.settings.text_color }};\n          line-height: {{ block.settings.text_height }}%;\n          text-transform: unset;\n        }\n\n        .countdown-timer-completed-text-{{ block.id }} * {\n          margin: 0;\n          font-size: {{ block.settings.completed_text_size_mobile }}px;\n          color: {{ block.settings.completed_text_color }};\n          line-height: {{ block.settings.completed_text_height }}%;\n          text-transform: unset;\n        }\n\n        @media(min-width: 1024px) {\n          .countdown-timer-{{ block.id }} {\n            gap: {{ block.settings.timer_gap }}px;\n          }\n\n          .countdown-timer-{{ block.id }} .time-block {\n            padding: {{ block.settings.item_padding_vertical }}px {{ block.settings.item_padding_horizontal }}px;\n          }\n\n          .countdown-timer-{{ block.id }} .time-block__num {\n            font-size: {{ block.settings.number_size }}px;\n          }\n\n          .countdown-timer-{{ block.id }} .time-block__unit {\n            font-size: {{ block.settings.text_size }}px;\n          }\n\n          .countdown-timer-completed-text-{{ block.id }} * {\n            font-size: {{ block.settings.completed_text_size }}px;\n          }\n        }\n      </style>\n\n      {% if block.settings.number_custom %}\n        <style>\n          .countdown-timer-{{ block.id }} .time-block__num {\n            font-family: {{ block.settings.number_font.family }}, {{ block.settings.number_font.fallback_families }};\n            font-weight: {{ block.settings.number_font.weight }};\n            font-style: {{ block.settings.number_font.style }};\n          }\n        </style>\n      {% endif %}\n\n      {% if block.settings.text_custom %}\n        <style>\n          .countdown-timer-{{ block.id }} .time-block__unit {\n            font-family: {{ block.settings.text_font.family }}, {{ block.settings.text_font.fallback_families }};\n            font-weight: {{ block.settings.text_font.weight }};\n            font-style: {{ block.settings.text_font.style }};\n          }\n        </style>\n      {% endif %}\n\n      {% if block.settings.completed_text_custom %}\n        <style>\n          .countdown-timer-completed-text-{{ block.id }} * {\n            font-family: {{ block.settings.completed_text_font.family }}, {{ block.settings.completed_text_font.fallback_families }};\n            font-weight: {{ block.settings.completed_text_font.weight }};\n            font-style: {{ block.settings.completed_text_font.style }};\n          }\n        </style>\n      {% endif %}\n    \n    {% else %}\n      \n  {% endcase %}\n{% endfor %}\n\n{% if position == \"class\" %}\n<template id=\"countdown-timer-template-{{ section.id }}\">\n{% endif %}\n  <div class=\"section-{{ section.id }} countdown-timer-{{ section.id }}\" {% if background_style == 'solid' %}style=\"background-color:{{ background_color }};\"{% else %} style=\"background-image: {{ background_gradient }};\"{% endif %}>\n    <div class=\"section-{{ section.id }}-settings\">  \n      <div class=\"countdown-timer-content-{{ section.id }}\">\n        {% unless hide_close %}\n          <div class=\"timer-close-{{ section.id }}\">\n            <svg viewBox=\"0 0 22 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 text-white\"><rect x=\"1.25391\" y=\"19.4238\" width=\"25\" height=\"4\" transform=\"rotate(-45 1.25391 19.4238)\" fill=\"currentColor\"></rect><rect x=\"4.08203\" y=\"1.74609\" width=\"25\" height=\"4\" transform=\"rotate(45 4.08203 1.74609)\" fill=\"currentColor\"></rect></svg>\n          </div>\n        {% endunless %}\n        {% for block in section.blocks %}\n          {% case block.type %}\n            {% when 'timer' %}\n              <div class=\"countdown-timer-{{ block.id }}\">\n\n                <div class=\"time-block time-block-{{ section.id }}\">\n                  <span class=\"time-block__num js-timer-days\">00</span>\n                  <span class=\"time-block__unit\">{{ block.settings.days_text }}</span>\n                </div>\n                <div class=\"time-block time-block-{{ section.id }}\">\n                  <span class=\"time-block__num js-timer-hours\">00</span>\n                  <span class=\"time-block__unit\">{{ block.settings.hours_text }}</span>\n                </div>\n                <div class=\"time-block time-block-{{ section.id }}\">\n                  <span class=\"time-block__num js-timer-minutes\">00</span>\n                  <span class=\"time-block__unit\">{{ block.settings.minutes_text }}</span>\n                </div>\n                <div class=\"time-block time-block-{{ section.id }}\">\n                  <span class=\"time-block__num js-timer-seconds\">00</span>\n                  <span class=\"time-block__unit\">{{ block.settings.seconds_text }}</span>\n                </div>\n              </div>\n    \n              <style>\n                .countdown-timer-completed-text-{{ block.id }} {\n                  display: none;\n                }\n              </style>\n\n              <div\n                class=\"countdown-timer-completed-text-{{ block.id }}\"\n              >\n                {{ block.settings.timer_completed_text }}\n              </div>\n            \n            {% when 'text' %}\n              {% if block.settings.text != blank %}\n                <div class=\"countdown-text-{{ block.id }}\">{{ block.settings.text }}</div>\n              {% endif %} \n            {% when 'badge' %} \n              {% if block.settings.badge != blank %}\n                <div class=\"countdown-badge-{{ block.id }}\">{{ block.settings.badge }}</div>\n              {% endif %}  \n            \n            {% else %}\n              \n          {% endcase %}\n        {% endfor %}\n      </div>     \n    </div>\n  </div>\n{% if position == \"class\" %}\n</template>\n{% endif %}\n\n<div id=\"countdown-timer-local-target-{{ section.id }}\"></div>\n\n{% for block in section.blocks %}\n  {% if block.type == 'timer' %}\n    <script>\n      function initCountdownTimerBar4() {\n        setTimeout(() => {\n          {% if position == \"class\" %}\n            let cssTarget = '{{ section.settings.insert_css_class_target }}';\n            let productForm = cssTarget\n              ? document.querySelector(cssTarget)\n              : document.querySelector('#countdown-timer-local-target-{{ section.id }}');\n\n            if (!productForm) return;\n\n            const templateContent = document.querySelector(\n              '#countdown-timer-template-{{ section.id }}'\n            ).content;\n\n            productForm.insertAdjacentElement(\n              'beforebegin',\n              templateContent.firstElementChild\n            );\n          {% endif %}\n\n          let section = document.querySelector('.countdown-timer-{{ section.id }}');\n\n          let close = document.querySelector('.timer-close-{{ section.id }}');\n\n          if(close) {\n            close.addEventListener('click', () => {\n              section.style.display = \"none\";\n            })\n          }\n\n          function adjustTimeBlockWidths() {\n            const timeBlocks = document.querySelectorAll('.time-block-{{ section.id }}');\n            if (timeBlocks.length === 0) return;\n\n            let maxWidth = 0;\n\n            timeBlocks.forEach(block => {\n              block.style.width = '';\n            });\n\n            timeBlocks.forEach(block => {\n              const currentWidth = block.offsetWidth;\n              if (currentWidth > maxWidth) {\n                maxWidth = currentWidth;\n              }\n            });\n\n            timeBlocks.forEach(block => {\n              block.style.width = `${maxWidth}px`;\n            });\n          }\n\n          function startTimer() {\n            const second = 1000,\n              minute = second * 60,\n              hour = minute * 60,\n              day = hour * 24,\n              wrapper = document.querySelector(\n                '.countdown-timer-{{ block.id }}'\n              ),\n              countDown = new Date('{{ block.settings.year }}-{{ block.settings.month }}-{{ block.settings.day }}T{{ block.settings.hour }}:{{ block.settings.minute }}:00Z').getTime();\n\n            if (!wrapper) {\n              return;\n            }\n\n            const interval = setInterval(function () {\n              let now = new Date().getTime(),\n                distance = countDown - now,\n                days = Math.floor(distance / day),\n                hours = Math.floor((distance % day) / hour),\n                minutes = Math.floor((distance % hour) / minute),\n                seconds = Math.floor((distance % minute) / second);\n\n              if (wrapper.querySelector('.js-timer-days')) wrapper.querySelector('.js-timer-days').innerText = (days);\n              if (wrapper.querySelector('.js-timer-hours')) wrapper.querySelector('.js-timer-hours').innerText = (hours);\n              if (wrapper.querySelector('.js-timer-minutes')) wrapper.querySelector('.js-timer-minutes').innerText = (minutes);\n              if (wrapper.querySelector('.js-timer-seconds')) wrapper.querySelector('.js-timer-seconds').innerText = (seconds);\n\n\n              if (distance < 0) {\n                if (wrapper.querySelector('.js-timer-days')) wrapper.querySelector('.js-timer-days').innerText = '00';\n                if (wrapper.querySelector('.js-timer-hours')) wrapper.querySelector('.js-timer-hours').innerText = '00';\n                if (wrapper.querySelector('.js-timer-minutes')) wrapper.querySelector('.js-timer-minutes').innerText = '00';\n                if (wrapper.querySelector('.js-timer-seconds')) wrapper.querySelector('.js-timer-seconds').innerText = '00';\n\n                {% if block.settings.hide_timer_on_completed %}\n                  wrapper.style.display = 'none';\n                {% endif %}\n                const completedText = document.querySelector(\n                  '.countdown-timer-completed-text-{{ block.id }}'\n                );\n                if (completedText) completedText.style.display = 'block';\n\n                clearInterval(interval);\n              }\n\n              adjustTimeBlockWidths();\n\n            }, second);\n\n            setTimeout(adjustTimeBlockWidths, 10);\n\n            document.addEventListener('shopify:section:unload', function (event) {\n              if (event.detail.sectionId === '{{ section.id }}') clearInterval(interval);\n            });\n          }\n\n          startTimer();\n\n          let resizeTimeout;\n          window.addEventListener('resize', () => {\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(adjustTimeBlockWidths, 250);\n          });\n\n          if (window.Shopify && Shopify.designMode) {\n            document.addEventListener('shopify:section:load', function (event) {\n              if (event.detail.sectionId === '{{ section.id }}') {\n                startTimer();\n                setTimeout(adjustTimeBlockWidths, 50);\n              }\n            });\n          }\n\n        }, 500);\n      }\n      document.addEventListener('DOMContentLoaded', initCountdownTimerBar4);\n    </script>\n  {% endif %}\n{% endfor %}",
  "variables": {
    "position": {
      "type": "text",
      "default": "static",
      "label": "Position",
      "description": "Position"
    },
    "insert_css_class_target": {
      "type": "text",
      "default": ".header, .pageheader, .section-header, #announcement, .toolbar, .header__wrapper",
      "label": "Target CSS Class",
      "description": "Empty this text field to drag section into desired position. This is for older themes without the ability to add sections directly in the header area."
    },
    "hide_close": {
      "type": "text",
      "default": "true",
      "label": "Hide close button",
      "description": "Hide close button"
    },
    "close_color": {
      "type": "color",
      "default": "#FFFFFF",
      "label": "Close button",
      "description": "Close button"
    },
    "background_style": {
      "type": "text",
      "default": "solid",
      "label": "Background style",
      "description": "Background style"
    },
    "background_color": {
      "type": "color",
      "default": "#303030",
      "label": "Background",
      "description": "Background"
    },
    "background_gradient": {
      "type": "color",
      "default": "linear-gradient(180deg, #707070, #303030 100%)",
      "label": "Gradient",
      "description": "Gradient"
    },
    "border_color": {
      "type": "color",
      "default": "#121212",
      "label": "Border",
      "description": "Border"
    },
    "margin_top": {
      "type": "text",
      "default": "0",
      "label": "Top",
      "description": "Top"
    },
    "margin_bottom": {
      "type": "text",
      "default": "0",
      "label": "Bottom",
      "description": "Bottom"
    },
    "margin_horizontal": {
      "type": "text",
      "default": "0",
      "label": "Sides",
      "description": "Sides"
    },
    "margin_horizontal_mobile": {
      "type": "text",
      "default": "0",
      "label": "Sides - mobile",
      "description": "Sides - mobile"
    },
    "padding_top": {
      "type": "text",
      "default": "10",
      "label": "Top",
      "description": "Top"
    },
    "padding_bottom": {
      "type": "text",
      "default": "10",
      "label": "Bottom",
      "description": "Bottom"
    },
    "padding_horizontal": {
      "type": "text",
      "default": "5",
      "label": "Sides",
      "description": "Sides"
    },
    "padding_horizontal_mobile": {
      "type": "text",
      "default": "1.5",
      "label": "Sides - mobile",
      "description": "Sides - mobile"
    },
    "full_width": {
      "type": "text",
      "default": "true",
      "label": "Full width",
      "description": "Full width"
    },
    "content_width": {
      "type": "text",
      "default": "1200",
      "label": "Content width",
      "description": "Content width"
    },
    "border_thickness": {
      "type": "text",
      "default": "0",
      "label": "Border thickness",
      "description": "Border thickness"
    },
    "section_radius": {
      "type": "text",
      "default": "0",
      "label": "Roundness",
      "description": "Roundness"
    }
  }
}