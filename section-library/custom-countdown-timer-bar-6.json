{
  "id": "custom-countdown-timer-bar-6",
  "name": "Countdown Timer Bar 6",
  "description": "Section: Countdown Timer Bar 6",
  "tags": [
    "countdown"
  ],
  "type": "custom",
  "liquid_code": "{%- liquid \r\n  assign padding_top = section.settings.padding_top\r\n  assign padding_bottom = section.settings.padding_bottom\r\n  assign border_color = section.settings.border_color\r\n  assign border_thickness = section.settings.border_thickness\r\n  assign margin_top = section.settings.margin_top\r\n  assign margin_bottom = section.settings.margin_bottom\r\n  assign margin_horizontal = section.settings.margin_horizontal\r\n  assign margin_horizontal_mobile = section.settings.margin_horizontal_mobile\r\n  assign background_color = section.settings.background_color\r\n  assign background_gradient = section.settings.background_gradient\r\n  assign content_width = section.settings.content_width\r\n  assign width = section.settings.width\r\n  assign section_radius = section.settings.section_radius\r\n  assign background_style = section.settings.background_style\r\n\r\n  assign position = section.settings.position\r\n  assign content_align_mobile = section.settings.content_align_mobile\r\n  assign content_mt_mobile = section.settings.content_mt_mobile\r\n\r\n  assign content_horizontal_align_mobile = \"\"\r\n  if content_align_mobile == \"center\"\r\n    assign content_horizontal_align_mobile = \"center\"\r\n  elsif content_align_mobile == \"right\"\r\n    assign content_horizontal_align_mobile = \"end\"\r\n  else\r\n    assign content_horizontal_align_mobile = \"start\"\r\n  endif\r\n\r\n  assign scrolling_velocity = section.settings.scrolling_velocity\r\n  assign scrolling_velocity_mobile = section.settings.scrolling_velocity_mobile\r\n  assign scrolling_gap = section.settings.scrolling_gap\r\n  assign scrolling_gap_mobile = section.settings.scrolling_gap_mobile\r\n  assign reverse_direction = section.settings.reverse_direction\r\n  assign pause_hover = section.settings.pause_hover\r\n-%}\r\n\r\n{%- style -%}\r\n  \r\n  .section-{{ section.id }} {  \r\n    margin-top: {{ margin_top | times: 0.75 | round: 0 }}px;\r\n    margin-bottom: {{ margin_bottom | times: 0.75 | round: 0 }}px;\r\n    margin-left: {{ margin_horizontal_mobile }}rem;\r\n    margin-right: {{ margin_horizontal_mobile }}rem;    \r\n  }\r\n\r\n  .section-{{ section.id }}-settings {\r\n    margin: 0 auto;\r\n    position: relative;\r\n    border-top: solid {{ border_color }} {{ border_thickness }}px;\r\n    border-bottom: solid {{ border_color }} {{ border_thickness }}px;\r\n    padding-top: {{ padding_top | times: 0.75 | round: 0 }}px;\r\n    padding-bottom: {{ padding_bottom | times: 0.75 | round: 0 }}px;\r\n    border-radius: {{ section_radius | times: 0.6 | round: 0 }}px;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .countdown-timer-content-{{ section.id }} {\r\n    position: relative;\r\n    display: flex;\r\n    align-items: {{ content_horizontal_align_mobile }};\r\n    gap: 20px;\r\n    justify-content: space-between;\r\n    flex-direction: column;\r\n  }\r\n   \r\n  .timer-wrapper-{{ section.id }} {\r\n    position: relative;\r\n    z-index: 1;\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    scrollbar-width: none;\r\n    -ms-flex-wrap: nowrap;\r\n    flex-wrap: nowrap;\r\n    gap: {{ scrolling_gap_mobile }}px;\r\n    background-attachment: scroll !important;\r\n  }\r\n\r\n  .timer-list-{{ section.id }} {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    white-space: nowrap;\r\n    height: 100%;\r\n    gap: {{ scrolling_gap_mobile }}px;\r\n    background-attachment: scroll !important;\r\n    -webkit-animation: ticker{{ section.id | replace: '-', '' }} {{ scrolling_velocity_mobile }}s infinite linear;\r\n    animation: ticker{{ section.id | replace: '-', '' }} {{ scrolling_velocity_mobile }}s infinite linear;\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  @media(min-width: 1024px) {\r\n    .section-{{ section.id }} {\r\n      margin-top: {{ margin_top }}px;\r\n      margin-bottom: {{ margin_bottom }}px;      \r\n      margin-left: {{ margin_horizontal }}rem;\r\n      margin-right: {{ margin_horizontal }}rem;\r\n      border-radius: {{ section_radius }}px;\r\n    }\r\n\r\n    .section-{{ section.id }}-settings {\r\n      padding: 0 5rem;\r\n      padding-top: {{ padding_top }}px;\r\n      padding-bottom: {{ padding_bottom }}px;\r\n    }\r\n\r\n    .countdown-timer-content-{{ section.id }} {  \r\n      flex-direction: row;\r\n      align-items: center;\r\n    }\r\n\r\n    .timer-wrapper-{{ section.id }} {\r\n      gap: {{ scrolling_gap }}px;\r\n    }\r\n\r\n    .timer-list-{{ section.id }} {\r\n      gap: {{ scrolling_gap }}px;\r\n      -webkit-animation: ticker{{ section.id | replace: '-', '' }} {{ scrolling_velocity }}s infinite linear;\r\n      animation: ticker{{ section.id | replace: '-', '' }} {{ scrolling_velocity }}s infinite linear;\r\n    }\r\n  }\r\n  \r\n{%- endstyle -%}\r\n\r\n{% if margin_horizontal_mobile > 0 %}\r\n  <style>\r\n    .section-{{ section.id }} {\r\n      border-left: solid {{ border_color }} {{ border_thickness }}px;\r\n      border-right: solid {{ border_color }} {{ border_thickness }}px;\r\n    }\r\n    \r\n    @media(min-width: 1024px) {\r\n      .section-{{ section.id }} {\r\n        border-left: 0px;\r\n        border-right: 0px;\r\n      }\r\n    }\r\n  </style>\r\n{% endif %}\r\n\r\n{% if margin_horizontal > 0 %}\r\n  <style>\r\n    @media(min-width: 1024px) {\r\n      .section-{{ section.id }} {\r\n        border-left: solid {{ border_color }} {{ border_thickness }}px;\r\n        border-right: solid {{ border_color }} {{ border_thickness }}px;\r\n      }\r\n    }\r\n  </style>\r\n{% endif %}\r\n\r\n{% if width == 'custom' %}\r\n  <style>\r\n    .section-{{ section.id }}-settings {\r\n      max-width: {{ content_width }}px;\r\n    }\r\n  </style>\r\n{% elsif width == 'page' %}\r\n  <style>\r\n    .section-{{ section.id }}-settings {\r\n      max-width: var(--page-width);\r\n    }\r\n  </style>\r\n{% endif %}\r\n\r\n\r\n{% if reverse_direction %}\r\n  <style>\r\n    @keyframes ticker{{ section.id | replace: '-', '' }} {\r\n      0% {\r\n        transform: translateX(-100%);\r\n      }\r\n      100% {\r\n        transform: translateX(0%);\r\n      }\r\n    }\r\n  </style>\r\n{% else %}\r\n  <style>\r\n    @keyframes ticker{{ section.id | replace: '-', '' }} {\r\n      0% {\r\n        transform: translateX(0%);\r\n      }\r\n      100% {\r\n        transform: translateX(-100%);\r\n      }\r\n    }\r\n  </style>\r\n{% endif %}\r\n\r\n{% if pause_hover %}\r\n\t<style>\r\n    @media(min-width: 1024px) {\r\n      .timer-wrapper-{{ section.id }}:hover .timer-list-{{ section.id }} {\r\n        animation-play-state: paused;\r\n      }\r\n    } \r\n\t</style>\r\n{% endif %}\r\n\r\n{% if position == \"fixed_bottom\" %}\r\n  <style>\r\n    .countdown-timer-{{ section.id }} {\r\n      position: fixed;\r\n      left: 0;\r\n      bottom: 0;\r\n      z-index: 999;\r\n      width: calc(100% - {{ margin_horizontal_mobile | times: 2 }}rem);\r\n    }\r\n\r\n    @media(min-width: 1024px) {\r\n      .countdown-timer-{{ section.id }} {\r\n        width: calc(100% - {{ margin_horizontal | times: 2 }}rem);\r\n      }\r\n    }\r\n  </style>\r\n{% endif %}\r\n\r\n{% for block in section.blocks %}\r\n  {% case block.type %}\r\n    {% when 'text' %}\r\n      <style>\r\n        .countdown-text-{{ block.id }} {\r\n          text-align: {{ content_align_mobile }};\r\n          max-width: {{ block.settings.text_max_width_mobile }}%;\r\n        }\r\n\r\n        .countdown-text-{{ block.id }} * {          \r\n          margin: 0;            \r\n          font-size: {{ block.settings.text_size_mobile }}px;\r\n          color: {{ block.settings.text_color }};\r\n          line-height: {{ block.settings.text_height }}%;\r\n          text-transform: unset;\r\n          word-break: break-word;\r\n        }  \r\n\r\n        .countdown-text-{{ block.id }} strong {\r\n          color: {{ block.settings.text_accent_color }};\r\n          background-color: {{ block.settings.text_accent_bg_color }};\r\n          padding: 5px;\r\n          border-radius: {{ block.settings.text_accent_roundness }}px;\r\n        }\r\n\r\n        @media(min-width: 1024px) {\r\n          .countdown-text-{{ block.id }} {\r\n            text-align: {{ block.settings.text_align }};\r\n            max-width: {{ block.settings.text_max_width }}%;\r\n          }\r\n\r\n          .countdown-text-{{ block.id }} * {                \r\n            font-size: {{ block.settings.text_size }}px;\r\n          }  \r\n        }\r\n      </style>\r\n\r\n      {% if block.settings.text_custom %}\r\n        <style>\r\n          {{  block.settings.text_font | font_face: font_display: 'swap' }}\r\n          .countdown-text-{{ block.id }} * {\r\n            font-family: {{ block.settings.text_font.family }}, {{ block.settings.text_font.fallback_families }};\r\n            font-weight: {{ block.settings.text_font.weight }};\r\n            font-style: {{ block.settings.text_font.style }};\r\n          }\r\n        </style>\r\n      {% endif %}\r\n\r\n    {% when 'timer' %}      \r\n      <style>\r\n        .countdown-timer-wrapper-{{ block.id }} {\r\n          width: 100%;\r\n          justify-content: {{ content_horizontal_align_mobile }};\r\n          display: flex;\r\n          gap: 10px;\r\n          align-items: center;\r\n        }\r\n        \r\n        .countdown-timer-{{ block.id }} {\r\n          display: flex;\r\n          align-items: stretch;\r\n          gap: {{ block.settings.timer_gap_mobile}}px;\r\n\r\n        }\r\n\r\n        .countdown-timer-{{ block.id }} .time-block {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: stretch;\r\n          justify-content: center;\r\n          text-align: center; \r\n          width: {{ block.settings.item_width_mobile }}px;              \r\n        }\r\n\r\n        .countdown-timer-{{ block.id }} .time-block__num {\r\n          margin: 0;          \r\n          font-size: {{ block.settings.number_size_mobile }}px;\r\n          color: {{ block.settings.number_color }};\r\n          line-height: {{ block.settings.number_height }}%;\r\n          text-transform: unset;\r\n        }\r\n        \r\n        .countdown-timer-{{ block.id }} .time-block__unit {\r\n          margin: 0;\r\n          font-size: {{ block.settings.text_size_mobile }}px;\r\n          color: {{ block.settings.text_color }};\r\n          line-height: {{ block.settings.text_height }}%;\r\n          text-transform: unset;\r\n          word-break: break-word;\r\n        }\r\n\r\n        .countdown-completed-text-{{ block.id }} {\r\n          display: none;\r\n        }\r\n\r\n        .countdown-completed-text-{{ block.id }} * {\r\n          margin: 0;\r\n          font-size: {{ block.settings.completed_text_size_mobile }}px;\r\n          color: {{ block.settings.completed_text_color }};\r\n          line-height: {{ block.settings.completed_text_height }}%;\r\n          text-transform: unset;\r\n          text-align: {{ content_align_mobile }};\r\n        }\r\n\r\n        .countdown-completed-text-{{ block.id }}.active {\r\n          display: block;\r\n        }\r\n\r\n        \r\n        .countdown-timer-text-{{ block.id }} * {\r\n          margin: 0;\r\n          font-size: {{ block.settings.number_size_mobile }}px;\r\n          color: {{ block.settings.text_color }};\r\n          line-height: {{ block.settings.number_height }}%;\r\n          text-transform: unset;\r\n        }\r\n\r\n        .countdown-timer-{{ block.id }} .time-block__num.colons {\r\n          font-size: {{ block.settings.number_size_mobile | times: 0.8 }}px;\r\n        }\r\n\r\n        @media(min-width: 1024px) {\r\n          .countdown-timer-{{ block.id }} {\r\n            gap: {{ block.settings.timer_gap }}px;\r\n          }\r\n\r\n          .countdown-timer-{{ block.id }} .time-block {\r\n            width: {{ block.settings.item_width }}px;      \r\n          }\r\n\r\n          .countdown-timer-{{ block.id }} .time-block__num { \r\n            font-size: {{ block.settings.number_size }}px;\r\n          }\r\n\r\n          .countdown-timer-{{ block.id }} .time-block__unit {\r\n            font-size: {{ block.settings.text_size }}px;\r\n          }\r\n\r\n          .countdown-completed-text-{{ block.id }} * {\r\n            font-size: {{ block.settings.completed_text_size }}px;\r\n          }\r\n\r\n           .countdown-timer-text-{{ block.id }} * {\r\n            font-size: {{ block.settings.number_size }}px;\r\n          }\r\n\r\n          .countdown-timer-{{ block.id }} .time-block__num.colons {\r\n            font-size: {{ block.settings.number_size | times: 0.8 }}px;\r\n          }\r\n        }\r\n      </style>\r\n\r\n      {% if block.settings.number_custom %}\r\n        <style>\r\n          {{  block.settings.number_font | font_face: font_display: 'swap' }}\r\n\r\n          .countdown-timer-{{ block.id }} .time-block__num,\r\n          .countdown-timer-text-{{ block.id }} * {\r\n            font-family: {{ block.settings.number_font.family }}, {{ block.settings.number_font.fallback_families }};\r\n            font-weight: {{ block.settings.number_font.weight }};\r\n            font-style: {{ block.settings.number_font.style }};\r\n          }\r\n        </style>\r\n      {% endif %}\r\n\r\n      {% if block.settings.text_custom %}\r\n        <style>\r\n          {{  block.settings.text_font | font_face: font_display: 'swap' }}\r\n\r\n          .countdown-timer-{{ block.id }} .time-block__unit {\r\n            font-family: {{ block.settings.text_font.family }}, {{ block.settings.text_font.fallback_families }};\r\n            font-weight: {{ block.settings.text_font.weight }};\r\n            font-style: {{ block.settings.text_font.style }};\r\n          }\r\n        </style>\r\n      {% endif %}\r\n\r\n      {% if block.settings.completed_text_custom %}\r\n        <style>          \r\n          {{  block.settings.completed_text_font | font_face: font_display: 'swap' }}\r\n          \r\n          .countdown-completed-text-{{ block.id }} * {\r\n            font-family: {{ block.settings.completed_text_font.family }}, {{ block.settings.completed_text_font.fallback_families }};\r\n            font-weight: {{ block.settings.completed_text_font.weight }};\r\n            font-style: {{ block.settings.completed_text_font.style }};\r\n          }\r\n        </style>\r\n      {% endif %}\r\n    \r\n    {% else %}\r\n      \r\n  {% endcase %}\r\n{% endfor %}\r\n\r\n{% capture list %}\r\n  <div class=\"timer-list-{{ section.id }}\">\r\n    {% for i in (1..5) %}\r\n      {% for block in section.blocks %}\r\n        {% case block.type %}\r\n            {% when 'timer' %}\r\n             <div class=\"countdown-timer-wrapper-{{ block.id }}\">\r\n                  <div class=\"countdown-timer-text-{{ block.id }}\">{{ block.settings.text }}</div>\r\n                  <div class=\"countdown-timer-{{ block.id }}\">        \r\n                    <div class=\"time-block\">\r\n                      <span class=\"time-block__num js-timer-days\">00</span>                          \r\n                    </div>\r\n                    <span class=\"time-block__num colons\">:</span>\r\n                    <div class=\"time-block\">\r\n                      <span class=\"time-block__num js-timer-hours\">00</span>                              \r\n                    </div>\r\n                    <span class=\"time-block__num colons\">:</span>\r\n                    <div class=\"time-block\">\r\n                      <span class=\"time-block__num js-timer-minutes\">00</span>                                    \r\n                    </div>\r\n                    <span class=\"time-block__num colons\">:</span>\r\n                    <div class=\"time-block\">\r\n                      <span class=\"time-block__num js-timer-seconds\">00</span>                           \r\n                    </div>\r\n                  </div>\r\n                  <div class=\"countdown-completed-text-{{ block.id }}\">\r\n                    {{ block.settings.completed_text }}\r\n                  </div>\r\n                </div> \r\n            \r\n            {% when 'text' %}\r\n            {% if block.settings.text != blank %}\r\n                <div class=\"countdown-text-{{ block.id }}\">{{ block.settings.text }}</div>\r\n            {% endif %} \r\n            \r\n            {% else %}\r\n            \r\n        {% endcase %}\r\n      {% endfor %}\r\n    {% endfor %}\r\n  </div>\r\n{% endcapture %}\r\n\r\n{% if position == \"class\" %}\r\n<template id=\"countdown-timer-template-{{ section.id }}\">\r\n{% endif %}\r\n  <div class=\"section-{{ section.id }} countdown-timer-{{ section.id }}\">\r\n    <div class=\"section-{{ section.id }}-settings\" {% if background_style == 'solid' %}style=\"background-color:{{ background_color }};\"{% else %} style=\"background-image: {{ background_gradient }};\"{% endif %}>  \r\n      <div class=\"countdown-timer-content-{{ section.id }}\">           \r\n\r\n        <div class=\"timer-wrapper-{{ section.id }}\">\r\n          {{ list }}\r\n          {{ list }}\r\n        </div>\r\n      </div>     \r\n    </div>\r\n  </div>\r\n{% if position == \"class\" %}\r\n</template>\r\n{% endif %}\r\n\r\n<div id=\"countdown-timer-local-target-{{ section.id }}\"></div>\r\n\r\n<script>\r\n  function initCountdownTimerBar6{{ section.id | replace: '-', '' }}() {\r\n  const sectionId = '{{ section.id }}';\r\n  if (window[`timer_initialized_${sectionId}`]) return;\r\n  window[`timer_initialized_${sectionId}`] = true;\r\n\r\n  setTimeout(() => {\r\n    {% for block in section.blocks %}\r\n      {% case block.type %} \r\n      {% when 'timer' %}\r\n        {% if position == \"class\" %}\r\n            const cssTarget = '{{ section.settings.insert_css_class_target }}';\r\n            const targetElement = cssTarget\r\n                ? document.querySelector(cssTarget)\r\n                : document.querySelector('#countdown-timer-local-target-{{ section.id }}');\r\n        \r\n            if (!targetElement) {\r\n                console.warn('Target element not found for countdown timer');\r\n                return;\r\n            }\r\n        \r\n            const templateContent = document.querySelector('#countdown-timer-template-{{ section.id }}');\r\n            if (!templateContent) return;\r\n            \r\n            if (document.querySelector('.countdown-timer-{{ section.id }}')) return;\r\n            \r\n            targetElement.insertAdjacentElement('beforebegin', templateContent.content.firstElementChild.cloneNode(true));\r\n        {% endif %}\r\n\r\n        const section = document.querySelector('.countdown-timer-{{ section.id }}');\r\n        if (!section) return;\r\n\r\n        function setFixedWidthForTimeBlocks() {\r\n          const wrappers = document.querySelectorAll('.countdown-timer-{{ block.id }}');\r\n          \r\n          wrappers.forEach((wrapper) => {\r\n            const timeBlocks = wrapper.querySelectorAll('.time-block');\r\n            let maxWidth = 0;\r\n            \r\n            // Создаем временный элемент для измерения ширины всех цифр\r\n            const tempSpan = document.createElement('span');\r\n            tempSpan.className = 'time-block__num';\r\n            tempSpan.style.visibility = 'hidden';\r\n            tempSpan.style.position = 'absolute';\r\n            wrapper.appendChild(tempSpan);\r\n            \r\n            for (let i = 0; i <= 59; i++) {\r\n              tempSpan.innerText = i.toString();\r\n              const width = tempSpan.offsetWidth;\r\n              if (width > maxWidth) {\r\n                maxWidth = width;\r\n              }\r\n            }\r\n            \r\n            wrapper.removeChild(tempSpan);\r\n\r\n            timeBlocks.forEach((block) => {\r\n              const numSpan = block.querySelector('.time-block__num');\r\n              if (numSpan) {\r\n                numSpan.style.minWidth = maxWidth + 'px';\r\n                numSpan.style.display = 'inline-block';\r\n                numSpan.style.textAlign = 'center';\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        function startTimer() {\r\n          const second = 1000,\r\n              minute = second * 60,\r\n              hour = minute * 60,\r\n              day = hour * 24;\r\n              \r\n          const wrappers = document.querySelectorAll('.countdown-timer-{{ block.id }}');\r\n          \r\n          // Устанавливаем фиксированную ширину перед началом таймера\r\n          setFixedWidthForTimeBlocks();\r\n          \r\n          wrappers.forEach((wrapper) => {\r\n            const countDown = new Date('{{ block.settings.year }}-{{ block.settings.month }}-{{ block.settings.day }}T{{ block.settings.hour }}:{{ block.settings.minute }}:00Z').getTime();\r\n\r\n            const interval = setInterval(function () {\r\n                const now = new Date().getTime();\r\n                const distance = countDown - now;\r\n                \r\n                const days = Math.floor(distance / day);\r\n                const hours = Math.floor((distance % day) / hour);\r\n                const minutes = Math.floor((distance % hour) / minute);\r\n                const seconds = Math.floor((distance % minute) / second);\r\n\r\n                // Проверка существования элементов\r\n                const daysEl = wrapper.querySelector('.js-timer-days');\r\n                const hoursEl = wrapper.querySelector('.js-timer-hours');\r\n                const minutesEl = wrapper.querySelector('.js-timer-minutes');\r\n                const secondsEl = wrapper.querySelector('.js-timer-seconds');\r\n\r\n                if (daysEl) daysEl.innerText = days >= 0 ? days : '00';\r\n                if (hoursEl) hoursEl.innerText = hours >= 0 ? hours : '00';\r\n                if (minutesEl) minutesEl.innerText = minutes >= 0 ? minutes : '00';\r\n                if (secondsEl) secondsEl.innerText = seconds >= 0 ? seconds : '00';\r\n\r\n                if (distance < 0) {\r\n                    {% if block.settings.hide_timer_on_completed %}\r\n                        wrapper.style.display = 'none';\r\n                        const completedText = document.querySelectorAll('.countdown-completed-text-{{ block.id }}');\r\n                        if (completedText) {\r\n                          completedText.forEach((text) => {\r\n                            text.classList.add('active');\r\n                          })\r\n                        }\r\n                    {% endif %}\r\n                    clearInterval(interval);\r\n                }\r\n            }, second);\r\n            \r\n            document.addEventListener('shopify:section:unload', function (event) {\r\n                if (event.detail.sectionId === '{{ section.id }}') {\r\n                    clearInterval(interval);\r\n                }\r\n            });\r\n          });               \r\n        }\r\n        \r\n        startTimer();\r\n      {% endcase %}\r\n    {% endfor %}        \r\n  }, 500);\r\n  }\r\n\r\n  document.addEventListener('DOMContentLoaded', initCountdownTimerBar6{{ section.id | replace: '-', '' }});  \r\n</script>",
  "variables": {}
}